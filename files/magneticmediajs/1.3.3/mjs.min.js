/* 
 * Magneticmediajs 1.3.3 | https://www.magneticmediajs.com
 * Copyright (c) 2014-2015 Arnaud Leyder | Leyder Consulting | https://www.leyder-consulting.com
 * Released under MIT license https://www.magneticmediajs.com/mit-license.html
 * For contact information please visit https://www.magneticmediajs.com/about.html
 */
var mjsGlobal={itemOnStage:!1,itemType:"",itemName:"",mapCallback:function(){},mapInstance:{},borderWidth:{},borderRadius:{},videoWidth:{},videoHeight:{},locationProtocol:"",hasTouchMove:!1,hasSwipe:!1,hasSwipeLeft:!1,hasSwipeRight:!1,startX:0,startY:0,timeSpacer:!1,isResizeReady:!1,inResizing:!1,orgOverflow:""},Magneticmediajs=function(){function e(e,o,a){this.elements=this.getElements(e),this._defaults={color1:"080808",color2:"fdfdfd",borderWidth:8,borderRadius:8,background:"000000",backgroundOpacity:.7,displayTitle:!1,videoWidth:640,videoHeight:360,autoPlayVideo:!1,zoomOn:!1,zoomLevel:2,zoomType:"default",zoomSize:200,sharing:!1,facebookID:0xedf5063be3ee,gallery:!1,ecommerce:!1,showIcons:!0,galleryMaxThumbnailHeight:150,thumbnailPadding:0,thumbnailBorderWidth:0,thumbnailBorderRadius:0,thumbnailBorderColor:"BBB",filter:"none",onMjsMediaOnStage:function(){},onMjsMediaOffStage:function(){}},this.settings=o,this.data=a}var o=function(){var e=window.location.protocol;mjsGlobal.locationProtocol="undefined"==typeof e?"https:":"http:"===e?e:"https:"},a=function(){return!!document.createElement("video").canPlayType},t=function(){var e=!1;if(a()){var o=document.createElement("video"),t=o.canPlayType("video/mp4");""!==t&&(e=!0)}return e},i=function(){var e=navigator.userAgent.toLowerCase().match(/(iphone|ipod|ipad)/g)?!0:!1;return e},r=function(e){var o=/^#?([a-f\d])([a-f\d])([a-f\d])$/i,a=e.replace(o,function(e,o,a){return e+e+o+o+a+a}),t=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(a);return t?{r:parseInt(t[1],16),g:parseInt(t[2],16),b:parseInt(t[3],16)}:null},s=function(e,o,a,t,i,r,s){var n=e/o;if(768>a)var i=i/2.5,r=r/2.5,l=Math.floor(75*a/100),m=Math.floor(75*t/100);else if(a>=768&&1024>a)var i=i/1.5,r=r/1.5,l=Math.floor(80*a/100),m=Math.floor(80*t/100);else var i=i,r=r,l=Math.floor(82*a/100),m=Math.floor(82*t/100);if(e>l&&o>m){var e=l,o=Math.floor(e/n);o>m&&(o=m,e=Math.floor(o*n))}else if(e>l){var e=l,o=Math.floor(e/n);"maps"===s&&m>o&&(o=m)}else if(o>m){var o=m,e=Math.floor(o*n);"maps"===s&&l>e&&(e=l)}else{var e=l,o=Math.floor(e/n);o>m&&(o=m,e=Math.floor(o*n))}var c=[];return c[0]=e,c[1]=o,c[2]=i,c[3]=r,c},n=function(e){mjsGlobal.itemOnStage=!0,mjsGlobal.itemName=e,"image"===e||"flickr"===e||"instagram"===e?mjsGlobal.itemType="image":"video"===e||"youtube"===e||"vimeo"===e||"dailymotion"===e?mjsGlobal.itemType="video":"maps"===e&&(mjsGlobal.itemType="maps")},l=function(){mjsGlobal.itemOnStage=!1,mjsGlobal.itemName="",mjsGlobal.itemType="",mjsGlobal.mapInstance=null},m=function(){var e=0;return e=i()?window.innerHeight:$(window).height()},c=function(e,o){$(".mjs-fs-wrapper").length&&0===e&&o>0&&($(".mjs-fs-wrapper > img").css("border-radius",o+"px"),$(".mjs-fs-wrapper > video").css("border-radius",o+"px"))},d=function(e,o,a,t,i,r,n,l,d,p,f,u){var h=$(window).width(),g=m(),v=new Image;v.id="mjs-img-full",$(v).appendTo(".mjs-fs-wrapper");var j=$(".mjs-fs-wrapper");$(v).on("load",function(){var e=b(v),m=e[0],w=e[1],y=s(m,w,h,g,p,f,"picture");m=y[0],w=y[1];var x=y[2],G=y[3];j.css({width:m+"px",height:w+"px","max-width":"","max-height":""}).fadeIn(300),o&&O(v.src,a,t,i),r&&""!==n&&(j.append('<div class="mjs-title-area">'+n+"</div>"),j.css({"margin-top":"-15px"})),A(l,d,x,G),"none"!==u&&j.find("img").addClass("mjs-"+u),$(".mjs-parent-spin").removeClass("mjs-do-spin").hide(),c(x,G),$(document).trigger("mjsMediaOnStage")}),$(v).on("error",function(){$(".mjs-fullscreen").remove(),$(".mjs-parent-spin").removeClass("mjs-do-spin").hide(),alert("An error occurred while loading this content. Please try again later.")}),v.src=e},p=function(e,o,a,t,i){var r=new google.maps.LatLng(e,o),s={zoom:a,center:r};mjsGlobal.mapInstance=new google.maps.Map(document.getElementById("map-canvas"),s);var n=i,l=new google.maps.InfoWindow({content:n,maxWidth:300}),m=new google.maps.Marker({position:r,map:mjsGlobal.mapInstance,animation:google.maps.Animation.DROP,title:t});google.maps.event.addListener(m,"click",function(){l.open(mjsGlobal.mapInstance,m)})},f=function(e){var o=$("#mjsMaps");o.next().remove(),o.remove();var a=document.createElement("script");a.type="text/javascript",a.id="mjsMaps",window.mapCallback=mjsGlobal.mapCallback,a.src=""!==e?mjsGlobal.locationProtocol+"//maps.googleapis.com/maps/api/js?key="+e+"&v=3.exp&callback=window.mapCallback":mjsGlobal.locationProtocol+"//maps.googleapis.com/maps/api/js?v=3.exp&callback=window.mapCallback",document.body.appendChild(a)},u=function(e,o,a,t,i,r,n,l,c,d){var u=$(window).width(),h=m();$(".mjs-fullscreen").css({width:u+"px",height:h+"px"});var g='<div id="map-canvas" class="map-area"></div>';$(g).appendTo(".mjs-fs-wrapper"),mjsGlobal.mapCallback=function(){p(r,n,l,c,d)},f(i);var v=u,j=h,b=s(v,j,u,h,a,t,"maps"),v=b[0],j=b[1],w=b[2],y=b[3];$(".mjs-fs-wrapper").css({width:v+"px",height:j+"px","max-width":"","max-height":"",background:"#FFFFFF",color:"#000000"}).fadeIn(300),A(e,o,w,y),$(".mjs-parent-spin").removeClass("mjs-do-spin").hide(),$(document).trigger("mjsMediaOnStage")},h=function(e,o,a,i,r,n,l,d,p,f,u,h){var g=$(window).width(),v=m();"mjsSingleItem"===o&&(o=h,h="");var j=0;r&&(j=1);var b="";if(e.indexOf("youtube")>-1)b='<div class="mjs-video-player"><iframe src="'+mjsGlobal.locationProtocol+"//www.youtube.com/embed/"+o+"?autoplay="+j+'" frameborder="0" allowfullscreen></iframe></div>';else if(e.indexOf("vimeo")>-1)b='<div class="mjs-video-player"><iframe src="'+mjsGlobal.locationProtocol+"//player.vimeo.com/video/"+o+"?autoplay="+j+'" frameborder="0" webkitallowfullscreen mozallowfullscreen allowfullscreen></iframe></div>';else if(e.indexOf("dailymotion")>-1)b='<div class="mjs-video-player"><iframe src="'+mjsGlobal.locationProtocol+"//www.dailymotion.com/embed/video/"+o+"?autoplay="+j+'" frameborder="0"></iframe></div>';else{var w=o,y=h;if(""===h&&(y=w,w=""),t())j=r?"autoplay":"",b='<video controls poster="'+w+'" src="'+y+'" class="mjs-video-player" '+j+' preload="auto"></video>';else{var x=y,G=w;"http:"!==x.substring(0,5)&&"https:"!==x.substring(0,5)&&(x="../"+x),"undefined"!=typeof swfobject&&swfobject.hasFlashPlayerVersion("10")&&(G=encodeURIComponent(G),x=encodeURIComponent(x),b='<div class="mjs-video-player"><object width="100%" height="100%"><param name="movie" value="flash/StrobeMediaPlayback.swf"></param><param name="flashvars" value="src='+x+"&poster="+G+"&controlBarAutoHide=true&autoPlay="+r+'"></param><param name="allowFullScreen" value="true"></param><param name="allowscriptaccess" value="always"></param><param name="wmode" value="transparent"></param><embed width="100%" height="100%" src="flash/StrobeMediaPlayback.swf" type="application/x-shockwave-flash" allowscriptaccess="always" allowfullscreen="true" wmode="transparent" flashvars="src='+x+"&poster="+G+"&controlBarAutoHide=true&autoPlay="+r+'"></embed></object>')}}var k=s(a,i,g,v,f,u,"video"),O=k[0],S=k[1],M=k[2],T=k[3];$(".mjs-fs-wrapper").append(b),$(".mjs-fs-wrapper, .mjs-video-player").css({width:O+"px",height:S+"px","max-width":a+"px","max-height":i+"px"}).fadeIn(300);var C=0,P=0;C=O>a?a:O,P=S>i?i:S,$(".mjs-video-player").find("iframe").css({width:C+"px",height:P+"px"}),n&&""!==l&&$(".mjs-fs-wrapper").append('<div class="mjs-title-area">'+l+"</div>").css({"margin-top":"-15px"}),A(d,p,M,T),$(".mjs-parent-spin").removeClass("mjs-do-spin").hide(),c(M,T),$(document).trigger("mjsMediaOnStage")},g=function(e,o,a,t){var i="mqdefault";"small"===o?i="default":"medium"===o?i="mqdefault":"large"===o&&(i="hqdefault");var r=mjsGlobal.locationProtocol+"//img.youtube.com/vi/"+e+"/"+i+".jpg";$(t.container).find(".mjsThumb"+a).prop("src",r)},v=function(e,o,a,t){$.ajax({url:"https://www.vimeo.com/api/v2/video/"+e+".json?callback=?",dataType:"jsonp",timeout:5e3}).done(function(e){var i="";"small"===o?(i=e[0].thumbnail_small,i.indexOf("http:")>-1&&"https:"===mjsGlobal.locationProtocol&&(i=i.replace("http:",mjsGlobal.locationProtocol)),$(t.container).find(".mjsThumb"+a).prop("src",i)):"medium"===o?(i=e[0].thumbnail_medium,i.indexOf("http:")>-1&&"https:"===mjsGlobal.locationProtocol&&(i=i.replace("http:",mjsGlobal.locationProtocol)),$(t.container).find(".mjsThumb"+a).prop("src",i)):(i=e[0].thumbnail_large,i.indexOf("http:")>-1&&"https:"===mjsGlobal.locationProtocol&&(i=i.replace("http:",mjsGlobal.locationProtocol)),$(t.container).find(".mjsThumb"+a).prop("src",i))}).fail(function(){$(t.container).find(".mjsThumb"+a).parent().remove(),t.loadErrors=t.loadErrors+1})},j=function(e,o,a,t){var i="360";"small"===o?i="180":"medium"===o?i="360":"large"===o&&(i="720"),$.getJSON("https://api.dailymotion.com/video/"+e+"?fields=thumbnail_"+i+"_url",function(e){var o=e["thumbnail_"+i+"_url"];$(t.container).find(".mjsThumb"+a).prop("src",o)}).fail(function(){$(t.container).find(".mjsThumb"+a).parent().remove(),t.loadErrors=t.loadErrors+1})},b=function(e){var o=[];if(e.naturalWidth)o[0]=e.naturalWidth,o[1]=e.naturalHeight;else{var a=new Image;a.src=e.src,$(a).on("load",function(){o[0]=this.width,o[1]=this.height})}return o},w=function(e,o,a,t,i,r,s,n,l,m,c,p,f,u,h,g){var v,j,b="https://api.flickr.com/services/rest/?method=flickr.photos.search&api_key=3b109ff5810e4d81b73292507ca19928&text="+o+"&safe_search=1&per_page=10&user_id="+e;$.ajax({url:b+"&format=json&jsoncallback=?",dataType:"jsonp",timeout:5e3}).done(function(e){"undefined"!=typeof e.photos&&e.photos.total>0?$.each(e.photos.photo,function(e,o){"thumbnail"===t?(j=mjsGlobal.locationProtocol+"//farm"+o.farm+".static.flickr.com/"+o.server+"/"+o.id+"_"+o.secret+"_n.jpg",$(g.container).find(".mjsThumb"+a).prop("src",j)):(v=mjsGlobal.locationProtocol+"//farm"+o.farm+".static.flickr.com/"+o.server+"/"+o.id+"_"+o.secret+"_b.jpg",d(v,i,r,s,n,l,m,c,p,f,u,h))}):"thumbnail"===t?($(g.container).find(".mjsThumb"+a).parent().remove(),g.loadErrors=g.loadErrors+1):($(".mjs-fullscreen").remove(),$(".mjs-parent-spin").removeClass("mjs-do-spin").hide(),alert("An error occurred while loading this content. Please try again later."))}).fail(function(){"thumbnail"===t?($(g.container).find(".mjsThumb"+a).parent().remove(),g.loadErrors=g.loadErrors+1):($(".mjs-fullscreen").remove(),$(".mjs-parent-spin").removeClass("mjs-do-spin").hide(),alert("An error occurred while loading this content. Please try again later."))})},y=function(e,o){var a=e;if(o)t=a.originalEvent.touches[0].pageX;else{var t=0;a||(a=window.event),a.pageX?t=a.pageX:a.clientX&&(t=a.clientX)}return t},x=function(e,o){var a=e;if(o)t=a.originalEvent.touches[0].pageY;else{var t=0;a||(a=window.event),a.pageY?t=a.pageY:a.clientX&&(t=a.clientY)}return t},G=function(e,o,a,t,i,r,s,n){var l=y(e,o),m=x(e,o),c=0,d=0;c=i+n/4>l?-(n/4):l>=a+i-n/4?a-3*n/4:l-n/2-i,d=r+n/4>m?-(n/4):m>=t+r-n/4?t-3*n/4:m-n/2-r;var p=c*s+n/2,f=d*s+n/2;0>f&&(f=0),0>p&&(p=0),$("#mjs-zoom-box").css({"background-position":"-"+p+"px -"+f+"px",left:c+"px",top:d+"px","background-size":a*s+"px "+t*s+"px"})},k=function(e){e.stopPropagation(),e.preventDefault(),"mjs-fs-wrapper"!==e.target.id&&$(".mjs-fs-wrapper").trigger("mouseleave")},O=function(e,o,a,t){var i=!1,r=$(".mjs-fs-wrapper"),s=r.width(),n=r.height(),l=r.offset().left,m=r.offset().top,c=!1;$(document).on("touchstart",k),$(".mjs-fs-wrapper").on("mouseleave",function(){$("#mjs-zoom-box").fadeOut("fast",function(){$(this).remove(),i=!1})}),r.on("touchstart",function(e){e.stopPropagation(),e.preventDefault(),c=!0;var o=e;$(this).trigger("mouseenter",[o])}),r.on("mouseenter",function(d,p){if(i){if(!c)var p=d;"mjs-zoom-box"!==p.target.id&&r.trigger("mouseleave")}else{$('<div id="mjs-zoom-box"></div>').hide().appendTo($(this));var f=$("#mjs-zoom-box");f.css({"background-image":'url("'+e+'")'}).fadeIn("fast"),i=!0;var u=$(window).width(),h=t;if(480>u?h=100:768>u&&(h/=1.4),100>h?h=100:h>300&&(h=300),f.width(h).height(h),f.css("lens"===a?{"border-radius":"50%","-webkit-box-shadow":"inset 0px 0px 2px 2px #000,0 0 0 8px #0a0a0a, 0 0 0 9px #EEE, 0px 0px 2px 10px #000","box-shadow":"inset 0px 0px 2px 2px #000, 0 0 0 8px #0a0a0a,0 0 0 9px #EEE, 0px 0px 2px 10px #000"}:{"border-radius":"1px",border:"none","-webkit-box-shadow":"0px 0px 3px 1px #000","box-shadow":"0px 0px 3px 1px #000"}),!c)var p=d;G(p,c,s,n,l,m,o,h)}r.on("mousemove touchmove",function(e){G(e,c,s,n,l,m,o,h)})})},A=function(e,o,a,t){var i="",r="";e===o?(i=e,r="000"):(i=e,r=o);var s=$(".mjs-fs-wrapper");s.css({"border-radius":t+"px"}),s.find("#mjs-img-full").length?s.find("#mjs-img-full").css({border:a+"px solid #"+e,"border-radius":t+"px"}):s.find(".map-area").length?s.find(".map-area").css({border:a+"px solid #"+e,"border-radius":t+"px"}):s.find("video.mjs-video-player").length?s.find("video.mjs-video-player").css({border:a+"px solid #"+e,"border-radius":t+"px"}):s.find("iframe").length&&s.find("iframe").css({border:a+"px solid #"+e,"border-radius":t+"px"}),$(".mjs-title-area").css({color:"#"+r,background:"#"+i,"border-radius":Math.round(t/2)+"px"}),$(".mjs-close, .mjs-facebook, .mjs-twitter").css({color:"#"+o})},S=function(e,o){$(".mjs-parent-spin").css({background:"#"+e,color:"#"+o})},M=function(e){e.stopPropagation();var o=e.data.param1.find("img");switch(e.which){case 32:e.preventDefault(),$(document).find(".mjs-fullscreen").length||(e.data.param1.hasClass("mjs-generic")?o.trigger("click"):e.data.param1.trigger("click"));break;case 27:e.preventDefault(),$(".mjs-fullscreen").fadeOut(300,function(){$(this).remove(),l(),$(document).trigger("mjsMediaOffStage")});break;case 37:e.preventDefault(),$(".mjs-previous").trigger("click");break;case 39:e.preventDefault(),$(".mjs-next").trigger("click");break;default:return}},T=function(e,o,a){console.log(e);var t=$(window.location).attr("search");t=t.substr(1).split("&");for(var i=0,r=t.length;r>i;i++){var s=t[i].split("=");"magnetid"===s[0]&&(o&&s[1]===e?a.find("img.mjsThumb"+s[1].substr(s[1].length-1)).trigger("click"):!o&&(e.indexOf(s[1])>1||e===s[1])&&$("#"+s[1].replace("mjs","")).trigger("click"))}},C=function(e){(Math.abs(e.originalEvent.touches[0].clientX-mjsGlobal.startX)>10||Math.abs(e.originalEvent.touches[0].clientY-mjsGlobal.startY)>10)&&(mjsGlobal.hasTouchMove=!0,$(document).off("touchmove",C))},P=function(e){e.originalEvent.touches[0].clientX-mjsGlobal.startX>50?(mjsGlobal.hasSwipe=!0,mjsGlobal.hasSwipeLeft=!0,$(document).off("touchmove",P)):mjsGlobal.startX-e.originalEvent.touches[0].clientX>50&&(mjsGlobal.hasSwipe=!0,mjsGlobal.hasSwipeRight=!0,$(document).off("touchmove",P))};return e.prototype.init=function(){if(null===this.elements)return null;var e=$.trim(this.elements).split(","),a=this.settings,t=this._defaults;for(var i in t)if("undefined"!=typeof a[i]){if(typeof a[i]!=typeof t[i])return console.log("Invalid input settings (typeof) for Magneticmedisjs"),null;t[i]=a[i]}this.settings=t;var s=this.data;if(s.constructor!==Array)return console.log("Invalid data array - not an Array"),null;var c=s.length;if(1>c)return null;for(var p=0;c>p;p++){var f=s[p];if(f.constructor!==Array)return console.log("Invalid data array - not an Array of Array"),null;var b=f.length;if(2>b)return null;for(var y=0;b>y;y++)if("string"!=typeof f[y]&&"maps"===f[0]&&"number"!=typeof f[y])return console.log("Invalid data array - only strings are valid for data arraycontent"+typeof f[y]),null}var x=t.gallery,G=t.galleryMaxThumbnailHeight,O=t.thumbnailPadding,A=t.thumbnailBorderWidth,D=t.thumbnailBorderRadius,z=t.thumbnailBorderColor,E=t.videoWidth,I=t.videoHeight,R=t.autoPlayVideo,_=t.zoomOn,B=t.zoomLevel;1>B?B=1:B>4&&(B=4);var W=t.zoomType,X=t.zoomSize,L=t.displayTitle,H=t.color1,Y=t.color2,F=t.filter,Q=t.borderWidth;Q>20?Q=20:0>Q&&(Q=0);var q=t.borderRadius;q>20?q=20:0>q&&(q=0);var N=t.background,U=t.backgroundOpacity,V=t.sharing,J=t.facebookID;this.ecommerce=t.ecommerce,this.ecommerce&&(x=!0);var K=t.showIcons,Z=t.onMjsMediaOnStage,eo=t.onMjsMediaOffStage;this.nbOfData=s.length,o(),this.loadErrors=0;for(var oo=this,ao=0,to=e.length;to>ao;ao++){this.container=$.trim(e[ao]);var io=$(this.container);x||io.attr("tabindex","0");var ro=0;this.thumbLoadCount=0,$(document).on("mjsMediaOnStage",function(){Z()}),$(document).on("mjsMediaOffStage",function(){eo()}),$("body").has(".mjs-parent-spin").length||($("body").append('<div class="mjs-parent-spin"><span class="mjs-s-spin animate-spin"></span></div>'),S(H,Y)),x&&io.addClass("mjs-row-gallery").hide();for(var so=0;so<this.nbOfData;so++){if(x){var no="mjs"+so,lo=$(oo.container).prop("id");this.ecommerce?0===so?(io.addClass("mjs-ecommerce-gallery"),io.append('<div class="mjs-generic mjs-ecommerce-main" tabindex="0"><img id="'+lo+so+'" class="mjsThumb'+so+'" src="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs%3D" /></div>')):(1===so&&io.append('<div id="mjs-ecommerce-col"></div>'),io.find("#mjs-ecommerce-col").append('<div class="mjs-generic mjs-ecommerce-col-img" tabindex="0"><img id="'+lo+so+'" class="mjsThumb'+so+'" src="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs%3D" /></div>')):io.append('<div class="mjs-generic" tabindex="0"><img id="'+lo+so+'" class="mjsThumb'+so+'" src="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs%3D" /></div>');var mo=io.find(".mjsThumb"+so);mo.on("error",{param:so},function(e){var o=e.data.param;io.find(".mjsThumb"+o).parent().remove(),oo.loadErrors=oo.loadErrors+1}),mo.on("load",function(){"data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs%3D"!==$(this).attr("src")&&(oo.thumbLoadCount=oo.thumbLoadCount+1)}),"youtube"===s[so][0]?g(s[so][1],s[so][2],so,oo):"vimeo"===s[so][0]?v(s[so][1],s[so][2],so,oo):"dailymotion"===s[so][0]?j(s[so][1],s[so][2],so,oo):"flickr"===s[so][0]?w(s[so][1],s[so][2],so,"thumbnail","","","","","","","","","","",F,oo):"instagram"===s[so][0]?mo.prop("src",mjsGlobal.locationProtocol+"//instagram.com/p/"+s[so][1]+"/media/?size=m"):mo.prop("src",s[so][1]),K&&("video"===s[so][0]||"youtube"===s[so][0]||"vimeo"===s[so][0]||"dailymotion"===s[so][0]?mo.parent().append('<div class="mjs-video-play-gallery mjs-i-play-circled"></div>'):"maps"===s[so][0]&&mo.parent().append('<div class="mjs-video-play-gallery mjs-i-location"></div>')),io.find(".mjs-video-play-gallery").css({color:"#"+Y});var co=mo.parent().children(),po=1}else{if("undefined"!=typeof io.attr("id"))var no="mjs"+io.attr("id");else var no=io.offset().left+io.offset().top;var co=io,po=0}mjsGlobal.borderWidth[no]=Q,mjsGlobal.borderRadius[no]=q,mjsGlobal.videoWidth[no]=E,mjsGlobal.videoHeight[no]=I,co.on("touchstart",function(e){$("body").has(".mjs-fullscreen").length||($(document).off("touchmove",C),mjsGlobal.hasTouchMove=!1,mjsGlobal.startX=e.originalEvent.touches[0].clientX,mjsGlobal.startY=e.originalEvent.touches[0].clientY,$(document).on("touchmove",C),$(this).on("touchend",function o(e){$(document).off("touchmove",C),mjsGlobal.hasTouchMove||(e.stopPropagation(),e.preventDefault(),e.target.click()),$(this).off("touchend",o)}))}),co.on("click",{param:so},function(e){e.stopPropagation();var o=$("body");if(_&&(mjsGlobal.orgOverflow=o.css("overflow"),o.css("overflow","hidden")),!o.has(".mjs-fullscreen").length){mjsGlobal.timeSpacer=!0,setTimeout(function(){mjsGlobal.timeSpacer=!1},500),$("#mjs-zoom-box").length&&$("#mjs-zoom-box").remove(),ro=e.data.param;var a="";o.append('<div class="mjs-fullscreen"></div>');var t=$(".mjs-fullscreen");$(".mjs-parent-spin").show().addClass("mjs-do-spin"),S(H,Y);var i=r("#"+N).r,c=r("#"+N).g,p=r("#"+N).b,f=$(window).width(),g=m();t.css({width:f+"px",height:g+"px",background:"rgba("+i+", "+c+", "+p+", "+U+")"});var v="";v=oo.nbOfData>1&&x?"mjs"+ro:no,t.append('<div class="mjs-fs-wrapper" id="'+v+'"><div class="mjs-close mjs-icons mjs-i-cancel"></div></div>');var j=$(".mjs-fs-wrapper");if(j.off("mouseleave mouseenter"),V&&j.append('<div class="mjs-facebook mjs-icons mjs-i-facebook-squared"></div><div class="mjs-twitter mjs-icons mjs-i-twitter-squared"></div>'),L&&("image"!==s[ro][0]&&"instagram"!==s[ro][0]||x||"undefined"==typeof s[ro][2]?"undefined"!=typeof s[ro][3]&&(a=s[ro][3]):a=s[ro][2]),n(s[ro][0]),"image"===s[ro][0]?d(s[ro][po+1],_,B,W,X,L,a,H,Y,Q,q,F):"flickr"===s[ro][0]?w(s[ro][1],s[ro][2],ro,"big",_,B,W,X,L,a,H,Y,Q,q,F,""):"instagram"===s[ro][0]?d(mjsGlobal.locationProtocol+"//instagram.com/p/"+s[ro][po+1]+"/media/?size=l",_,B,W,X,L,a,H,Y,Q,q,F):"video"===s[ro][0]||"youtube"===s[ro][0]||"vimeo"===s[ro][0]||"dailymotion"===s[ro][0]?x?h(s[ro][0],s[ro][1],E,I,R,L,a,H,Y,Q,q,s[ro][2]):h(s[ro][0],"mjsSingleItem",E,I,R,L,a,H,Y,Q,q,s[ro][1]):"maps"===s[ro][0]&&(x?u(H,Y,Q,q,s[ro][2],s[ro][3],s[ro][4],s[ro][5],s[ro][6],s[ro][7]):u(H,Y,Q,q,s[ro][1],s[ro][2],s[ro][3],s[ro][4],s[ro][5],s[ro][6])),oo.nbOfData>1&&x){j.append('<div class="mjs-previous mjs-i-left-open"></div><div class="mjs-next mjs-i-right-open"></div>');var b=$(".mjs-previous"),y=$(".mjs-next");b.css({color:"#"+Y}),y.css({color:"#"+Y}),b.on("touchstart",function(e){e.stopPropagation(),e.preventDefault(),e.target.click()}),b.on("click",function(){$("#mjs-zoom-box").remove();var e=$(".mjs-fs-wrapper");e.off("mouseleave mouseenter"),ro--,-1===ro&&(ro=oo.nbOfData-1),$(".mjs-title-area").remove(),L&&(a="undefined"!=typeof s[ro][3]?s[ro][3]:"");var o;mjsGlobal.itemOnStage&&"image"===mjsGlobal.itemType?o=$(".mjs-fs-wrapper").find("img"):mjsGlobal.itemOnStage&&"video"===mjsGlobal.itemType?o=$(".mjs-video-player"):mjsGlobal.itemOnStage&&"maps"===mjsGlobal.itemType&&(o=$(".map-area")),n(s[ro][0]),"instagram"===s[ro][0]?o.fadeOut(200,function(){$(this).remove(),$(document).trigger("mjsMediaOffStage"),d(mjsGlobal.locationProtocol+"//instagram.com/p/"+s[ro][2]+"/media/?size=l",_,B,W,X,L,a,H,Y,Q,q,F)}):"flickr"===s[ro][0]?o.fadeOut(200,function(){$(this).remove(),$(document).trigger("mjsMediaOffStage"),w(s[ro][1],s[ro][2],ro,"big",_,B,W,X,L,a,H,Y,Q,q,F,"")}):"image"===s[ro][0]?o.fadeOut(200,function(){$(this).remove(),$(document).trigger("mjsMediaOffStage"),d(s[ro][2],_,B,W,X,L,a,H,Y,Q,q,F)}):"video"===s[ro][0]||"youtube"===s[ro][0]||"vimeo"===s[ro][0]||"dailymotion"===s[ro][0]?o.fadeOut(200,function(){$(this).remove(),$(document).trigger("mjsMediaOffStage"),h(s[ro][0],s[ro][1],E,I,R,L,a,H,Y,Q,q,s[ro][1])}):"maps"===s[ro][0]&&o.fadeOut(200,function(){$(this).remove(),$(document).trigger("mjsMediaOffStage"),u(H,Y,Q,q,s[ro][2],s[ro][3],s[ro][4],s[ro][5],s[ro][6],s[ro][7])}),e.attr("id","mjs"+ro)}),y.on("touchstart",function(e){e.stopPropagation(),e.preventDefault(),e.target.click()}),y.on("click",function(){$("#mjs-zoom-box").remove();var e=$(".mjs-fs-wrapper");e.off("mouseleave mouseenter"),ro++,ro===oo.nbOfData&&(ro=0),$(".mjs-title-area").remove(),L&&(a="undefined"!=typeof s[ro][3]?s[ro][3]:"");var o;mjsGlobal.itemOnStage&&"image"===mjsGlobal.itemType?o=$(".mjs-fs-wrapper").find("img"):mjsGlobal.itemOnStage&&"video"===mjsGlobal.itemType?o=$(".mjs-video-player"):mjsGlobal.itemOnStage&&"maps"===mjsGlobal.itemType&&(o=$(".map-area")),n(s[ro][0]),"instagram"===s[ro][0]?o.fadeOut(200,function(){$(this).remove(),$(document).trigger("mjsMediaOffStage"),d(mjsGlobal.locationProtocol+"//instagram.com/p/"+s[ro][2]+"/media/?size=l",_,B,W,X,L,a,H,Y,Q,q,F)}):"flickr"===s[ro][0]?o.fadeOut(200,function(){$(this).remove(),$(document).trigger("mjsMediaOffStage"),w(s[ro][1],s[ro][2],ro,"big",_,B,W,X,L,a,H,Y,Q,q,F,"")}):"image"===s[ro][0]?o.fadeOut(200,function(){$(this).remove(),$(document).trigger("mjsMediaOffStage"),d(s[ro][2],_,B,W,X,L,a,H,Y,Q,q,F)}):"video"===s[ro][0]||"youtube"===s[ro][0]||"vimeo"===s[ro][0]||"dailymotion"===s[ro][0]?o.fadeOut(200,function(){$(this).remove(),$(document).trigger("mjsMediaOffStage"),h(s[ro][0],s[ro][1],E,I,R,L,a,H,Y,Q,q,s[ro][1])}):"maps"===s[ro][0]&&o.fadeOut(200,function(){$(this).remove(),$(document).trigger("mjsMediaOffStage"),u(H,Y,Q,q,s[ro][2],s[ro][3],s[ro][4],s[ro][5],s[ro][6],s[ro][7])}),e.attr("id","mjs"+ro)})}t.on("touchstart",function(e){if(mjsGlobal.timeSpacer)e.stopPropagation(),e.preventDefault();else{e.stopPropagation(),e.preventDefault();var o=$(e.target);if("undefined"!=typeof o[0].src&&o[0].src.indexOf("maps.gstatic.com")>-1)return;$(document).off("touchmove",C),mjsGlobal.hasSwipe=!1,mjsGlobal.hasSwipeLeft=!1,mjsGlobal.hasSwipeRight=!1,mjsGlobal.startX=e.originalEvent.touches[0].clientX,mjsGlobal.startY=e.originalEvent.touches[0].clientY,$(document).on("touchmove",P),$(this).on("touchend",function a(e){$(document).off("touchmove",P),mjsGlobal.hasSwipe?mjsGlobal.hasSwipeLeft?$(".mjs-previous").trigger("click"):mjsGlobal.hasSwipeRight&&$(".mjs-next").trigger("click"):e.target.click(),$(this).off("touchend",a)})}}),t.on("click",function(e){if(mjsGlobal.timeSpacer)e.stopPropagation(),e.preventDefault();else{var a=$(e.target);"undefined"!=typeof a[0].src&&a[0].src.indexOf("maps.gstatic.com")>-1||(!a.parents(".mjs-fs-wrapper").length||a.hasClass("mjs-close"))&&$(this).fadeOut(300,function(){$(this).remove(),$(".mjs-parent-spin").removeClass("mjs-do-spin").hide(),l(mjsGlobal),$(document).trigger("mjsMediaOffStage")}),$(document).off("touchstart",k),_&&o.css("overflow",mjsGlobal.orgOverflow)}})}}),T(no,x,io),V&&($(document).on("touchstart","#"+no+" > .mjs-facebook",function(e){e.stopPropagation(),e.preventDefault(),e.target.click()}),$(document).on("click","#"+no+" > .mjs-facebook",function(){var e=window.location.origin+window.location.pathname;e=e+"?magnetid="+$(".mjs-fs-wrapper").attr("id");var o=mjsGlobal.locationProtocol+"//www.facebook.com/dialog/share?app_id="+J+"&display=popup&href="+encodeURIComponent(e)+"&redirect_uri="+e;window.open(o,"_blank")}),$(document).on("touchstart","#"+no+" > .mjs-twitter",function(e){e.stopPropagation(),e.preventDefault(),e.target.click()}),$(document).on("click","#"+no+" .mjs-twitter",function(){var e=window.location.origin+window.location.pathname;e=e+"?magnetid="+$(".mjs-fs-wrapper").attr("id");var o=mjsGlobal.locationProtocol+"//twitter.com/share?url="+encodeURIComponent(e);window.open(o,"_blank")}))}if(x){var fo=setInterval(function(e){oo.thumbLoadCount>=oo.nbOfData-oo.loadErrors&&(e.show(0,function(){if(oo.ecommerce){var o=e.find("#mjs-ecommerce-col").height();o>e.find(".mjs-ecommerce-main").height()&&(e.height(o),e.find(".mjs-ecommerce-main").addClass("mjs-ecommerce-main-adjust"))}}),clearInterval(fo))},150,io);io.find(".mjs-generic").css({border:A+"px solid #"+z,"-webkit-border-radius":D+"px","-moz-border-radius":D+"px","border-radius":D+"px",padding:O+"px"}),io.find(".mjs-generic").find("img").css({"max-height":G+"px",background:"#"+H,border:"none"})}x?(io.find(".mjs-generic").on("focusout",function(){$(document).off("keydown",M),io.find(".mjs-generic").removeClass("mjs-focus")}),io.find(".mjs-generic").on("focusin",function(){var e=$(this);$(document).on("keydown",{param1:e},M)})):(io.on("focusout",function(){$(document).off("keydown",M),io.removeClass("mjs-focus")}),io.on("focusin",function(){var e=$(this);$(document).on("keydown",{param1:e},M)})),$(window).keyup(function(e){var o=e.keyCode?e.keyCode:e.which;9===o&&($(e.target).find(".mjs-generic").length?$(e.target).find(".mjs-generic").addClass("mjs-focus"):$(e.target).length&&$(e.target).addClass("mjs-focus"))})}if(oo.ecommerce&&$(window).on("resize",function(){var e=io.find("#mjs-ecommerce-col").height();e>io.find(".mjs-ecommerce-main").height()?(io.height(e),io.find(".mjs-ecommerce-main").addClass("mjs-ecommerce-main-adjust")):io.find(".mjs-ecommerce-main").removeClass("mjs-ecommerce-main-adjust")}),!mjsGlobal.isResizeReady){var uo=this;$(window).on("resize",function(){uo.doResize()}),mjsGlobal.isResizeReady=!0}},e.prototype.openMedia=function(e){var o=$("#"+e);return o.hasClass("mjs-generic")?o.find("img").trigger("click"):o.trigger("click"),this},e.prototype.closeMedia=function(){return $(".mjs-close").trigger("click"),this},e.prototype.previousMedia=function(){return mjsGlobal.itemOnStage&&$(".mjs-previous").trigger("click"),this},e.prototype.nextMedia=function(){return mjsGlobal.itemOnStage&&$(".mjs-next").trigger("click"),this},e.prototype.getOpenedMediaInfo=function(){return mjsGlobal.itemOnStage?mjsGlobal.itemName:null},e.prototype.getElements=function(e){return"string"==typeof e?e:null},e.prototype.setDefaults=function(e){var o=this._setDefaults;for(var a in o)"undefined"!=typeof e[a]&&typeof o[a]==typeof e[a]&&(this._setDefaults[a]=e[a]);return this},e.prototype.doResize=function(){return mjsGlobal.inResizing||(mjsGlobal.inResizing=!0,setTimeout(function(){var e=$(".mjs-fs-wrapper"),o=$(".mjs-fullscreen"),a=e.width(),t=e.height(),i=$(window).width(),r=m(),n="",l=[],c=e.attr("id"),d=mjsGlobal.borderWidth[c],p=mjsGlobal.borderRadius[c];if(mjsGlobal.itemOnStage&&"image"===mjsGlobal.itemType?(n="picture",l=s(a,t,i,r,d,p,n)):mjsGlobal.itemOnStage&&"video"===mjsGlobal.itemType?(n="video",l=s(a,t,i,r,d,p,n)):mjsGlobal.itemOnStage&&"maps"===mjsGlobal.itemType&&(n="maps",l=s(a,t,i,r,d,p,n)),a=l[0],t=l[1],o.css({width:i+"px",height:r+"px"}),"maps"===n)e.css({width:a+"px",height:t+"px"}),google.maps.event.trigger(mjsGlobal.mapInstance,"resize");else if(e.css({width:a+"px",height:t+"px"}),"video"===n){$(".mjs-video-player").css({width:a+"px",height:t+"px"});var f=0,u=0,h=e.prop("id");f=a>mjsGlobal.videoWidth[h]?mjsGlobal.videoWidth[h]:a,u=t>mjsGlobal.videoHeight[h]?mjsGlobal.videoHeight[h]:t,$(".mjs-video-player").find("iframe").css({width:f+"px",height:u+"px"})}if(o.find("#mjs-zoom-box").length){o.trigger("click");var g=e.prop("id").replace("mjs","");setTimeout(function(){$("#"+g).trigger("click")},1e3)}mjsGlobal.inResizing=!1},100)),this},e}();