/*! tauCharts - v0.2.3 - 2014-12-09
* https://github.com/TargetProcess/tauCharts
* Copyright (c) 2014 Taucraft Limited; Licensed Creative Commons */
!function(a){if("function"==typeof define&&define.amd)define(["tauCharts"],function(b){return a(b)});else if("object"==typeof module&&module.exports){{require("tauCharts")}module.exports=a()}else a(this.tauCharts)}(function(a){var b=function(a){if(a.color&&a.size)return a;var c,d,e,f=a.unit||[];for(c=0;c<f.length;c+=1)if(d=f[c],e=b(d))return e},c=a.api._,d=function(){return{init:function(a){this.isNeedLegend(a)&&(this._container=a.insertToRightSidebar(this.containerTemplate))},isNeedLegend:function(a){var c=a.getConfig();return Boolean(b(c.spec.unit))},onUnitReady:function(a,b){-1!==b.type.indexOf("ELEMENT")&&(this._unit=b)},_getColorMap:function(a){var b=this._unit.options.color,d=b.dimension,e=a.getData(),f=c.map(e,function(a){return a[d]});return c.unique(f).reduce(function(a,c){return a[c]=b.get(c),a},{})},containerTemplate:'<div class="graphical-report__legend"></div>',template:c.template('<div class="graphical-report__legend__title"><%=name%></div><%=items%>'),itemTemplate:c.template(['<div class="graphical-report__legend__item">','<div class="graphical-report__legend__example <%=color%>" ></div><%=value%>',"</div>"].join("")),onRender:function(a){if(this._container){var b=c.map(this._getColorMap(a),function(a,b){return this.itemTemplate({color:a,value:b})},this).join("");this._container.innerHTML=this.template({items:b,name:this._unit.options.color.dimension})}},render:function(){}}};a.api.plugins.add("legend",d)});