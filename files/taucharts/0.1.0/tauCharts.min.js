/*! tauCharts - v0.1.0 - 2014-10-25
* https://github.com/TargetProcess/tauCharts
* Copyright (c) 2014 Taucraft Limited; Licensed Creative Commons */
!function(a){"function"==typeof define&&define.amd?define(a):"object"==typeof module&&module.exports?module.exports=a():this.tauChart=a()}(function(){function a(a){return a?a:null}function b(b,c){var d=_.omit(c,"spec"),e=c.guide&&c.guide.color||{};return d.spec={dimensions:c.dimensions,unit:{type:"COORDS.RECT",x:a(c.x),y:a(c.y),guide:c.guide||{padding:{l:54,b:24,r:24,t:24},showGridLines:"xy",x:{label:c.x},y:{label:c.y}},unit:[{type:b,x:c.x,y:c.y,color:c.color,size:c.size,guide:{color:e}}]}},d}var c="graphical-report__",d=["Boolean","Number","String","Function","Array","Date","RegExp","Object","Error"].reduce(function(a,b){return a["[object "+b+"]"]=b.toLowerCase(),a},{}),e={}.toString,f={clone:function(a){return JSON.parse(JSON.stringify(a))},type:function(a){return null==a?a+"":"object"==typeof a||"function"==typeof a?d[e.call(a)]||"object":typeof a},isArray:function(a){return Array.isArray(a)}},g=function(){var a=function(a,b){var c,d=_.toArray(arguments);c=_.isArray(d[0])?d[0]:_.times(a,function(){return _.times(b,function(){return null})}),this.cube=c};return a.prototype={iterate:function(a){var b=this.cube;return _.each(b,function(b,c){_.each(b,function(b,d){a(c,d,b)})}),this},getRC:function(a,b){return this.cube[a][b]},setRC:function(a,b,c){return this.cube[a][b]=c,this},sizeR:function(){return this.cube.length},sizeC:function(){var a=this.cube[0]||[];return a.length}},a}(),h=function(){var a={CROSS:function(a,b,c){var d=a.domain(b),e=a.domain(c).reverse();return _(e).map(function(a){return _(d).map(function(d){var e={};return b&&(e[b]=d),c&&(e[c]=a),e})})}},b=function(b){return a[b]||function(){return[[{}]]}},c=function(a,b,c){var d=_.defaults(f.clone(a),_.pick.apply(_,[b].concat(c)));return d.guide=_.extend(f.clone(b.guide||{}),d.guide||{}),d},d={"COORDS.RECT":function(a,d){var e=_.defaults(a,{$where:{}}),f=_.any(e.unit,function(a){return 0===a.type.indexOf("COORDS.")}),h=b(f?"CROSS":""),i=new g(h(e,e.x,e.y)),j=new g(i.sizeR(),i.sizeC());return i.iterate(function(a,b,d){var f=_.extend({},e.$where,d),g=_(e.unit).map(function(a){return _.extend(c(a,e,["x","y"]),{$where:f})});j.setRC(a,b,g)}),e.$matrix=j,j.iterate(function(a,b,c){_.each(c,function(a){return d(a)})}),e},"COORDS.PARALLEL":function(a,b){var d=_.defaults(a,{$where:{}}),e=new g(1,1),f=new g(1,1);return e.iterate(function(a,b){var e=_.extend({},d.$where),g=_(d.unit).map(function(a){return _.extend(c(a,d,["x"]),{$where:e})});f.setRC(a,b,g)}),d.$matrix=f,f.iterate(function(a,c,d){_.each(d,function(a){return b(a)})}),d}};return function(a){return d[a]||function(a){return a}}}(),i=function(a,b){return"translate("+a+","+b+")"},j=function(a){return"rotate("+a+")"},k=function(a){return _.contains(["bottom","top"],a.toLowerCase())?"h":"v"},l=function(a,b,c,d){var e=this;if(a.scaleDim){var f=d3.svg.axis().scale(a.scaleObj).orient(a.guide.scaleOrient);f.ticks(_.max([Math.round(d/a.guide.density),4]));var g=e.append("g").attr("class",a.guide.cssClass).attr("transform",i.apply(null,b)).call(f);g.selectAll(".tick text").attr("transform",j(a.guide.rotate)).style("text-anchor",a.guide.textAnchor),"h"===k(a.guide.scaleOrient)?("ordinal"===a.scaleType&&g.selectAll(".tick line").attr("x1",c/2).attr("x2",c/2),g.append("text").attr("transform",j(a.guide.label.rotate)).attr("class","label").attr("x",.5*a.guide.size).attr("y",a.guide.label.padding).style("text-anchor",a.guide.label.textAnchor).text(a.guide.label.text)):("ordinal"===a.scaleType&&g.selectAll(".tick line").attr("y1",-c/2).attr("y2",-c/2),g.append("text").attr("transform",j(a.guide.label.rotate)).attr("class","label").attr("x",.5*-a.guide.size).attr("y",-a.guide.label.padding).style("text-anchor",a.guide.label.textAnchor).text(a.guide.label.text))}},m=function(a,b,c){var d=this,e=d.append("g").attr("class","grid").attr("transform",i(0,0)),f=(a.guide.showGridLines||"").toLowerCase();if(f.length>0){var g=e.append("g").attr("class","grid-lines");if(f.indexOf("x")>-1&&a.x.scaleDim){var h=a.x,j=d3.svg.axis().scale(h.scaleObj).orient(h.guide.scaleOrient).tickSize(b);j.ticks(_.max([Math.round(c/h.guide.density),4]));var k=g.append("g").attr("class","grid-lines-x");if(k.call(j),"ordinal"===h.scaleType){var l=c/a.domain(h.scaleDim).length;g.selectAll(".tick line").attr("x1",l/2).attr("x2",l/2)}}if(f.indexOf("y")>-1&&a.y.scaleDim){var m=a.y,n=d3.svg.axis().scale(m.scaleObj).orient(m.guide.scaleOrient).tickSize(-c);n.ticks(_.max([Math.round(b/m.guide.density),4]));var o=g.append("g").attr("class","grid-lines-y");if(o.call(n),"ordinal"===m.scaleType){var p=b/a.domain(m.scaleDim).length;o.selectAll(".tick line").attr("y1",-p/2).attr("y2",-p/2)}}g.selectAll("text").remove()}return e},n=function(a){var b,c,d=_.times(10,function(a){return"color10-"+(1+a)}),e=(a.guide||{}).color||{},g=a.color,h=g.scaleDim,i=e.brewer||d;return f.isArray(i)?(c=a.domain(h),b=i):(c=Object.keys(i),b=c.map(function(a){return i[a]})),{get:function(a){return d3.scale.ordinal().range(b).domain(c)(a)},dimension:h}},o={translate:i,rotate:j,getOrientation:k,fnDrawDimAxis:l,fnDrawGrid:m,generateColor:n},p=function(a,b){var d=a.options,e=a.guide.padding;a.x.guide=a.guide.x,a.y.guide=a.guide.y;var f=d.left+e.l,g=d.top+e.t,h=d.width-(e.l+e.r),i=d.height-(e.t+e.b),j={map:a.x.guide.tickLabel,min:a.x.guide.tickMin,max:a.x.guide.tickMax};a.x.scaleObj=a.x.scaleDim&&a.scaleTo(a.x.scaleDim,[0,h],j);var k={map:a.y.guide.tickLabel,min:a.y.guide.tickMin,max:a.y.guide.tickMax};a.y.scaleObj=a.y.scaleDim&&a.scaleTo(a.y.scaleDim,[i,0],k),a.x.guide.size=h,a.y.guide.size=i;var l=[0,i+a.guide.x.padding],m=[0-a.guide.y.padding,0],n=d.container.append("g").attr("class",c+"cell cell").attr("transform",o.translate(f,g));if(!a.x.guide.hide){var p=a.domain(a.x.scaleDim).length;o.fnDrawDimAxis.call(n,a.x,l,h/p,h)}if(!a.y.guide.hide){var q=a.domain(a.y.scaleDim).length;o.fnDrawDimAxis.call(n,a.y,m,i/q,i)}var r=o.fnDrawGrid.call(n,a,i,h);a.$matrix.iterate(function(a,c,d){d.forEach(function(a){a.options=_.extend({container:r},a.options),b(a)})})},q=function(a){var b=a.options,d=b.xScale,e=b.yScale,f=o.generateColor(a),g=d3.nest().key(function(a){return a[f.dimension]}).entries(a.partition()),h=function(){this.attr("class",function(a){return c+"line line "+f.get(a.key)});var a=this.selectAll("path").data(function(a){return[a.values]});a.call(j),a.enter().append("path").call(j),a.exit().remove()},i=d3.svg.line().x(function(b){return d(b[a.x.scaleDim])}).y(function(b){return e(b[a.y.scaleDim])}),j=function(){this.attr("d",i)},k=b.container.selectAll(".line").data(g);k.call(h),k.enter().append("g").call(h),k.exit().remove()},r=function(a){var b=a.options,d=b.xScale,e=b.yScale,f=o.generateColor(a),g=_.max([b.width,b.height]),h=a.domain(a.size.scaleDim),i=d3.scale.linear().range([g/200,g/100]).domain([Math.min.apply(null,h),Math.max.apply(null,h)]),j=function(){return this.attr("r",function(b){var c=i(b[a.size.scaleDim]);return _.isFinite(c)?c:g/100}).attr("class",function(a){return c+"dot dot i-role-datum "+f.get(a[f.dimension])}).attr("cx",function(b){return d(b[a.x.scaleDim])}).attr("cy",function(b){return e(b[a.y.scaleDim])})},k=b.container.selectAll(".dot").data(a.partition());k.call(j),k.exit().remove(),k.enter().append("circle").call(j)},s=function(a){var b=a.options,d=b.width/a.domain(a.x.scaleDim).length-8,e=b.xScale,f=b.yScale,g=function(){return this.attr("class","i-role-datum bar "+c+"bar").attr("x",function(b){return e(b[a.x.scaleDim])-d/2}).attr("y",function(b){return f(b[a.y.scaleDim])}).attr("width",d).attr("height",function(c){return b.height-f(c[a.y.scaleDim])})},h=b.container.selectAll(".bar").data(a.partition());h.call(g),h.enter().append("rect").call(g),h.exit().remove()},t=function(a,b){b.forEach(function(b){a[b]=a.dimension(a[b],a)});var c=a.options,d=c.width,e=c.height;a.x.guide=a.guide.x,a.y.guide=a.guide.y;var f={map:a.x.guide.tickLabel,min:a.x.guide.tickMin,max:a.x.guide.tickMax};a.options.xScale=a.x.scaleDim&&a.scaleTo(a.x.scaleDim,[0,d],f);var g={map:a.y.guide.tickLabel,min:a.y.guide.tickMin,max:a.y.guide.tickMax};return a.options.yScale=a.y.scaleDim&&a.scaleTo(a.y.scaleDim,[e,0],g),a},u={"COORDS.RECT":function(a,b){a.x=a.dimension(a.x,a),a.y=a.dimension(a.y,a),p(a,b)},"ELEMENT.POINT":function(a){r(t(a,["x","y","color","size"]))},"ELEMENT.LINE":function(a){q(t(a,["x","y","color"]))},"ELEMENT.INTERVAL":function(a){s(t(a,["x","y"]))},"WRAP.AXIS":function(a,b){a.x=a.dimension(a.x,a),a.y=a.dimension(a.y,a);var c=a.options,d=a.guide.padding;a.x.guide=a.guide.x,a.y.guide=a.guide.y;var e=c.left+d.l,f=c.top+d.t,g=c.width-(d.l+d.r),h=c.height-(d.t+d.b);a.x.guide.size=g,a.y.guide.size=h;var i={map:a.x.guide.tickLabel,min:a.x.guide.tickMin,max:a.x.guide.tickMax};a.x.scaleObj=a.x.scaleDim&&a.scaleTo(a.x.scaleDim,[0,g],i);var j={map:a.y.guide.tickLabel,min:a.y.guide.tickMin,max:a.y.guide.tickMax};a.y.scaleObj=a.y.scaleDim&&a.scaleTo(a.y.scaleDim,[h,0],j);var k=[0,h+a.guide.x.padding],l=[0-a.guide.y.padding,0],m=c.container.append("g").attr("class","axis-container").attr("transform",o.translate(e,f));if(c.showX&&!a.x.guide.hide){var n=a.domain(a.x.scaleDim).length;o.fnDrawDimAxis.call(m,a.x,k,g/n,g)}if(c.showY&&!a.y.guide.hide){var p=a.domain(a.y.scaleDim).length;o.fnDrawDimAxis.call(m,a.y,l,h/p,h)}{var q=m.append("g").attr("class","sub-axis-container").attr("transform",o.translate(0,0)),r=a.$axes.sizeR();a.$axes.sizeC()}a.$axes.iterate(function(a,c,d){(0===c||a===r-1)&&d.forEach(function(a){a.options=_.extend({container:q},a.options||{}),a.$axes&&b(a)})})},"WRAP.MULTI_AXES":function(a,b){var c=a.options,d=a.guide.padding,e=c.left+d.l,f=c.top+d.t,g=(c.width-(d.l+d.r),c.height-(d.t+d.b),c.container.append("g").attr("class","cell-wrapper").attr("transform",o.translate(e,f)));a.$axes.iterate(function(a,c,d){d.forEach(function(a){a.options=_.extend({container:g},a.options),b(a)})}),a.$matrix.iterate(function(a,c,d){d.forEach(function(a){a.options=_.extend({container:g},a.options),b(a)})})},"WRAP.MULTI_GRID":function(a,b){var c=a.options,d=a.guide.padding,e=c.left+d.l,f=c.top+d.t,g=c.container.append("g").attr("class","grid-wrapper").attr("transform",o.translate(e,f));a.$matrix.iterate(function(a,c,d){d.forEach(function(a){a.options=_.extend({container:g},a.options),b(a)})})},"COORDS.PARALLEL":function(a,b){var c=a.options,d=a.guide.padding,e=c.left+d.l,f=c.top+d.t,g=c.width-(d.l+d.r),h=c.height-(d.t+d.b),i=a.x.map(function(b){return a.scaleTo(b,[h,0],{})}),j=c.container.append("g").attr("class","graphical-report__cell cell").attr("transform",o.translate(e,f)),k=function(a,b){return"translate("+a+","+b+")"},l=function(a){return"rotate("+a+")"},m=function(a,b){var c=this,d=d3.svg.axis().scale(a).orient("left"),e=c.append("g").attr("class","y axis").attr("transform",k.apply(null,b)).call(d);e.selectAll(".tick text").attr("transform",l(0)).style("text-anchor","end")},n=g/(a.x.length-1);i.forEach(function(a,b){m.call(j,a,[b*n,0])});var p=j.append("g").attr("class","grid").attr("transform",k(0,0));a.$matrix.iterate(function(a,c,d){d.forEach(function(a){a.options=_.extend({container:p},a.options),b(a)})})},"PARALLEL/ELEMENT.LINE":function(a){a.color=a.dimension(a.color,a);var b=a.options,c=a.x.reduce(function(c,d){return c[d]=a.scaleTo(d,[b.height,0],{}),c},{}),d=o.generateColor(a),e=d3.nest().key(function(a){return a[d.dimension]}).entries(a.partition()).map(function(b){var c=b.values[0],d=[];return a.x.forEach(function(a){d.push({key:a,val:c[a]})}),d}),f=function(){this.attr("class",function(){return"graphical-report__line line color10-9"});var a=this.selectAll("path").data(function(a){return[a]});a.call(j),a.enter().append("path").call(j),a.exit().remove()},g=b.width/(a.x.length-1),h={};a.x.forEach(function(a,b){h[a]=b*g});var i=d3.svg.line().x(function(a){return h[a.key]}).y(function(a){return c[a.key](a.val)}),j=function(){this.attr("d",i)},k=b.container.selectAll(".line").data(e);k.call(f),k.enter().append("g").call(f),k.exit().remove()}},v=function(){return function(a){if(!u.hasOwnProperty(a))throw new Error("Unknown unit type: "+a);return u[a]}}(),w={ordinal:function(a,b){return d3.scale.ordinal().domain(a).rangePoints(b,1)},linear:function(a,b,c){var d=d3.extent(a),e=_.isNumber(c.min)?c.min:d[0],f=_.isNumber(c.max)?c.max:d[1],g=[Math.min(e,d[0]),Math.max(f,d[1])];return d3.scale.linear().domain(g).nice().rangeRound(b,1)}},x=function(){"use strict";function a(a,b){var c=function(a){return function(b){return b[a]}},d=function(b){var d=a[b]||{};return d.value?c(d.value):function(a){return a}},e=function(b){var c=a[b]||{};return c.order||null},f=function(a){var b={category:function(a,b,c){return c},order:function(a,b,c){var d=e(a);return d?_.union(d,c):_.sortBy(c,b)},measure:function(a,b,c){return _.sortBy(c,b)},"as-is":function(a,b,c){return c}};return b[a]||b["as-is"]},g=function(a){var b={category:f("category"),order:function(a,b,c){var d=e(a);return d?_.union(c,d):c},measure:f("measure"),"as-is":f("as-is")};return b[a]||b["as-is"]};this.fnDimension=function(b,c){var d=(c||{}).dimensions||{},e=a[b]||{},f=d[b]||{};return{scaleDim:b,scaleType:f.scale||e.scale}},this.fnSource=function(a){var c=_.map(a,function(a,b){return function(c){return d(b)(c[b])===a}});return _(b).filter(function(a){return _.every(c,function(b){return b(a)})})};var h=function(c,e){if(!a[c])return[null];var f=d(c),g=_(b).chain().pluck(c).uniq(f).value();return e(c,f,g)};this.fnDomain=function(b){var c=d(b),e=(a[b]||{}).type,g=h(b,f(e));return g.map(c)},this.fnScaleTo=function(b,e,f){var i=f||{},j=_.defaults({},a[b]),k=i.map?c(i.map):d(b),l=(a[b]||{}).type,m=h(b,g(l)).map(k),n=w[j.scale](m,e,i),o=function(a){return n(k(a))};for(var p in n)n.hasOwnProperty(p)&&(o[p]=n[p]);return o}}var b=(function(a,b){return a.__proto__={a:b},a.a===b}({},{}),Object.defineProperty),c=Object.getOwnPropertyDescriptor,d=function(a,d){for(var e in d)d.hasOwnProperty(e)&&b(a,e,c(d,e));return a},e={};return b(a,"prototype",{configurable:!1,enumerable:!1,writable:!1}),e.mix=function(a){return a.dimension=this.fnDimension,a.source=this.fnSource,a.domain=this.fnDomain,a.scaleTo=this.fnScaleTo,a.partition=function(){return a.source(a.$where)},a},d(a.prototype,e),e=void 0,a}(),y=function(){"use strict";function a(a,b){this.spec=f.clone(a),this.domain=new x(this.spec.dimensions,b)}var b=(function(a,b){return a.__proto__={a:b},a.a===b}({},{}),Object.defineProperty),c=Object.getOwnPropertyDescriptor,d=function(a,d){for(var e in d)d.hasOwnProperty(e)&&b(a,e,c(d,e));return a},e={};return b(a,"prototype",{configurable:!1,enumerable:!1,writable:!1}),e.buildGraph=function(){var a=this,b=function(c){return h(c.type)(a.domain.mix(c),b)};return b(this.spec.unit)},e.calcLayout=function(a,b,c){return a.options={top:0,left:0,width:c.width,height:c.height},b(a,this.domain)},e.renderGraph=function(a,b){var c=this;a.options.container=b;var d=function(a){return v(a.type)(c.domain.mix(a),d)};return d(a),a.options.container},d(a.prototype,e),e=void 0,a}(),z=this,A=function(a){return a.options=a.options||{},a.guide=a.guide||{},a.guide.padding=_.defaults(a.guide.padding||{},{l:0,b:0,r:0,t:0}),a.guide.x=_.defaults(a.guide.x||{},{label:"",padding:0,density:30,cssClass:"x axis",scaleOrient:"bottom",rotate:0,textAnchor:"middle"}),a.guide.x.label=_.isObject(a.guide.x.label)?a.guide.x.label:{text:a.guide.x.label},a.guide.x.label=_.defaults(a.guide.x.label,{padding:32,rotate:0,textAnchor:"middle"}),a.guide.y=_.defaults(a.guide.y||{},{label:"",padding:0,density:30,cssClass:"y axis",scaleOrient:"left",rotate:0,textAnchor:"end"}),a.guide.y.label=_.isObject(a.guide.y.label)?a.guide.y.label:{text:a.guide.y.label},a.guide.y.label=_.defaults(a.guide.y.label,{padding:32,rotate:-90,textAnchor:"middle"}),a},B=function(a){var b=function(a){var c=A(a);if(!c.$matrix)return c;var d,e=c.options,f=c.guide.padding,g=e.width-(f.l+f.r),h=e.height-(f.t+f.b),i=c.$matrix.sizeR(),j=c.$matrix.sizeC(),k=g/j,l=h/i;return d=c.guide.split?{calcHeight:function(a,b,c,d){return a/d},calcTop:function(a,b,c,d){return(b+1)*(a/d)*c}}:{calcHeight:function(a){return a},calcTop:function(a,b){return b*l}},c.$matrix.iterate(function(a,c,e){var f=e.length;_.each(e,function(e,g){e.options={width:k,left:c*k,height:d.calcHeight(l,a,g,f),top:d.calcTop(l,a,g,f)},b(e)})}),c};return b(a)},C={DEFAULT:B,"EXTRACT-AXES":function(a,b){var c=function(a){var c=function(a,b){var d=A(a);_.each([d.guide.x||{},d.guide.y||{}],function(a){return a.hide=!0});var e=d.$matrix.sizeR(),h=d.$matrix.sizeC();return b.$axes=new g(e,h),d.$matrix.iterate(function(a,d,g){var h=[];b.$axes.setRC(a,d,h);var i=0===d,j=a===e-1;g.forEach(function(a){var b=A(a);if(b.$matrix){var d=_.extend(f.clone(_.omit(b,"$matrix")),{type:"WRAP.AXIS"});h.push(d),b.guide.padding.l=0,b.guide.padding.b=0,d.guide.padding.l=i?d.guide.padding.l:0,d.guide.padding.b=j?d.guide.padding.b:0,c(b,d)}})}),d},d=A({type:"WRAP.MULTI_AXES",options:f.clone(a.options),x:{},y:{},$matrix:new g([[[a]]])});return c(b.mix(d),d),d.$matrix=new g([[[A({type:"WRAP.MULTI_GRID",x:{},y:{},$matrix:new g([[[a]]])})]]]),d},d=function(a){var c=function(a){var b=a.options,d=a.guide.padding,e=b.width-(d.l+d.r),f=b.height-(d.t+d.b),g=a.$axes.sizeR(),h=a.$axes.sizeC(),i=A(a.$axes.getRC(g-1,0)[0]||{}),j=i.guide.padding.l,k=i.guide.padding.b,l=e-j,m=f-k,n=l/h,o=m/g;return a.$axes.iterate(function(a,b,d){var e=0===b,f=a===g-1;(e||f)&&d.forEach(function(d){d.options={showX:f,showY:e,width:n+(e?j:0),height:o+(f?k:0),top:a*o,left:b*n+(e?0:j)},d.$axes&&c(d)})}),a};c(a);var d=0,e=0,f=function(a){var b=a.guide.padding,c=a.$axes.sizeR();return a.$axes.iterate(function(a,g,h){0===g&&a===c-1&&(d+=b.l,e+=b.b,h.forEach(function(a){return f(a)}))}),a};f(a);var g=a.options.width-d,h=a.options.height-e,i=a.$matrix.getRC(0,0)[0];return i.options={top:0,left:d,width:g,height:h},B(i,b),a};return d(c(a))}},D={get:function(a){return(C[a]||C.DEFAULT).bind(z)}},E=(function(a,b){return a.__proto__={a:b},a.a===b}({},{}),Object.defineProperty),F=Object.getOwnPropertyDescriptor,G=function(a,b){for(var c in b)b.hasOwnProperty(c)&&E(a,c,F(b,c));return a},H=function(){"use strict";function a(a){this._plugins=a}var b={};return E(a,"prototype",{configurable:!1,enumerable:!1,writable:!1}),b._call=function(a,b){for(var c=0;c<this._plugins.length;c++)"function"==typeof this._plugins[c][a]&&this._plugins[c][a].apply(this._plugins[c],b)},b.render=function(){this._call("render",arguments)},b.click=function(){this._call("click",arguments)},b.mouseover=function(){this._call("mouseover",arguments)},b.mouseout=function(){this._call("mouseout",arguments)},b.mousemove=function(){this._call("mousemove",arguments)},G(a.prototype,b),b=void 0,a}(),I=function(a){return function(){this.on("click",function(b){a.click(new K(b),new J(d3.select(this)))}).on("mouseover",function(b){a.mouseover(new K(b),new J(d3.select(this)))}).on("mouseout",function(b){a.mouseout(new K(b),new J(d3.select(this)))}).on("mousemove",function(b){a.mousemove(new K(b),new J(d3.select(this)))})}},J=function(){"use strict";function a(a){this.element=a}return E(a,"prototype",{configurable:!1,enumerable:!1,writable:!1}),a}(),K=(function(){"use strict";function a(a){this.data=a}return E(a,"prototype",{configurable:!1,enumerable:!1,writable:!1}),a}(),function(){"use strict";function a(a){this.datum=a}return E(a,"prototype",{configurable:!1,enumerable:!1,writable:!1}),a}()),L=(function(){"use strict";function a(a,b){this.svg=a.svg,this.html=a.html,this.mapper=b}var b={};return E(a,"prototype",{configurable:!1,enumerable:!1,writable:!1}),b.elements=function(){return this.svg.selectAll(".i-role-datum")},G(a.prototype,b),b=void 0,a}(),{getStyle:function(a,b){return window.getComputedStyle(a,void 0).getPropertyValue(b)},getContainerSize:function(a){var b=2*parseInt(this.getStyle(a,"padding")||0,10),c=a.getBoundingClientRect();return{width:c.width-b,height:c.height-b}}}),M=function(){"use strict";function a(a){var b=this.convertConfig(a);this.config=_.defaults(b,{spec:null,data:[],plugins:[]}),b.spec.dimensions=this._normalizeDimensions(b.spec.dimensions,b.data),this.plugins=this.config.plugins,this.spec=this.config.spec,this.data=this.config.data,this._plugins=new H(this.config.plugins)}var b=(function(a,b){return a.__proto__={a:b},a.a===b}({},{}),Object.defineProperty),d=Object.getOwnPropertyDescriptor,e=function(a,c){for(var e in c)c.hasOwnProperty(e)&&b(a,e,d(c,e));return a},f={};return b(a,"prototype",{configurable:!1,enumerable:!1,writable:!1}),f.renderTo=function(a,b){var d=d3.select(a),e=d[0][0];if(null===e)throw new Error("Target element not found");var f=_.defaults(b||{},L.getContainerSize(e));if(0!==this.data.length){e.innerHTML="";var g=d.append("svg").attr("class","tau-chart "+c+"svg").attr("width",f.width).attr("height",f.height),h=new y(this.spec,this.data),i=h.buildGraph(),j=D.get(this.config.layoutEngine||"EXTRACT-AXES"),k=h.calcLayout(i,j,f),l=h.renderGraph(k,g);l.selectAll(".i-role-datum").call(I(this._plugins)),this._plugins.render(l)}},f._autoDetectDimensions=function(a){var b=function(a){var b;return b=_.isObject(a)?"order":_.isNumber(a)?"measure":"category"};return _.reduce(a,function(a,c){return _.each(c,function(c,d){var e=b(c);a[d]=a[d]||{type:e},a[d].type=a[d].type===e?e:"category"}),a},{})},f._autoAssignScales=function(a){var b={category:"ordinal",order:"ordinal",measure:"linear"};return _.each(a,function(a){var c=a.type.toLowerCase();a.scale=a.scale||b[c]}),a},f._normalizeDimensions=function(a,b){var c=a?a:this._autoDetectDimensions(b);return this._autoAssignScales(c)},f.convertConfig=function(a){return a},e(a.prototype,f),f=void 0,a}(),N={scatterplot:function(a){return b("ELEMENT.POINT",a)},line:function(a){return b("ELEMENT.LINE",a)},bar:function(a){return b("ELEMENT.INTERVAL",a)}},O=function(a){"use strict";function b(){a.apply(this,arguments)}var c=function(a,b){return a.__proto__={a:b},a.a===b}({},{}),d=Object.defineProperty,e=Object.getOwnPropertyDescriptor,f=function(a,b){for(var c in b)b.hasOwnProperty(c)&&d(a,c,e(b,c));return a},g=Object.setPrototypeOf||function(a,b){return c?a.__proto__=b:d(a,"__proto__",{value:b,configurable:!0,enumerable:!1,writable:!0}),a},h=Object.create;c||f(b,a),null!==a&&g(b,a),b.prototype=h(null!==a?a.prototype:null,{constructor:{value:b,configurable:!0,writable:!0}}),d(b,"prototype",{configurable:!1,enumerable:!1,writable:!1});var i={};return i.convertConfig=function(a){return N[a.type](a)},f(b.prototype,i),i=void 0,b}(M),P={Plot:M,Chart:O,__api__:{UnitDomainMixin:x,DSLReader:y,LayoutEngineFactory:D}};return P});