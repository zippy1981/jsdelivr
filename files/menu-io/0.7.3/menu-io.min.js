var MenuIO,Util;!function(e){"use strict";function t(){function e(e){var t;return e&&(t=n(e),t&&(e=e.parentElement)),e}function t(e){var t;return e&&(t=n(e),t||(e=e.querySelector("[data-menu-path]"))),e}function n(e){var t;return e&&(t=e.hasAttribute("data-menu-path")),t}function i(e){var t=u(e,"js-menu-item");return t}function a(e){var t=u(e,"js-menu");return t}function u(e,t,n){var i,a;return n||(n="data-name"),e&&(a=e.getAttribute(n),a===t&&(i=!0)),i}function r(t){var n,i,a="data-menu",r="js-submenu";return i=e(t),n=u(i,r,a)}this.getItem=e,this.getName=t,this.isName=n,this.isItem=i,this.isMenu=a,this.isSubMenu=r}MenuIO=function(n,i,a){function u(){var e,t=Util.type.object(a);t||(e=a,a={},a[e]=null),h=r(a),y.addEventListener("click",s),y.addEventListener("contextmenu",c)}function r(e){var t,n="",i=function(e,t){var n='data-menu="js-submenu"',a="data-key=",u="";return t?t+=".":t="",Object.keys(e).forEach(function(r){var m,s="",c="",l="",o="",d=t+r,f=e[r],b=Util.type.object(f);b?(c=Util.render(M.MAIN,{items:i(f,d)}),l=" menu-submenu",o=" "+n):x[d]=f,I.icon&&(m=Util.rmStr(r,["(",")"]),m=Util.replaceStr(r," ","-"),m=m.toLowerCase(),l+=" icon icon-"+m),I.keys&&(s=I.keys[r],s&&(o=" "+a+s)),u+=Util.render(M.ITEM,{name:r,subitems:c,className:l,attribute:o,path:d})}),u};return n=i(e),t=document.createElement("ul"),t.setAttribute("data-name","js-menu"),t.className="menu menu-hidden",t.innerHTML=n,v.appendChild(t),t}function m(e,t){var n,i=U.getItem(e),a=U.isName(i),u=U.isItem(i),r=U.isSubMenu(i);return a&&u||(i=document.elementFromPoint(t.x,t.y),r=U.isSubMenu(i),a=U.isName(i),u=U.isItem(i)),n={name:a,item:u,sub:r}}function s(e,t){var n,i,a=I.afterClick,u=I.beforeClick,r=I.name,s=e.target,c=t||m(s,{x:e.clientX,y:e.clientY});i=Util.exec(u,r),c.sub?e.preventDefault():(d(),i||!c.name&&!c.item||(n=f(s),Util.exec(n),Util.exec(a)))}function c(e){var t=e.target,n=e.clientX,i=e.clientY,a=m(t,{x:n,y:i});a.name||a.item||a.sub?s(e,a):(d(),o(n,i)),e.preventDefault()}function l(t,n){var i=Util.type.number(t),a=Util.type.number(n),u=b(),r=e.innerHeight;u+n>r&&(n-=u),i&&(h.style.left=t+"px"),a&&(h.style.top=n-15+"px")}function o(e,t){var n=I.beforeShow,i=I.name,a={x:e,y:t,name:i},u=Util.exec(n,a);u||(h.classList.remove("menu-hidden"),l(a.x,a.y))}function d(){var e=Util.exec(I.beforeClose);e||h.classList.add("menu-hidden")}function f(e){var t,n;return e=U.getName(e),e&&(t=e.getAttribute("data-menu-path")),n=x[t]}function b(){var e,t;return p||(e=getComputedStyle(h),t=e.height,p=parseInt(t,10)),p}if(!(this instanceof MenuIO))return new MenuIO(n,i,a);var h,v,p,y,I={},U=new t,x={},M={MAIN:'<ul data-name="js-menu" class="menu menu-hidden">{{ items }}</ul>',ITEM:'<li data-name="js-menu-item" class="menu-item{{ className }}"{{ attribute }}><label data-menu-path="{{ path }}">{{ name }}</label>{{ subitems }}</li>'};a?(v=y=n,I=i):i?(v=y=n,a=i):(v=document.body,y=e,a=n),this.show=o,this.hide=d,u()}}(window);
!function(r){"use strict";function e(){function r(){function r(r){var e=new RegExp("\\s([a-zA-Z]+)"),n={}.toString.call(r),t=n.match(e)[1],i=t.toLowerCase();return i}return r.array=function(e){var n;return n=Array.isArray?Array.isArray(e):"array"===r(e)},r.arrayBuffer=function(e){return"arraybuffer"===r(e)},r.boolean=function(r){return"boolean"==typeof r},r.function=function(r){return"function"==typeof r},r.number=function(r){return"number"==typeof r},r.object=function(r){var n=e.type(r),t="object"===n;return t},r.string=function(r){return"string"==typeof r},r.undefined=function(r){return"undefined"==typeof r},r.file=function(r){var n,t,i="[object File]";return n=e.exec.ifExist(r,"toString"),t=n===i},r}var e=this;this.exec=function(r){var n,t=e.slice(arguments,1);return e.type.function(r)&&(n=r.apply(null,t)),n},this.type=new r,this.slice=function(r,e){var n;return r&&(n=[].slice.call(r,e)),n},this.render=function(r,n){var t,i=!0,u="\\s*",o=["{{"+u,u+"}}"];return t=e.ownRender(r,n,o,i)},this.ownRender=function(r,n,t,i){var u,o,c,a,f,s=r;a=t[0],f=t[1]||a;for(o in n)u=n[o],u=e.exec(u)||u,c=a+o+f,s=e.replaceStr(s,c,u,i);return c=a+".*"+f,s=e.replaceStr(s,c,"",i)},this.replaceStr=function(r,n,t,i){var u,o=e.type.string(r);return o&&n&&(i||(n=e.escapeRegExp(n)),u=new RegExp(n,"g"),r=r.replace(u,t)),r},this.rmStr=function(r,n,t){var i,u=[],o=e.type.string(r),c=e.type.array(n),a=function(r,e){var n=r.replace(e,"");return n};return i=t?a:e.replaceStr,o&&n&&(c?u=n:u.push(n),u.forEach(function(e){r=i(r,e,"")})),r},this.escapeRegExp=function(r){var n=r,t=e.type.string(r);return t&&(n=r.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&")),n}}var n=r.window?window:global;"object"==typeof module&&module.exports?module.exports=new e:n.Util||(n.Util=new e)}(this);