!function(e,t){"use strict";function n(e,n){var a=t.createElement(e);for(var l in n)a[l]=n[l];return a}function a(e,t,n){e.addEventListener?e.addEventListener(t,n,!1):e.attachEvent(t,n)}function l(){var e,t,n,a,l,r,o,u=[].slice;for(a=arguments[0],n=2<=arguments.length?u.call(arguments,1):[],r=0,o=n.length;o>r;r++){t=n[r];for(e in t)l=t[e],a[e]=l}return a}function r(r,o){function u(e){return e.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")}function s(e){var t=L.map(u),n=new RegExp("\\b("+t.join("|")+")","gi");return e.replace(n,"<b>$1</b>")}function i(e){"P"===e.target.tagName&&w!==+e.target.dataset.i&&(w=+e.target.dataset.i,p())}function c(e,t){var n=[];if("string"==typeof t)throw console.error("TERMS:",t),"terms is a string";for(var a=t.map(u),l=new RegExp("\\b("+a.join("|")+")","gi"),r=0,o=e.length;o>r;r++)l.test(e[r][1])&&n.push(e[r]);return n}function p(e){e=e||!1;var a,l;if(null!==M){if(e&&(M=c(M,L)),M.length){N.style.display="block";var o=N.getElementsByTagName("p");for(a=o.length-1;a>=0;a--)o[a].remove()}else N.style.display="none";b=[];var i,p,v=null,d=[];M.length||(E.value=r.value);var f=L.map(u),m=new RegExp("\\b("+f.join("|")+")(\\w+)\\b","gi"),g=t.createDocumentFragment();for(a=0,l=M.length;l>a;a++){for(var h,y;null!==(h=m.exec(M[a][1]));)y=new RegExp("\\b"+u(h[0])+"\\b","gi"),v=h[h.length-1],void 0===v||y.test(r.value)||w===a&&d.push(v);i=n("p"),a===w&&i.classList.add("selected"),i.dataset.i=a,p=n("a",{innerHTML:s(M[a][1]),href:M[a][0]}),i.appendChild(p),g.appendChild(i),b.push(i)}N.appendChild(g),d.length&&" "!==r.value.charAt(r.value.length-1)?(v=d[w%d.length],E.value=r.value+v):E.value=r.value}}function v(e){var t=e.parentNode;if("FORM"===t.nodeName)return t;if(null===t)throw"too deep. no parent form node to be found";return v(t)}function d(t){var n,a;if("tab"===t)E.value!==r.value&&(r.value=E.value+" "),r.value!==E.value&&g();else if("down"===t||"up"===t){for("down"===t?w=Math.min(b.length-1,++w):"up"===t&&(w=Math.max(0,--w)),n=0,a=b.length;a>n;n++)n===w?b[n].classList.add("selected"):b[n].classList.remove("selected");p()}else if("enter"===t){if(!b.length)return v(r).submit(),!0;var l=b[w],o=l.getElementsByTagName("a")[0];r.value=E.value=o.textContent,N.style.display="none",e.location=o.href}else"esc"===t&&(N.style.display="none");return!1}function f(e){var t={13:"enter",9:"tab",38:"up",40:"down",27:"esc"};return t[e.keyCode]?(e.preventDefault(),d(t[e.keyCode])):!1}function m(){N.style.display="none"}function g(){if(!r.value.trim())return E.value="",void(N.style.display="none");if(E.value.length&&(-1===E.value.indexOf(r.value.trim())&&(E.value=r.value),"block"===N.style.display&&(L=r.value.trim().split(/\s+/),p(!0))),w=0,k[r.value.trim()]){var t=k[r.value.trim()];L=t.terms,M=t.results,p()}else R&&R.abort(),e.XMLHttpRequest?R=new XMLHttpRequest:e.ActiveXObject&&(R=new ActiveXObject("Microsoft.XMLHTTP")),R.onreadystatechange=function(){if(4===R.readyState)if(200===R.status){if(T===r.value){var e=JSON.parse(R.responseText);k[r.value.trim()]=e,L=e.terms,M=e.results,p()}}else 0!==R.status&&(console.warn(R.status,R.responseText),m())},R.open("GET",o.url+encodeURIComponent(r.value.trim()),!0),T=r.value,R.send()}function h(e){E.value=r.value,setTimeout(function(){N.style.display="none"},200),e.preventDefault()}function y(){r.value.length&&b.length&&(N.style.display="block")}o=l({url:"https://autocompeter.com/v1",domain:location.host,groups:null},o||{}),o.url+=o.url.indexOf("?")>-1?"&":"?",o.number&&(o.url+="n="+o.number+"&"),o.groups&&(Array.isArray(o.groups)&&(o.groups=o.groups.join(",")),o.url+="g="+encodeURIComponent(o.groups)+"&"),o.url+="d="+o.domain+"&q=";var b=[],w=0;r.spellcheck=!1,r.autocomplete="off";var x=n("span",{className:"_ac-wrap"}),E=n("input",{tabindex:-1,spellcheck:!1,autocomplete:"off",readonly:"readonly",type:r.type||"text",className:r.className+" _ac-hint"});r.classList.add("_ac-foreground"),x.appendChild(E);var C=r.cloneNode(!0);x.appendChild(C);var N=n("div",{className:"_ac-results"});a(N,"mouseover",i),x.appendChild(N),r.parentElement.insertBefore(x,r),r.parentNode.removeChild(r),r=C;var L,R,T,M=null,k={};a(r,"input",g),a(r,"keydown",f),a(r,"blur",h),a(r,"focus",y),r.value.length&&g()}e.Autocompeter=r}(window,document);