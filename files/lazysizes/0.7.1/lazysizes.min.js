/*! lazysizes - v0.7.1 - 2015-01-01
 Licensed MIT */
!function(a){window.lazySizes=a(window),"function"==typeof define&&define.amd&&define(window.lazySizes)}(function(a){"use strict";function b(b,c){var d;a.HTMLPictureElement||(a.picturefill?picturefill({reevaluate:!0,reparse:!0,elements:[b]}):a.respimage?(c&&(d=b[respimage._.ns],d&&(d[c.srcset?"srcset":"src"]=void 0)),respimage({reparse:!0,elements:[b]})):c&&c.src&&(b.src=c.src))}function c(){m=0,clearTimeout(l)}function d(a,c){var d,e,g,h,j,k,l,m,p,q,r=C(a,"lazybeforeunveil",{force:!!c}),s=a.currentSrc||a.src;if(!r.defaultPrevented&&(t++,B(a,N,!0),clearTimeout(E),E=setTimeout(N,9999),j=a.getAttribute(i.sizesAttr)||a.getAttribute("sizes"),j&&("auto"==j?f(a,!0):a.setAttribute("sizes",j),i.clearAttr&&a.removeAttribute(i.sizesAttr)),l=a.getAttribute(i.srcsetAttr),k=a.getAttribute(i.srcAttr),(p=w.test(a.nodeName||""))&&(m=a.parentNode,q=v.test(m.nodeName||"")),i.addClasses&&(n(a,i.loadingClass),B(a,Q,!0)),l||k)){if(q)for(d=m.getElementsByTagName("source"),e=0,g=d.length;g>e;e++)h=d[e].getAttribute(i.srcsetAttr),h&&d[e].setAttribute("srcset",h);l?(a.setAttribute("srcset",l),u&&j&&a.removeAttribute("src"),i.clearAttr&&a.removeAttribute(i.srcsetAttr)):k&&(a.setAttribute("src",k),i.clearAttr&&a.removeAttribute(i.srcAttr))}setTimeout(function(){o(a,i.lazyClass),"auto"==j&&n(a,i.autosizesClass),(l||j)&&b(a,{srcset:l,src:k}),a.lazyload&&(a.lazyload=0),r.details.firesLoad||p&&(l||k)&&(!a.complete||s!=(a.currentSrc||a.src))||(i.addClasses&&Q({target:a}),B(a,N)),a=null},1)}function e(){k=0,clearTimeout(j)}function f(a,c){var d,e,f,g,h,j=a.parentNode;if(j&&(d=T(a,j),h=C(a,"lazybeforesizes",{width:d,dataAttr:!!c}),!h.defaultPrevented&&(d=h.details.width,d&&d!==a._lazysizesWidth&&(!i.onlyLargerSizes||!a._lazysizesWidth||a._lazysizesWidth<d)))){if(a._lazysizesWidth=d,d+="px",a.setAttribute("sizes",d),v.test(j.nodeName||""))for(e=j.getElementsByTagName("source"),f=0,g=e.length;g>f;f++)e[f].setAttribute("sizes",d);h.details.dataAttr||b(a)}}if(Date.now&&a.document.getElementsByClassName){var g,h,i,j,k,l,m,n,o,p,q,r=a.document,s=r.documentElement,t=0,u=a.HTMLPictureElement&&navigator.userAgent.match(/hrome\/(\d+)/)&&(40==RegExp.$1||41==RegExp.$1),v=/^picture$/i,w=/^img$/i,x=-21,y=x,z=9,A=0,B=function(a,b,c){var d=c?"addEventListener":"removeEventListener";c&&B(a,b),["load","error","lazyincluded"].forEach(function(c){a[d](c,b,!0)})},C=function(a,b,c){var d=r.createEvent("Event");return d.initEvent(b,!0,!0),d.details=c||{},a.dispatchEvent(d),d};n=function(a,b){p(a,b)||(a.className+=" "+b)},o=function(a,b){var c;(c=p(a,b))&&(a.className=a.className.replace(c," "))},p=function(a,b){var c=new RegExp("(\\s|^)"+b+"(\\s|$)");return a.className.match(c)&&c};var D,E,F,G,H,I,J,K,L,M=Date.now(),N=function(a){t--,a&&a.target&&B(a.target,N),(!a||0>t||!a.target)&&(t=0)},O=function(){var a,b,d=function(){b=!1},e=function(){clearTimeout(a),c(),P(),setTimeout(d,3)};return function(){b||(b=!0,clearTimeout(a),a=setTimeout(e,66))}}(),P=function(){var b,c,e;if(D=g.length,M=Date.now(),D){for(F=a.innerWidth+y,G=a.innerHeight+y,L=-1*y;D>m;m++)if(b=g[m].getBoundingClientRect(),(K=b.bottom)>=L&&(H=b.top)<=G&&(J=b.right)>=L&&(I=b.left)<=F&&(K||J||I||H)&&(q&&3>t||"hidden"!=getComputedStyle(g[m],null).visibility))d(g[m]),e=!0;else{if(D-1>m&&Date.now()-M>9){c=!1,l=setTimeout(P);break}!e&&q&&!c&&i.preloadAfterLoad&&3>t&&(K||J||I||H||"auto"!=g[m].getAttribute(i.sizesAttr))&&(c=g[m])}A++,c&&!e&&d(c),z>y&&1>t&&!e&&A>9?(y=z,A=0,l=setTimeout(O,4)):y!=x&&(y=x)}},Q=function(a){n(a.target,i.loadedClass),o(a.target,i.loadingClass),B(a.target,Q)},R=function(){var a,b=function(){clearTimeout(a),e(),S()};return function(){clearTimeout(a),clearTimeout(j),a=setTimeout(b,99)}}(),S=function(){var a,b,c,d=h.length;if(d)for(b=Date.now(),c=k||0,a=c+3,e();d>c;c++)if(f(h[c]),c>a&&d-1>c&&Date.now()-b>9){k=c+1,j=setTimeout(S);break}},T=function(a,b){var c,d,e,f;for(a._lazysizesWidth||(f=a.getAttribute("alt"),a.alt=""),c=b.offsetWidth,d=a.offsetWidth,e=d>=c||d>i.minSize&&"block"==getComputedStyle(a,null).display?d:c;b&&b!=r.body&&e<i.minSize&&!a._lazysizesWidth;)e=b.offsetWidth,b=b.parentNode;return a._lazysizesWidth||(null==f?a.removeAttribute("alt"):a.alt=f),e},U=function(){y=i.threshold||200,x=y,z=4*y,r.addEventListener("load",O,!0),q=!0},V=function(){i.mutation&&(a.MutationObserver?new MutationObserver(O).observe(s,{childList:!0,subtree:!0,attributes:!0}):(s.addEventListener("DOMNodeInserted",O,!0),s.addEventListener("DOMAttrModified",O,!0))),i.hover&&r.addEventListener("mouseover",O,!0),r.addEventListener("focus",O,!0),addEventListener("hashchange",O,!0),"onmozfullscreenchange"in s?addEventListener("mozfullscreenchange",O,!0):"onwebkitfullscreenchange"in s?addEventListener("webkitfullscreenchange",O,!0):addEventListener("fullscreenchange",O,!0),i.cssanimation&&(r.addEventListener("animationstart",O,!0),r.addEventListener("transitionstart",O,!0))};return i=a.lazySizesConfig||{},function(){var b,c={mutation:!0,hover:!0,cssanimation:!0,lazyClass:"lazyload",loadedClass:"lazyloaded",loadingClass:"lazyloading",scroll:!0,autosizesClass:"lazyautosizes",srcAttr:"data-src",srcsetAttr:"data-srcset",sizesAttr:"data-sizes",onlyLargerSizes:!0,minSize:33};for(b in c)b in i||(i[b]=c[b]);a.lazySizesConfig=i}(),setTimeout(function(){g=r.getElementsByClassName(i.lazyClass),h=r.getElementsByClassName(i.autosizesClass),i.scroll&&addEventListener("scroll",O,!0),addEventListener("resize",O,!1),addEventListener("resize",R,!1),/^i|^loade|c/.test(r.readyState)?V():setTimeout(V),"complete"==r.readyState?U():(addEventListener("load",U,!1),r.addEventListener("readystatechange",O,!1)),O()}),o(s,"no-js"),{cfg:i,updateAllSizes:R,updateAllLazy:function(a){a?(c(),P()):O()},unveilLazy:function(a){p(a,i.lazyClass)&&d(a)},uS:f,uP:b,aC:n,rC:o,hC:p,fire:C,gW:T}}});