!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):t.Ractive=e()}(this,function(){"use strict";function t(t){var e;if(t&&"boolean"!=typeof t)return"undefined"!=typeof window&&document&&t?t.nodeType?t:"string"==typeof t&&(e=document.getElementById(t),!e&&document.querySelector&&(e=document.querySelector(t)),e&&e.nodeType)?e:t[0]&&t[0].nodeType?t[0]:null:null}function e(t){return t&&"unknown"!=typeof t.parentNode&&t.parentNode&&t.parentNode.removeChild(t),t}function n(t){return null!=t&&t.toString?t:""}function r(t){for(var e=arguments.length,n=Array(e>1?e-1:0),r=1;e>r;r++)n[r-1]=arguments[r];for(var i,s;s=n.shift();)for(i in s)Fu.call(s,i)&&(t[i]=s[i]);return t}function i(t){for(var e=arguments.length,n=Array(e>1?e-1:0),r=1;e>r;r++)n[r-1]=arguments[r];return n.forEach(function(e){for(var n in e)!e.hasOwnProperty(n)||n in t||(t[n]=e[n])}),t}function s(t){return"[object Array]"===ju.call(t)}function o(t){return Ru.test(ju.call(t))}function a(t,e){return null===t&&null===e?!0:"object"==typeof t||"object"==typeof e?!1:t===e}function u(t){return!isNaN(parseFloat(t))&&isFinite(t)}function h(t){return t&&"[object Object]"===ju.call(t)}function c(t,e){return t.replace(/%s/g,function(){return e.shift()})}function l(t){for(var e=arguments.length,n=Array(e>1?e-1:0),r=1;e>r;r++)n[r-1]=arguments[r];throw t=c(t,n),new Error(t)}function f(){ay.DEBUG&&Ou.apply(null,arguments)}function d(t){for(var e=arguments.length,n=Array(e>1?e-1:0),r=1;e>r;r++)n[r-1]=arguments[r];t=c(t,n),Pu(t,n)}function p(t){for(var e=arguments.length,n=Array(e>1?e-1:0),r=1;e>r;r++)n[r-1]=arguments[r];t=c(t,n),Nu[t]||(Nu[t]=!0,Pu(t,n))}function m(){ay.DEBUG&&d.apply(null,arguments)}function v(){ay.DEBUG&&p.apply(null,arguments)}function g(t,e,n){var r=y(t,e,n);return r?r[t][n]:null}function y(t,e,n){for(;e;){if(n in e[t])return e;if(e.isolated)return null;e=e.parent}}function w(t){return function(){return t}}function b(t){var e,n,r,i,s,o;for(e=t.split("."),(n=Uu[e.length])||(n=x(e.length)),s=[],r=function(t,n){return t?"*":e[n]},i=n.length;i--;)o=n[i].map(r).join("."),s.hasOwnProperty(o)||(s.push(o),s[o]=!0);return s}function x(t){var e,n,r,i,s,o="";if(!Uu[t]){for(r=[];o.length<t;)o+=1;for(e=parseInt(o,2),i=function(t){return"1"===t},s=0;e>=s;s+=1){for(n=s.toString(2);n.length<t;)n="0"+n;r[s]=Array.prototype.map.call(n,i)}Uu[t]=r}return Uu[t]}function k(t,e,n,r){var i=t[e];if(!i||!i.equalsOrStartsWith(r)&&i.equalsOrStartsWith(n))return t[e]=i?i.replace(n,r):r,!0}function E(t){var e=t.slice(2);return"i"===t[1]&&u(e)?+e:e}function _(t){return null==t?t:(Bu.hasOwnProperty(t)||(Bu[t]=new $u(t)),Bu[t])}function A(t,e){function n(e,n){var r,i,o;return n.isRoot?o=[].concat(Object.keys(t.viewmodel.data),Object.keys(t.viewmodel.mappings),Object.keys(t.viewmodel.computations)):(r=t.viewmodel.wrapped[n.str],i=r?r.get():t.viewmodel.get(n),o=i?Object.keys(i):null),o&&o.forEach(function(t){"_ractive"===t&&s(i)||e.push(n.join(t))}),e}var r,i,o;for(r=e.str.split("."),o=[Qu];i=r.shift();)"*"===i?o=o.reduce(n,[]):o[0]===Qu?o[0]=_(i):o=o.map(S(i));return o}function S(t){return function(e){return e.join(t)}}function C(t){return t?t.replace(Mu,".$1"):""}function O(t,e,n){if("string"!=typeof e||!u(n))throw new Error("Bad arguments");var r=void 0,i=void 0;if(/\*/.test(e))return i={},A(t,_(C(e))).forEach(function(e){var r=t.viewmodel.get(e);if(!u(r))throw new Error(Zu);i[e.str]=r+n}),t.set(i);if(r=t.get(e),!u(r))throw new Error(Zu);return t.set(e,+r+n)}function P(t,e){return O(this,t,void 0===e?1:+e)}function T(t){this.event=t,this.method="on"+t,this.deprecate=Yu[t]}function F(t,e){var n=t.indexOf(e);-1===n&&t.push(e)}function j(t,e){for(var n=0,r=t.length;r>n;n++)if(t[n]==e)return!0;return!1}function R(t,e){var n;if(!s(t)||!s(e))return!1;if(t.length!==e.length)return!1;for(n=t.length;n--;)if(t[n]!==e[n])return!1;return!0}function N(t){return"string"==typeof t?[t]:void 0===t?[]:t}function L(t){return t[t.length-1]}function D(t,e){var n=t.indexOf(e);-1!==n&&t.splice(n,1)}function I(t){for(var e=[],n=t.length;n--;)e[n]=t[n];return e}function V(t){setTimeout(t,0)}function W(t,e){return function(){for(var n;n=t.shift();)n(e)}}function U(t,e,n,r){var i;if(e===t)throw new TypeError("A promise's fulfillment handler cannot return the same promise");if(e instanceof Ju)e.then(n,r);else if(!e||"object"!=typeof e&&"function"!=typeof e)n(e);else{try{i=e.then}catch(s){return void r(s)}if("function"==typeof i){var o,a,u;a=function(e){o||(o=!0,U(t,e,n,r))},u=function(t){o||(o=!0,r(t))};try{i.call(e,a,u)}catch(s){if(!o)return r(s),void(o=!0)}}else n(e)}}function M(t,e,n){var r;return e=C(e),"~/"===e.substr(0,2)?(r=_(e.substring(2)),$(t,r.firstKey,n)):"."===e[0]?(r=z(rh(n),e),r&&$(t,r.firstKey,n)):r=B(t,_(e),n),r}function z(t,e){var n;if(void 0!=t&&"string"!=typeof t&&(t=t.str),"."===e)return _(t);if(n=t?t.split("."):[],"../"===e.substr(0,3)){for(;"../"===e.substr(0,3);){if(!n.length)throw new Error('Could not resolve reference - too many "../" prefixes');n.pop(),e=e.substring(3)}return n.push(e),_(n.join("."))}return _(t?t+e.replace(/^\.\//,"."):e.replace(/^\.\/?/,""))}function B(t,e,n,r){var i,s,o,a,u;if(e.isRoot)return e;for(s=e.firstKey;n;)if(i=n.context,n=n.parent,i&&(a=!0,o=t.viewmodel.get(i),o&&("object"==typeof o||"function"==typeof o)&&s in o))return i.join(e.str);return q(t.viewmodel,s)?e:t.parent&&!t.isolated&&(a=!0,n=t.component.parentFragment,s=_(s),u=B(t.parent,s,n,!0))?(t.viewmodel.map(s,{origin:t.parent.viewmodel,keypath:u}),e):r||a?void 0:(t.viewmodel.set(e,void 0),e)}function $(t,e){var n;!t.parent||t.isolated||q(t.viewmodel,e)||(e=_(e),(n=B(t.parent,e,t.component.parentFragment,!0))&&t.viewmodel.map(e,{origin:t.parent.viewmodel,keypath:n}))}function q(t,e){return""===e||e in t.data||e in t.computations||e in t.mappings}function Q(t){t.teardown()}function Z(t){t.unbind()}function H(t){t.unrender()}function K(t){t.detach()}function G(t){t.detachNodes()}function Y(t){!t.ready||t.outros.length||t.outroChildren||(t.outrosComplete||(t.parent?t.parent.decrementOutros(t):t.detachNodes(),t.outrosComplete=!0),t.intros.length||t.totalChildren||("function"==typeof t.callback&&t.callback(),t.parent&&t.parent.decrementTotal()))}function J(){for(var t,e,n;sh.ractives.length;)e=sh.ractives.pop(),n=e.viewmodel.applyChanges(),n&&uh.fire(e,n);for(X(),t=0;t<sh.views.length;t+=1)sh.views[t].update();for(sh.views.length=0,t=0;t<sh.tasks.length;t+=1)sh.tasks[t]();return sh.tasks.length=0,sh.ractives.length?J():void 0}function X(){var t,e,n,r;for(t=ah.length;t--;)e=ah[t],e.keypath?ah.splice(t,1):(n=M(e.root,e.ref,e.parentFragment))&&((r||(r=[])).push({item:e,keypath:n}),ah.splice(t,1));r&&r.forEach(te)}function te(t){t.item.resolve(t.keypath)}function ee(t,e,n){var r,i,s,o,a,u,h,c,l,f,d,p,m,v;if(r=new nh(function(t){return i=t}),"object"==typeof t){n=e||{},u=n.easing,h=n.duration,a=[],c=n.step,l=n.complete,(c||l)&&(d={},n.step=null,n.complete=null,f=function(t){return function(e,n){d[t]=n}});for(s in t)t.hasOwnProperty(s)&&((c||l)&&(p=f(s),n={easing:u,duration:h},c&&(n.step=p)),n.complete=l?p:ku,a.push(ne(this,s,t[s],n)));return v={easing:u,duration:h},c&&(v.step=function(t){return c(t,d)}),l&&r.then(function(t){return l(t,d)}),v.complete=i,m=ne(this,null,null,v),a.push(m),r.stop=function(){for(var t;t=a.pop();)t.stop();m&&m.stop()},r}return n=n||{},n.complete&&r.then(n.complete),n.complete=i,o=ne(this,t,e,n),r.stop=function(){return o.stop()},r}function ne(t,e,n,r){var i,s,o,u;return e&&(e=_(C(e))),null!==e&&(u=t.viewmodel.get(e)),lh.abort(e,t),a(u,n)?(r.complete&&r.complete(r.to),ph):(r.easing&&(i="function"==typeof r.easing?r.easing:t.easing[r.easing],"function"!=typeof i&&(i=null)),s=void 0===r.duration?400:r.duration,o=new fh({keypath:e,from:u,to:n,root:t,duration:s,easing:i,interpolator:r.interpolator,step:r.step,complete:r.complete}),lh.add(o),t._animations.push(o),o)}function re(){return this.detached?this.detached:(this.el&&D(this.el.__ractive_instances__,this),this.detached=this.fragment.detach(),vh.fire(this),this.detached)}function ie(t){return this.el?this.fragment.find(t):null}function se(t,e){var n;return n=this._isComponentQuery?!this.selector||t.name===this.selector:t.node?lu(t.node,this.selector):null,n?(this.push(t.node||t.instance),e||this._makeDirty(),!0):void 0}function oe(t){var e;return(e=t.parentFragment)?e.owner:t.component&&(e=t.component.parentFragment)?e.owner:void 0}function ae(t){var e,n;for(e=[t],n=oe(t);n;)e.push(n),n=oe(n);return e}function ue(t,e,n,r){var i=[];return Au(i,{selector:{value:e},live:{value:n},_isComponentQuery:{value:r},_test:{value:yh}}),n?(Au(i,{cancel:{value:wh},_root:{value:t},_sort:{value:kh},_makeDirty:{value:Eh},_remove:{value:_h},_dirty:{value:!1,writable:!0}}),i):i}function he(t,e){var n,r;return this.el?(e=e||{},n=this._liveQueries,(r=n[t])?e&&e.live?r:r.slice():(r=ue(this,t,!!e.live,!1),r.live&&(n.push(t),n["_"+t]=r),this.fragment.findAll(t,r),r)):[]}function ce(t,e){var n,r;return e=e||{},n=this._liveComponentQueries,(r=n[t])?e&&e.live?r:r.slice():(r=ue(this,t,!!e.live,!0),r.live&&(n.push(t),n["_"+t]=r),this.fragment.findAllComponents(t,r),r)}function le(t){return this.fragment.findComponent(t)}function fe(t){return this.container?this.container.component&&this.container.component.name===t?this.container:this.container.findContainer(t):null}function de(t){return this.parent?this.parent.component&&this.parent.component.name===t?this.parent:this.parent.findParent(t):null}function pe(t,e){var n=void 0===arguments[2]?{}:arguments[2];if(e){n.event?n.event.name=e:n.event={name:e,_noArg:!0};var r=_(e).wildcardMatches();me(t,r,n.event,n.args,!0)}}function me(t,e,n,r){var i,s,o=void 0===arguments[4]?!1:arguments[4],a=!0;for(Th.enqueue(t,n),s=e.length;s>=0;s--)i=t._subs[e[s]],i&&(a=ve(t,i,n,r)&&a);if(Th.dequeue(t),t.parent&&a){if(o&&t.component){var u=t.component.name+"."+e[e.length-1];e=_(u).wildcardMatches(),n&&(n.component=t)}me(t.parent,e,n,r)}}function ve(t,e,n,r){var i=null,s=!1;n&&!n._noArg&&(r=[n].concat(r)),e=e.slice();for(var o=0,a=e.length;a>o;o+=1)e[o].apply(t,r)===!1&&(s=!0);return n&&!n._noArg&&s&&(i=n.original)&&(i.preventDefault&&i.preventDefault(),i.stopPropagation&&i.stopPropagation()),!s}function ge(t){var e={args:Array.prototype.slice.call(arguments,1)};pe(this,t,e)}function ye(t){var e;return t=_(C(t)),e=this.viewmodel.get(t,Rh),void 0===e&&this.parent&&!this.isolated&&M(this,t.str,this.component.parentFragment)&&(e=this.viewmodel.get(t)),e}function we(e,n){if(!this.fragment.rendered)throw new Error("The API has changed - you must call `ractive.render(target[, anchor])` to render your Ractive instance. Once rendered you can use `ractive.insert()`.");if(e=t(e),n=t(n)||null,!e)throw new Error("You must specify a valid target to insert into");e.insertBefore(this.detach(),n),this.el=e,(e.__ractive_instances__||(e.__ractive_instances__=[])).push(this),this.detached=null,be(this)}function be(t){Lh.fire(t),t.findAllComponents("*").forEach(function(t){be(t.instance)})}function xe(t,e,n){var r,i;return t=_(C(t)),r=this.viewmodel.get(t),s(r)&&s(e)?(i=oh.start(this,!0),this.viewmodel.merge(t,r,e,n),oh.end(),i):this.set(t,e,n&&n.complete)}function ke(t,e){var n,r;return n=A(t,e),r={},n.forEach(function(e){r[e.str]=t.get(e.str)}),r}function Ee(t,e,n,r){var i,s,o;return e=_(C(e)),r=r||Qh,e.isPattern?(i=new Vh(t,e,n,r),t.viewmodel.patternObservers.push(i),s=!0):i=new Ih(t,e,n,r),i.init(r.init),t.viewmodel.register(e,i,s?"patternObservers":"observers"),i.ready=!0,{cancel:function(){var n;o||(s?(n=t.viewmodel.patternObservers.indexOf(i),t.viewmodel.patternObservers.splice(n,1),t.viewmodel.unregister(e,i,"patternObservers")):t.viewmodel.unregister(e,i,"observers"),o=!0)}}}function _e(t,e,n){var r,i,s,o;if(h(t)){n=e,i=t,r=[];for(t in i)i.hasOwnProperty(t)&&(e=i[t],r.push(this.observe(t,e,n)));return{cancel:function(){for(;r.length;)r.pop().cancel()}}}if("function"==typeof t)return n=e,e=t,t="",Ee(this,t,e,n);if(s=t.split(" "),1===s.length)return Ee(this,t,e,n);for(r=[],o=s.length;o--;)t=s[o],t&&r.push(Ee(this,t,e,n));return{cancel:function(){for(;r.length;)r.pop().cancel()}}}function Ae(t,e,n){var r=this.observe(t,function(){e.apply(this,arguments),r.cancel()},{init:!1,defer:n&&n.defer});return r}function Se(t,e){var n,r=this;if(t)n=t.split(" ").map(Kh).filter(Gh),n.forEach(function(t){var n,i;(n=r._subs[t])&&(e?(i=n.indexOf(e),-1!==i&&n.splice(i,1)):r._subs[t]=[])});else for(t in this._subs)delete this._subs[t];return this}function Ce(t,e){var n,r,i,s=this;if("object"==typeof t){n=[];for(r in t)t.hasOwnProperty(r)&&n.push(this.on(r,t[r]));return{cancel:function(){for(var t;t=n.pop();)t.cancel()}}}return i=t.split(" ").map(Kh).filter(Gh),i.forEach(function(t){(s._subs[t]||(s._subs[t]=[])).push(e)}),{cancel:function(){return s.off(t,e)}}}function Oe(t,e){var n=this.on(t,function(){e.apply(this,arguments),n.cancel()});return n}function Pe(t,e,n){var r,i,s,o,a,u,h=[];if(r=Te(t,e,n),!r)return null;for(i=t.length,a=r.length-2-r[1],s=Math.min(i,r[0]),o=s+r[1],u=0;s>u;u+=1)h.push(u);for(;o>u;u+=1)h.push(-1);for(;i>u;u+=1)h.push(u+a);return h.touchedFrom=0!==a?r[0]:t.length,h}function Te(t,e,n){switch(e){case"splice":for(void 0!==n[0]&&n[0]<0&&(n[0]=t.length+Math.max(n[0],-t.length));n.length<2;)n.push(0);return n[1]=Math.min(n[1],t.length-n[0]),n;case"sort":case"reverse":return null;case"pop":return t.length?[t.length-1,1]:[0,0];case"push":return[t.length,0].concat(n);case"shift":return[0,t.length?1:0];case"unshift":return[0,0].concat(n)}}function Fe(e,n){var r,i,s,o=this;if(s=this.transitionsEnabled,this.noIntro&&(this.transitionsEnabled=!1),r=oh.start(this,!0),oh.scheduleTask(function(){return cc.fire(o)},!0),this.fragment.rendered)throw new Error("You cannot call ractive.render() on an already rendered instance! Call ractive.unrender() first");if(e=t(e)||this.el,n=t(n)||this.anchor,this.el=e,this.anchor=n,!this.append&&e){var a=e.__ractive_instances__;a&&a.length&&je(a),e.innerHTML=""}return this.cssId&&Uh.apply(),e&&((i=e.__ractive_instances__)?i.push(this):e.__ractive_instances__=[this],n?e.insertBefore(this.fragment.render(),n):e.appendChild(this.fragment.render())),oh.end(),this.transitionsEnabled=s,r.then(function(){return lc.fire(o)})}function je(t){t.splice(0,t.length).forEach(Q)}function Re(t,e){for(var n=t.slice(),r=e.length;r--;)~n.indexOf(e[r])||n.push(e[r]);return n}function Ne(t,e){var n,r,i;return r='[data-ractive-css~="{'+e+'}"]',i=function(t){var e,n,i,s,o,a,u,h=[];for(e=[];n=mc.exec(t);)e.push({str:n[0],base:n[1],modifiers:n[2]});for(s=e.map(De),u=e.length;u--;)a=s.slice(),i=e[u],a[u]=i.base+r+i.modifiers||"",o=s.slice(),o[u]=r+" "+o[u],h.push(a.join(" "),o.join(" "));return h.join(", ")},n=gc.test(t)?t.replace(gc,r):t.replace(pc,"").replace(dc,function(t,e){var n,r;return vc.test(e)?t:(n=e.split(",").map(Le),r=n.map(i).join(", ")+" ",t.replace(e,r))})}function Le(t){return t.trim?t.trim():t.replace(/^\s+/,"").replace(/\s+$/,"")}function De(t){return t.str}function Ie(t){t&&t.constructor!==Object&&("function"==typeof t||("object"!=typeof t?l("data option must be an object or a function, `"+t+"` is not valid"):m("If supplied, options.data should be a plain JavaScript object - using a non-POJO as the root object may work, but is discouraged")))}function Ve(t,e){Ie(e);var n="function"==typeof t,r="function"==typeof e;return e||n||(e={}),n||r?function(){var i=r?We(e,this):e,s=n?We(t,this):t;return Ue(i,s)}:Ue(e,t)}function We(t,e){var n=t.call(e);if(n)return"object"!=typeof n&&l("Data function must return an object"),n.constructor!==Object&&v("Data function returned something other than a plain JavaScript object. This might work, but is strongly discouraged"),n}function Ue(t,e){if(t&&e){for(var n in e)n in t||(t[n]=e[n]);return t}return t||e}function Me(t){var e,n,r;return t.matchString("=")?(e=t.pos,t.allowWhitespace(),(n=t.matchPattern(cl))?t.matchPattern(ll)?(r=t.matchPattern(cl))?(t.allowWhitespace(),t.matchString("=")?[n,r]:(t.pos=e,null)):(t.pos=e,null):null:(t.pos=e,null)):null}function ze(t){var e;return(e=t.matchPattern(dl))?{t:Qc,v:e}:null}function Be(t){var e,n;if(t.interpolate[t.inside]===!1)return null;for(n=0;n<t.tags.length;n+=1)if(e=$e(t,t.tags[n]))return e}function $e(t,e){var n,r,i,s;if(n=t.pos,t.matchString("\\"+e.open)){if(0===n||"\\"!==t.str[n-1])return e.open}else if(!t.matchString(e.open))return null;if(r=Me(t))return t.matchString(e.close)?(e.open=r[0],e.close=r[1],t.sortMustacheTags(),pl):null;if(t.allowWhitespace(),t.matchString("/")){t.pos-=1;var o=t.pos;fl(t)?t.pos=o:(t.pos=o-e.close.length,t.error("Attempted to close a section that wasn't open"))}for(s=0;s<e.readers.length;s+=1)if(i=e.readers[s],r=i(t,e))return e.isStatic&&(r.s=!0),t.includeLinePositions&&(r.p=t.getLinePos(n)),r;return t.pos=n,null}function qe(t){var e;return(e=t.matchPattern(yl))?{t:Mc,v:e}:null}function Qe(t){var e=t.remaining();return"true"===e.substr(0,4)?(t.pos+=4,{t:qc,v:"true"}):"false"===e.substr(0,5)?(t.pos+=5,{t:qc,v:"false"}):null}function Ze(t){var e;return(e=_l(t))?Sl.test(e.v)?e.v:'"'+e.v.replace(/"/g,'\\"')+'"':(e=gl(t))?e.v:(e=t.matchPattern(Al))?e:void 0}function He(t){var e,n,r;return e=t.pos,t.allowWhitespace(),n=Ze(t),null===n?(t.pos=e,null):(t.allowWhitespace(),t.matchString(":")?(t.allowWhitespace(),r=nn(t),null===r?(t.pos=e,null):{t:Hc,k:n,v:r}):(t.pos=e,null))}function Ke(t){var e,n,r,i;return e=t.pos,r=Cl(t),null===r?null:(n=[r],t.matchString(",")?(i=Ke(t),i?n.concat(i):(t.pos=e,null)):n)}function Ge(t){function e(t){r.push(t)}var n,r,i,s;return n=t.pos,t.allowWhitespace(),i=nn(t),null===i?null:(r=[i],t.allowWhitespace(),t.matchString(",")&&(s=Ge(t),null===s&&t.error(ml),s.forEach(e)),r)}function Ye(t){return gl(t)||Qe(t)||_l(t)||Ol(t)||Pl(t)||fl(t)}function Je(t){var e,n,r,i,s,o;return e=t.pos,r=t.matchPattern(/^@(?:keypath|index|key)/),r||(n=t.matchPattern(Tl)||"",r=!n&&t.relaxedNames&&t.matchPattern(Nl)||t.matchPattern(Rl),r||"."!==n||(n="",r=".")),r?n||t.relaxedNames||!bl.test(r)?!n&&wl.test(r)?(i=wl.exec(r)[0],t.pos=e+i.length,{t:Zc,v:i}):(s=(n||"")+C(r),t.matchString("(")&&(o=s.lastIndexOf("."),-1!==o?(s=s.substr(0,o),t.pos=e+s.length):t.pos-=1),{t:Kc,n:s.replace(/^this\./,"./").replace(/^this$/,".")}):(t.pos=e,null):null}function Xe(t){var e,n;return e=t.pos,t.matchString("(")?(t.allowWhitespace(),n=nn(t),n||t.error(ml),t.allowWhitespace(),t.matchString(")")||t.error(vl),{t:Xc,x:n}):null}function tn(t){var e,n,r;if(e=t.pos,t.allowWhitespace(),t.matchString(".")){if(t.allowWhitespace(),n=t.matchPattern(Al))return{t:Gc,n:n};t.error("Expected a property name")}return t.matchString("[")?(t.allowWhitespace(),r=nn(t),r||t.error(ml),t.allowWhitespace(),t.matchString("]")||t.error("Expected ']'"),{t:Gc,x:r}):null}function en(t){var e,n,r,i;return(n=Il(t))?(e=t.pos,t.allowWhitespace(),t.matchString("?")?(t.allowWhitespace(),r=nn(t),r||t.error(ml),t.allowWhitespace(),t.matchString(":")||t.error('Expected ":"'),t.allowWhitespace(),i=nn(t),i||t.error(ml),{t:tl,o:[n,r,i]}):(t.pos=e,n)):null}function nn(t){return Hl(t)}function rn(t){function e(t){switch(t.t){case qc:case Zc:case Mc:case Qc:return t.v;case zc:return JSON.stringify(String(t.v));case Bc:return"["+(t.m?t.m.map(e).join(","):"")+"]";case $c:return"{"+(t.m?t.m.map(e).join(","):"")+"}";case Hc:return t.k+":"+e(t.v);case Jc:return("typeof"===t.s?"typeof ":t.s)+e(t.o);case el:return e(t.o[0])+("in"===t.s.substr(0,2)?" "+t.s+" ":t.s)+e(t.o[1]);case nl:return e(t.x)+"("+(t.o?t.o.map(e).join(","):"")+")";case Xc:return"("+e(t.x)+")";case Yc:return e(t.x)+e(t.r);case Gc:return t.n?"."+t.n:"["+e(t.x)+"]";case tl:return e(t.o[0])+"?"+e(t.o[1])+":"+e(t.o[2]);case Kc:return"_"+n.indexOf(t.n);default:throw new Error("Expected legal JavaScript")}}var n;return sn(t,n=[]),{r:n,s:e(t)}}function sn(t,e){var n,r;if(t.t===Kc&&-1===e.indexOf(t.n)&&e.unshift(t.n),r=t.o||t.m)if(h(r))sn(r,e);else for(n=r.length;n--;)sn(r[n],e);t.x&&sn(t.x,e),t.r&&sn(t.r,e),t.v&&sn(t.v,e)}function on(t,e){var n;if(t){for(;t.t===Xc&&t.x;)t=t.x;return t.t===Kc?e.r=t.n:t.t===Mc&&Kl.test(t.v)?e.r=t.v:(n=an(t))?e.rx=n:e.x=rn(t),e}}function an(t){for(var e,n=[];t.t===Yc&&t.r.t===Gc;)e=t.r,n.unshift(e.x?e.x.t===Kc?e.x:rn(e.x):e.n),t=t.x;return t.t!==Kc?null:{r:t.n,m:n}}function un(t,e){var n,r=nn(t);return r?(t.matchString(e.close)||t.error("Expected closing delimiter '"+e.close+"'"),n={t:Cc},on(r,n),n):null}function hn(t,e){var n,r;return t.matchString("&")?(t.allowWhitespace(),(n=nn(t))?(t.matchString(e.close)||t.error("Expected closing delimiter '"+e.close+"'"),r={t:Cc},on(n,r),r):null):null}function cn(t,e){var n,r,i,s,o;return n=t.pos,t.matchString(">")?(t.allowWhitespace(),r=t.pos,t.relaxedNames=!0,i=nn(t),t.relaxedNames=!1,t.allowWhitespace(),s=nn(t),t.allowWhitespace(),i?(o={t:jc},on(i,o),t.allowWhitespace(),s&&(o={t:Oc,n:ol,f:[o]},on(s,o)),t.matchString(e.close)||t.error("Expected closing delimiter '"+e.close+"'"),o):null):null}function ln(t,e){var n;return t.matchString("!")?(n=t.remaining().indexOf(e.close),-1!==n?(t.pos+=n+e.close.length,{t:Rc}):void 0):null}function fn(t,e){var n,r,i;if(n=t.pos,r=nn(t),!r)return null;for(i=0;i<e.length;i+=1)if(t.remaining().substr(0,e[i].length)===e[i])return r;return t.pos=n,Je(t)}function dn(t,e){var n,r,i,s;n=t.pos;try{r=fn(t,[e.close])}catch(o){s=o}if(!r){if("!"===t.str.charAt(n))return t.pos=n,null;if(s)throw s}if(!t.matchString(e.close)&&(t.error("Expected closing delimiter '"+e.close+"' after reference"),!r)){if("!"===t.nextChar())return null;t.error("Expected expression or legal reference")}return i={t:Sc},on(r,i),i}function pn(t,e){var n,r,i;return t.matchPattern(Yl)?(n=t.pos,r=t.matchPattern(/^[a-zA-Z_$][a-zA-Z_$0-9\-]*/),t.allowWhitespace(),t.matchString(e.close)||t.error("expected legal partial name"),i={t:Vc},r&&(i.n=r),i):null}function mn(t,e){var n,r,i,s;return n=t.pos,t.matchString(e.open)?(t.allowWhitespace(),t.matchString("/")?(t.allowWhitespace(),r=t.remaining(),i=r.indexOf(e.close),-1!==i?(s={t:Tc,r:r.substr(0,i).split(" ")[0]},t.pos+=i,t.matchString(e.close)||t.error("Expected closing delimiter '"+e.close+"'"),s):(t.pos=n,null)):(t.pos=n,null)):null}function vn(t,e){var n=t.pos;return t.matchString(e.open)?t.matchPattern(Xl)?(t.matchString(e.close)||t.error("Expected closing delimiter '"+e.close+"'"),{t:ul}):(t.pos=n,null):null}function gn(t,e){var n,r=t.pos;return t.matchString(e.open)?t.matchPattern(ef)?(n=nn(t),t.matchString(e.close)||t.error("Expected closing delimiter '"+e.close+"'"),{t:hl,x:n}):(t.pos=r,null):null}function yn(t,e){var n,r,i,s,o,a,u,h,c,l,f,d;if(n=t.pos,t.matchString("^"))i={t:Oc,f:[],n:il};else{if(!t.matchString("#"))return null;i={t:Oc,f:[]},t.matchString("partial")&&(t.pos=n-t.standardDelimiters[0].length,t.error("Partial definitions can only be at the top level of the template, or immediately inside components")),(u=t.matchPattern(of))&&(d=u,i.n=nf[u])}if(t.allowWhitespace(),r=nn(t),r||t.error("Expected expression"),f=t.matchPattern(rf)){var p=void 0;i.i=(p=t.matchPattern(sf))?f+","+p:f}t.allowWhitespace(),t.matchString(e.close)||t.error("Expected closing delimiter '"+e.close+"'"),t.sectionDepth+=1,o=i.f,c=[];do if(s=mn(t,e))d&&s.r!==d&&t.error("Expected "+e.open+"/"+d+e.close),t.sectionDepth-=1,l=!0;else if(s=tf(t,e))i.n===il&&t.error("{{else}} not allowed in {{#unless}}"),a&&t.error("illegal {{elseif...}} after {{else}}"),h||(h=wn(r,i.n)),h.f.push({t:Oc,n:rl,x:rn(xn(c.concat(s.x))),f:o=[]}),c.push(bn(s.x));else if(s=Jl(t,e))i.n===il&&t.error("{{else}} not allowed in {{#unless}}"),a&&t.error("there can only be one {{else}} block, at the end of a section"),a=!0,h?h.f.push({t:Oc,n:rl,x:rn(xn(c)),f:o=[]}):(h=wn(r,i.n),o=h.f);else{if(s=t.read(Jf),!s)break;o.push(s)}while(!l);return h&&(i.n===ol&&(i.n=al),i.l=h),on(r,i),i.f.length||delete i.f,i}function wn(t,e){var n;return e===ol?(n={t:Oc,n:rl,f:[]},on(bn(t),n)):(n={t:Oc,n:il,f:[]},on(t,n)),n}function bn(t){return t.t===Jc&&"!"===t.s?t.o:{t:Jc,s:"!",o:kn(t)}}function xn(t){return 1===t.length?t[0]:{t:el,s:"&&",o:[kn(t[0]),kn(xn(t.slice(1)))]}}function kn(t){return{t:Xc,x:t}}function En(t){var e,n,r,i,s;return e=t.pos,t.matchString(af)?(r=t.remaining(),i=r.indexOf(uf),-1===i&&t.error("Illegal HTML - expected closing comment sequence ('-->')"),n=r.substr(0,i),t.pos+=i+3,s={t:Rc,c:n},t.includeLinePositions&&(s.p=t.getLinePos(e)),s):null}function _n(t){return t.replace($l,function(t,e){var n;return n="#"!==e[0]?zl[e]:"x"===e[1]?parseInt(e.substring(2),16):parseInt(e.substring(1),10),n?String.fromCharCode(An(n)):t})}function An(t){return t?10===t?32:128>t?t:159>=t?Bl[t-128]:55296>t?t:57343>=t?65533:65535>=t?t:65533:65533}function Sn(t){return t.replace(Zl,"&amp;").replace(ql,"&lt;").replace(Ql,"&gt;")}function Cn(t){return"string"==typeof t}function On(t){return t.t===Rc||t.t===Nc}function Pn(t){return(t.t===Oc||t.t===Pc)&&t.f}function Tn(t,e,n,r,i){var o,a,u,h,c,l,f,d;for(yf(t),o=t.length;o--;)a=t[o],a.exclude?t.splice(o,1):e&&a.t===Rc&&t.splice(o,1);for(xf(t,r,i),o=t.length;o--;){if(a=t[o],a.f&&(c=n||a.t===Fc&&Ef.test(a.e),c||(u=t[o-1],h=t[o+1],(!u||"string"==typeof u&&Af.test(u))&&(l=!0),(!h||"string"==typeof h&&_f.test(h))&&(f=!0)),Tn(a.f,e,c,l,f)),a.l&&(Tn(a.l.f,e,n,l,f),t.splice(o+1,0,a.l),delete a.l),a.a)for(d in a.a)a.a.hasOwnProperty(d)&&"string"!=typeof a.a[d]&&Tn(a.a[d],e,n,l,f);if(a.m&&Tn(a.m,e,n,l,f),a.v)for(d in a.v)a.v.hasOwnProperty(d)&&(s(a.v[d].n)&&Tn(a.v[d].n,e,n,l,f),s(a.v[d].d)&&Tn(a.v[d].d,e,n,l,f))}for(o=t.length;o--;)"string"==typeof t[o]&&("string"==typeof t[o+1]&&(t[o]=t[o]+t[o+1],t.splice(o+1,1)),n||(t[o]=t[o].replace(kf," ")),""===t[o]&&t.splice(o,1))}function Fn(t){var e,n;return e=t.pos,t.matchString("</")?(n=t.matchPattern(Sf))?t.inside&&n!==t.inside?(t.pos=e,null):{t:Dc,e:n}:(t.pos-=2,void t.error("Illegal closing tag")):null}function jn(t){var e,n,r;return t.allowWhitespace(),(n=t.matchPattern(Of))?(e={name:n},r=Rn(t),null!=r&&(e.value=r),e):null}function Rn(t){var e,n,r,i;return e=t.pos,/[=\/>\s]/.test(t.nextChar())||t.error("Expected `=`, `/`, `>` or whitespace"),t.allowWhitespace(),t.matchString("=")?(t.allowWhitespace(),n=t.pos,r=t.sectionDepth,i=Dn(t,"'")||Dn(t,'"')||Ln(t),null===i&&t.error("Expected valid attribute value"),t.sectionDepth!==r&&(t.pos=n,t.error("An attribute value must contain as many opening section tags as closing section tags")),i.length?1===i.length&&"string"==typeof i[0]?_n(i[0]):i:""):(t.pos=e,null)}function Nn(t){var e,n,r,i,s;return e=t.pos,(n=t.matchPattern(Pf))?(r=n,i=t.tags.map(function(t){return t.open}),-1!==(s=Cf(r,i))&&(n=n.substr(0,s),t.pos=e+n.length),n):null}function Ln(t){var e,n;for(t.inAttribute=!0,e=[],n=Be(t)||Nn(t);null!==n;)e.push(n),n=Be(t)||Nn(t);return e.length?(t.inAttribute=!1,e):null}function Dn(t,e){var n,r,i;if(n=t.pos,!t.matchString(e))return null;for(t.inAttribute=e,r=[],i=Be(t)||In(t,e);null!==i;)r.push(i),i=Be(t)||In(t,e);return t.matchString(e)?(t.inAttribute=!1,r):(t.pos=n,null)}function In(t,e){var n,r,i,s;return n=t.pos,i=t.remaining(),s=t.tags.map(function(t){return t.open}),s.push(e),r=Cf(i,s),-1===r&&t.error("Quoted attribute value must have a closing quote"),r?(t.pos+=r,i.substr(0,r)):null}function Vn(t){var e,n,r;return t.allowWhitespace(),(e=Ze(t))?(r={key:e},t.allowWhitespace(),t.matchString(":")?(t.allowWhitespace(),(n=t.read())?(r.value=n.v,r):null):null):null}function Wn(t,e){var n,r,i,s,o,a,u,h,c;if("string"==typeof t){if(r=jf.exec(t)){var l=t.lastIndexOf(")");return Rf.test(t)||e.error("Invalid input after method call expression '"+t.slice(l+1)+"'"),n={m:r[1]},s="["+t.slice(n.m.length+1,l)+"]",i=new Tf(s),n.a=rn(i.result[0]),n}if(-1===t.indexOf(":"))return t.trim();t=[t]}if(n={},u=[],h=[],t){for(;t.length;)if(o=t.shift(),"string"==typeof o){if(a=o.indexOf(":"),-1!==a){a&&u.push(o.substr(0,a)),o.length>a+1&&(h[0]=o.substring(a+1));break}u.push(o)}else u.push(o);h=h.concat(t)}return u.length?h.length||"string"!=typeof u?(n={n:1===u.length&&"string"==typeof u[0]?u[0]:u},1===h.length&&"string"==typeof h[0]?(c=Ff("["+h[0]+"]"),n.a=c?c.value:h[0].trim()):n.d=h):n=u:n="",n}function Un(t){var e,n,r,i,s,o,a,u,h,c,l,f,d,p,m,v;if(e=t.pos,t.inside||t.inAttribute)return null;if(!t.matchString("<"))return null;if("/"===t.nextChar())return null;if(n={},t.includeLinePositions&&(n.p=t.getLinePos(e)),t.matchString("!"))return n.t=Uc,t.matchPattern(/^doctype/i)||t.error("Expected DOCTYPE declaration"),n.a=t.matchPattern(/^(.+?)>/),n;if(n.t=Fc,n.e=t.matchPattern(Lf),!n.e)return null;for(Df.test(t.nextChar())||t.error("Illegal tag name"),s=function(e,r){var i=r.n||r;Wf.test(i)&&(t.pos-=i.length,t.error("Cannot use reserved event names (change, reset, teardown, update, construct, config, init, render, unrender, detach, insert)")),n.v[e]=r},t.allowWhitespace();o=Be(t)||jn(t);)o.name?(r=Uf[o.name])?n[r]=Wn(o.value,t):(i=Vf.exec(o.name))?(n.v||(n.v={}),a=Wn(o.value,t),s(i[1],a)):t.sanitizeEventAttributes&&If.test(o.name)||(n.a||(n.a={}),n.a[o.name]=o.value||(""===o.value?"":0)):(n.m||(n.m=[]),n.m.push(o)),t.allowWhitespace();if(t.allowWhitespace(),t.matchString("/")&&(u=!0),!t.matchString(">"))return null;var g=n.e.toLowerCase(),y=t.preserveWhitespace;if(!u&&!Ml.test(n.e)){t.elementStack.push(g),("script"===g||"style"===g)&&(t.inside=g),h=[],c=Eu(null);do if(p=t.pos,m=t.remaining(),Mn(g,m))if(v=Fn(t)){d=!0;var w=v.e.toLowerCase();if(w!==g&&(t.pos=p,!~t.elementStack.indexOf(w))){var b="Unexpected closing tag";Ml.test(w)&&(b+=" (<"+w+"> is a void element - it cannot contain children)"),t.error(b)}}else(f=mn(t,{open:t.standardDelimiters[0],close:t.standardDelimiters[1]}))?(d=!0,t.pos=p):(f=t.read(Xf))?(c[f.n]&&(t.pos=p,t.error("Duplicate partial definition")),Tn(f.f,t.stripComments,y,!y,!y),c[f.n]=f.f,l=!0):(f=t.read(Jf))?h.push(f):d=!0;else d=!0;while(!d);h.length&&(n.f=h),l&&(n.p=c),t.elementStack.pop()}return t.inside=null,t.sanitizeElements&&-1!==t.sanitizeElements.indexOf(g)?Mf:n}function Mn(t,e){var n,r;return n=/^<([a-zA-Z][a-zA-Z0-9]*)/.exec(e),r=Nf[t],n&&r?!~r.indexOf(n[1].toLowerCase()):!0}function zn(t){var e,n,r,i;return n=t.remaining(),i=t.inside?"</"+t.inside:"<",t.inside&&!t.interpolate[t.inside]?e=n.indexOf(i):(r=t.tags.map(function(t){return t.open}),r=r.concat(t.tags.map(function(t){return"\\"+t.open})),t.inAttribute===!0?r.push('"',"'","=","<",">","`"):r.push(t.inAttribute?t.inAttribute:i),e=Cf(n,r)),e?(-1===e&&(e=n.length),t.pos+=e,t.inside?n.substr(0,e):_n(n.substr(0,e))):null}function Bn(t){return t.replace(Bf,"\\$&")}function $n(t){var e=t.pos,n=t.standardDelimiters[0],r=t.standardDelimiters[1],i=void 0,s=void 0;if(!t.matchPattern($f)||!t.matchString(n))return t.pos=e,null;var o=t.matchPattern(qf);if(v("Inline partial comments are deprecated.\nUse this...\n  {{#partial "+o+"}} ... {{/partial}}\n\n...instead of this:\n  <!-- {{>"+o+"}} --> ... <!-- {{/"+o+"}} -->'"),!t.matchString(r)||!t.matchPattern(Qf))return t.pos=e,null;i=[];var a=new RegExp("^<!--\\s*"+Bn(n)+"\\s*\\/\\s*"+o+"\\s*"+Bn(r)+"\\s*-->");do t.matchPattern(a)?s=!0:(zf=t.read(Jf),zf||t.error("expected closing comment ('<!-- "+n+"/"+o+r+" -->')"),i.push(zf));while(!s);return{t:Wc,f:i,n:o}}function qn(t){var e,n,r,i,s;e=t.pos;var o=t.standardDelimiters;if(!t.matchString(o[0]))return null;if(!t.matchPattern(Zf))return t.pos=e,null;n=t.matchPattern(/^[a-zA-Z_$][a-zA-Z_$0-9\-]*/),n||t.error("expected legal partial name"),t.matchString(o[1])||t.error("Expected closing delimiter '"+o[1]+"'"),r=[];do(i=mn(t,{open:t.standardDelimiters[0],close:t.standardDelimiters[1]}))?("partial"===!i.r&&t.error("Expected "+o[0]+"/partial"+o[1]),s=!0):(i=t.read(Jf),i||t.error("Expected "+o[0]+"/partial"+o[1]),r.push(i));while(!s);return{t:Wc,n:n,f:r}}function Qn(t){for(var e=[],n=Eu(null),r=!1,i=t.preserveWhitespace;t.pos<t.str.length;){var s=t.pos,o=void 0,a=void 0;(a=t.read(Xf))?(n[a.n]&&(t.pos=s,t.error("Duplicated partial definition")),Tn(a.f,t.stripComments,i,!i,!i),n[a.n]=a.f,r=!0):(o=t.read(Jf))?e.push(o):t.error("Unexpected template content")}var u={v:su,t:e};return r&&(u.p=n),u}function Zn(t,e){return new Yf(t,e||{}).result
}function Hn(t){var e=Eu(id);return e.parse=function(e,n){return Kn(e,n||t)},e}function Kn(t,e){if(!Zn)throw new Error("Missing Ractive.parse - cannot parse template. Either preparse or use the version that includes the parser");return Zn(t,e||this.options)}function Gn(t,e){var n;if(!Ja){if(e&&e.noThrow)return;throw new Error("Cannot retrieve template #"+t+" as Ractive is not running in a browser.")}if(Yn(t)&&(t=t.substring(1)),!(n=document.getElementById(t))){if(e&&e.noThrow)return;throw new Error("Could not find template element with id #"+t)}if("SCRIPT"!==n.tagName.toUpperCase()){if(e&&e.noThrow)return;throw new Error("Template element with id #"+t+", must be a <script> element")}return n.textContent}function Yn(t){return t&&"#"===t.charAt(0)}function Jn(t){return!("string"==typeof t)}function Xn(t){return t.defaults&&(t=t.defaults),rd.reduce(function(e,n){return e[n]=t[n],e},{})}function tr(t){var e,n=t._config.template;if(n&&n.fn)return e=er(t,n.fn),e!==n.result?(n.result=e,e=rr(e,t)):void 0}function er(t,e){var n=nr(sd.getParseOptions(t));return e.call(t,n)}function nr(t){var e=Eu(sd);return e.parse=function(e,n){return sd.parse(e,n||t)},e}function rr(t,e){if("string"==typeof t)"#"===t[0]&&(t=sd.fromId(t)),t=Zn(t,sd.getParseOptions(e));else{if("number"!=typeof t.v)throw new Error("The template parser was passed a non-string template, but the template doesn't have a version.  Make sure you're passing in the template you think you are.");if(t.v!==su)throw new Error("Mismatched template version (expected "+su+", got "+t.v+") Please ensure you are using the latest version of Ractive.js in your build process as well as in your app")}return t}function ir(t,e,n){if(e)for(var r in e)(n||!t.hasOwnProperty(r))&&(t[r]=e[r])}function sr(t,e,n){if(!/_super/.test(n))return n;var r=function(){var t,i=or(r._parent,e),s="_super"in this,o=this._super;return this._super=i,t=n.apply(this,arguments),s?this._super=o:delete this._super,t};return r._parent=t,r._method=n,r}function or(t,e){var n,r;return e in t?(n=t[e],r="function"==typeof n?n:function(){return n}):r=ku,r}function ar(t,e,n){return"options."+t+" has been deprecated in favour of options."+e+"."+(n?" You cannot specify both options, please use options."+e+".":"")}function ur(t,e,n){if(e in t){if(n in t)throw new Error(ar(e,n,!0));m(ar(e,n)),t[n]=t[e]}}function hr(t){ur(t,"beforeInit","onconstruct"),ur(t,"init","onrender"),ur(t,"complete","oncomplete"),ur(t,"eventDefinitions","events"),s(t.adaptors)&&ur(t,"adaptors","adapt")}function cr(t,e,n,r){hr(r);for(var i in r)if(fd[i]){var s=r[i];"function"==typeof s&&(s=dd(e.prototype,i,s)),n[i]=s}nd.forEach(function(i){i[t](e,n,r)}),fc[t](e,n,r),od[t](e,n,r),wc[t](e,n,r),lr(e.prototype,n,r)}function lr(t,e,n){for(var r in n)if(!ld[r]&&n.hasOwnProperty(r)){var i=n[r];"function"==typeof i&&(i=dd(t,r,i)),e[r]=i}}function fr(t){var e={};return t.forEach(function(t){return e[t]=!0}),e}function dr(){this.dirtyValue=this.dirtyArgs=!0,this.bound&&"function"==typeof this.owner.bubble&&this.owner.bubble()}function pr(){var t;return 1===this.items.length?this.items[0].detach():(t=document.createDocumentFragment(),this.items.forEach(function(e){var n=e.detach();n&&t.appendChild(n)}),t)}function mr(t){var e,n,r,i;if(this.items){for(n=this.items.length,e=0;n>e;e+=1)if(r=this.items[e],r.find&&(i=r.find(t)))return i;return null}}function vr(t,e){var n,r,i;if(this.items)for(r=this.items.length,n=0;r>n;n+=1)i=this.items[n],i.findAll&&i.findAll(t,e);return e}function gr(t,e){var n,r,i;if(this.items)for(r=this.items.length,n=0;r>n;n+=1)i=this.items[n],i.findAllComponents&&i.findAllComponents(t,e);return e}function yr(t){var e,n,r,i;if(this.items){for(e=this.items.length,n=0;e>n;n+=1)if(r=this.items[n],r.findComponent&&(i=r.findComponent(t)))return i;return null}}function wr(t){var e,n=t.index;return e=this.items[n+1]?this.items[n+1].firstNode():this.owner===this.root?this.owner.component?this.owner.component.findNextNode():null:this.owner.findNextNode(this)}function br(){return this.items&&this.items[0]?this.items[0].firstNode():null}function xr(t,e,n,r){return r=r||0,t.map(function(t){var i,s,o;return t.text?t.text:t.fragments?t.fragments.map(function(t){return xr(t.items,e,n,r)}).join(""):(i=n+"-"+r++,o=t.keypath&&(s=t.root.viewmodel.wrapped[t.keypath.str])?s.value:t.getValue(),e[i]=o,"${"+i+"}")}).join("")}function kr(){var t,e,n,r;return this.dirtyArgs&&(e=xr(this.items,t={},this.root._guid),n=Ff("["+e+"]",t),r=n?n.value:[this.toString()],this.argsList=r,this.dirtyArgs=!1),this.argsList}function Er(){var t=this;do if(t.pElement)return t.pElement.node;while(t=t.parent);return this.root.detached||this.root.el}function _r(){var t,e,n,r;return this.dirtyValue&&(e=xr(this.items,t={},this.root._guid),n=Ff(e,t),r=n?n.value:this.toString(),this.value=r,this.dirtyValue=!1),this.value}function Ar(){this.registered&&this.root.viewmodel.unregister(this.keypath,this),this.resolver&&this.resolver.unbind()}function Sr(){return this.value}function Cr(t,e){for(var n,r=0;r<e.prop.length;r++)if(void 0!==(n=t[e.prop[r]]))return n}function Or(t,e){var n,r,i,s,o,a={},u=!1;for(e||(a.refs=n={});t;){if((o=t.owner)&&(r=o.indexRefs)){if(e&&(i=o.getIndexRef(e)))return a.ref={fragment:t,ref:i},a;if(!e)for(s in r)i=r[s],n[i.n]||(u=!0,n[i.n]={fragment:t,ref:i})}!t.parent&&t.owner&&t.owner.component&&t.owner.component.parentFragment&&!t.owner.component.instance.isolated?(a.componentBoundary=!0,t=t.owner.component.parentFragment):t=t.parent}return u?a:void 0}function Pr(t,e,n){var r;return"@"===e.charAt(0)?new Td(t,e,n):(r=Or(t.parentFragment,e))?new jd(t,r,n):new Pd(t,e,n)}function Tr(t,e){var n,r;if(Nd[t])return Nd[t];for(r=[];e--;)r[e]="_"+e;return n=new Function(r.join(","),"return("+t+")"),Nd[t]=n,n}function Fr(t){return t.call()}function jr(t,e){return t.replace(/_([0-9]+)/g,function(t,n){var r,i;return+n>=e.length?"_"+n:(r=e[n],void 0===r?"undefined":r.isSpecial?(i=r.value,"number"==typeof i?i:'"'+i+'"'):r.str)})}function Rr(t){return _("${"+t.replace(/[\.\[\]]/g,"-").replace(/\*/,"#MUL#")+"}")}function Nr(t){return void 0!==t&&"@"!==t[0]}function Lr(t,e){var n,r,i;if(t.__ractive_nowrap)return t;if(r="__ractive_"+e._guid,n=t[r])return n;if(/this/.test(t.toString())){_u(t,r,{value:Ld.call(t,e),configurable:!0});for(i in t)t.hasOwnProperty(i)&&(t[r][i]=t[i]);return e._boundFunctions.push({fn:t,prop:r}),t[r]}return _u(t,"__ractive_nowrap",{value:t}),t.__ractive_nowrap}function Dr(t){return t.value}function Ir(t){return void 0!=t}function Vr(t){t.forceResolution()}function Wr(t,e){function n(e){t.resolve(e)}function r(e){var n=t.keypath;e!=n&&(t.resolve(e),void 0!==n&&t.fragments&&t.fragments.forEach(function(t){t.rebind(n,e)}))}var i,s,o;s=e.parentFragment,o=e.template,t.root=s.root,t.parentFragment=s,t.pElement=s.pElement,t.template=e.template,t.index=e.index||0,t.isStatic=e.template.s,t.type=e.template.t,t.registered=!1,(i=o.r)&&(t.resolver=Pr(t,i,n)),e.template.x&&(t.resolver=new Rd(t,s,e.template.x,r)),e.template.rx&&(t.resolver=new Id(t,e.template.rx,r)),t.template.n!==il||t.hasOwnProperty("value")||t.setValue(void 0)}function Ur(t){var e,n,r;return t&&t.isSpecial?(this.keypath=t,void this.setValue(t.value)):(this.registered&&(this.root.viewmodel.unregister(this.keypath,this),this.registered=!1,e=!0),this.keypath=t,void 0!=t&&(n=this.root.viewmodel.get(t),this.root.viewmodel.register(t,this),this.registered=!0),this.setValue(n),void(e&&(r=this.twowayBinding)&&r.rebound()))}function Mr(t,e){this.fragments&&this.fragments.forEach(function(n){return n.rebind(t,e)}),this.resolver&&this.resolver.rebind(t,e)}function zr(){this.parentFragment.bubble()}function Br(){var t;return 1===this.fragments.length?this.fragments[0].detach():(t=document.createDocumentFragment(),this.fragments.forEach(function(e){t.appendChild(e.detach())}),t)}function $r(t){var e,n,r;for(n=this.fragments.length,e=0;n>e;e+=1)if(r=this.fragments[e].find(t))return r;return null}function qr(t,e){var n,r;for(r=this.fragments.length,n=0;r>n;n+=1)this.fragments[n].findAll(t,e)}function Qr(t,e){var n,r;for(r=this.fragments.length,n=0;r>n;n+=1)this.fragments[n].findAllComponents(t,e)}function Zr(t){var e,n,r;for(n=this.fragments.length,e=0;n>e;e+=1)if(r=this.fragments[e].findComponent(t))return r;return null}function Hr(t){return this.fragments[t.index+1]?this.fragments[t.index+1].firstNode():this.parentFragment.findNextNode(this)}function Kr(){var t,e,n;if(t=this.fragments.length)for(e=0;t>e;e+=1)if(n=this.fragments[e].firstNode())return n;return this.parentFragment.findNextNode(this)}function Gr(t){var e,n,r,i,s,o,a,u=this;if(!this.shuffling&&!this.unbound&&this.currentSubtype===sl){if(this.shuffling=!0,oh.scheduleTask(function(){return u.shuffling=!1}),e=this.parentFragment,s=[],t.forEach(function(t,e){var r,i,o,a,h;return t===e?void(s[t]=u.fragments[e]):(r=u.fragments[e],void 0===n&&(n=e),-1===t?(u.fragmentsToUnrender.push(r),void r.unbind()):(i=t-e,o=u.keypath.join(e),a=u.keypath.join(t),r.index=t,(h=r.registeredIndexRefs)&&h.forEach(Yr),r.rebind(o,a),void(s[t]=r)))}),i=this.root.viewmodel.get(this.keypath).length,void 0===n){if(this.length===i)return;n=this.length}for(this.length=this.fragments.length=i,this.rendered&&oh.addView(this),o={template:this.template.f,root:this.root,owner:this},r=n;i>r;r+=1)a=s[r],a||this.fragmentsToCreate.push(r),this.fragments[r]=a}}function Yr(t){t.rebind("","")}function Jr(){var t=this;return this.docFrag=document.createDocumentFragment(),this.fragments.forEach(function(e){return t.docFrag.appendChild(e.render())}),this.renderedFragments=this.fragments.slice(),this.fragmentsToRender=[],this.rendered=!0,this.docFrag}function Xr(t){var e,n,r=this;this.updating||(this.updating=!0,this.keypath&&(e=this.root.viewmodel.wrapped[this.keypath.str])&&(t=e.get()),this.fragmentsToCreate.length?(n={template:this.template.f||[],root:this.root,pElement:this.pElement,owner:this},this.fragmentsToCreate.forEach(function(t){var e;n.context=r.keypath.join(t),n.index=t,e=new oy(n),r.fragmentsToRender.push(r.fragments[t]=e)}),this.fragmentsToCreate.length=0):ei(this,t)&&(this.bubble(),this.rendered&&oh.addView(this)),this.value=t,this.updating=!1)}function ti(t,e,n){if(e===sl&&t.indexRefs&&t.indexRefs[0]){var r=t.indexRefs[0];(n&&"i"===r.t||!n&&"k"===r.t)&&(n||(t.length=0,t.fragmentsToUnrender=t.fragments.slice(0),t.fragmentsToUnrender.forEach(function(t){return t.unbind()}))),r.t=n?"k":"i"}t.currentSubtype=e}function ei(t,e){var n={template:t.template.f||[],root:t.root,pElement:t.parentFragment.pElement,owner:t};if(t.hasContext=!0,t.subtype)switch(t.subtype){case rl:return t.hasContext=!1,oi(t,e,!1,n);case il:return t.hasContext=!1,oi(t,e,!0,n);case ol:return si(t,n);case al:return ii(t,e,n);case sl:if(h(e))return ti(t,t.subtype,!0),ri(t,e,n)}return t.ordered=!!o(e),t.ordered?(ti(t,sl,!1),ni(t,e,n)):h(e)||"function"==typeof e?t.template.i?(ti(t,sl,!0),ri(t,e,n)):(ti(t,ol,!1),si(t,n)):(ti(t,rl,!1),t.hasContext=!1,oi(t,e,!1,n))}function ni(t,e,n){var r,i,s;if(i=e.length,i===t.length)return!1;if(i<t.length)t.fragmentsToUnrender=t.fragments.splice(i,t.length-i),t.fragmentsToUnrender.forEach(Z);else if(i>t.length)for(r=t.length;i>r;r+=1)n.context=t.keypath.join(r),n.index=r,s=new oy(n),t.fragmentsToRender.push(t.fragments[r]=s);return t.length=i,!0}function ri(t,e,n){var r,i,s,o,a,u;for(s=t.hasKey||(t.hasKey={}),i=t.fragments.length;i--;)o=t.fragments[i],o.key in e||(a=!0,o.unbind(),t.fragmentsToUnrender.push(o),t.fragments.splice(i,1),s[o.key]=!1);for(i=t.fragments.length;i--;)o=t.fragments[i],o.index!==i&&(o.index=i,(u=o.registeredIndexRefs)&&u.forEach(hi));i=t.fragments.length;for(r in e)s[r]||(a=!0,n.context=t.keypath.join(r),n.key=r,n.index=i++,o=new oy(n),t.fragmentsToRender.push(o),t.fragments.push(o),s[r]=!0);return t.length=t.fragments.length,a}function ii(t,e,n){return e?si(t,n):ai(t)}function si(t,e){var n;return t.length?void 0:(e.context=t.keypath,e.index=0,n=new oy(e),t.fragmentsToRender.push(t.fragments[0]=n),t.length=1,!0)}function oi(t,e,n,r){var i,s,a,u,c;if(s=o(e)&&0===e.length,a=!1,!o(e)&&h(e)){a=!0;for(c in e){a=!1;break}}return i=n?s||a||!e:e&&!s&&!a,i?t.length?t.length>1?(t.fragmentsToUnrender=t.fragments.splice(1),t.fragmentsToUnrender.forEach(Z),!0):void 0:(r.index=0,u=new oy(r),t.fragmentsToRender.push(t.fragments[0]=u),t.length=1,!0):ai(t)}function ai(t){return t.length?(t.fragmentsToUnrender=t.fragments.splice(0,t.fragments.length).filter(ui),t.fragmentsToUnrender.forEach(Z),t.length=t.fragmentsToRender.length=0,!0):void 0}function ui(t){return t.rendered}function hi(t){t.rebind("","")}function ci(t){var e,n,r;for(e="",n=0,r=this.length,n=0;r>n;n+=1)e+=this.fragments[n].toString(t);return e}function li(){var t=this;this.fragments.forEach(Z),this.fragmentsToRender.forEach(function(e){return D(t.fragments,e)}),this.fragmentsToRender=[],Cd.call(this),this.length=0,this.unbound=!0}function fi(t){this.fragments.forEach(t?di:pi),this.renderedFragments=[],this.rendered=!1}function di(t){t.unrender(!0)}function pi(t){t.unrender(!1)}function mi(){var t,e,n,r,i,s,o;for(n=this.renderedFragments;t=this.fragmentsToUnrender.pop();)t.unrender(!0),n.splice(n.indexOf(t),1);for(;t=this.fragmentsToRender.shift();)t.render();for(this.rendered&&(i=this.parentFragment.getNode()),o=this.fragments.length,s=0;o>s;s+=1)t=this.fragments[s],e=n.indexOf(t,s),e!==s?(this.docFrag.appendChild(t.detach()),-1!==e&&n.splice(e,1),n.splice(s,0,t)):this.docFrag.childNodes.length&&(r=t.firstNode(),i.insertBefore(this.docFrag,r));this.rendered&&this.docFrag.childNodes.length&&(r=this.parentFragment.findNextNode(this),i.insertBefore(this.docFrag,r)),this.renderedFragments=this.fragments.slice()}function vi(){var t,e;if(this.docFrag){for(t=this.nodes.length,e=0;t>e;e+=1)this.docFrag.appendChild(this.nodes[e]);return this.docFrag}}function gi(t){var e,n,r,i;for(n=this.nodes.length,e=0;n>e;e+=1)if(r=this.nodes[e],1===r.nodeType){if(lu(r,t))return r;if(i=r.querySelector(t))return i}return null}function yi(t,e){var n,r,i,s,o,a;for(r=this.nodes.length,n=0;r>n;n+=1)if(i=this.nodes[n],1===i.nodeType&&(lu(i,t)&&e.push(i),s=i.querySelectorAll(t)))for(o=s.length,a=0;o>a;a+=1)e.push(s[a])}function wi(){return this.rendered&&this.nodes[0]?this.nodes[0]:this.parentFragment.findNextNode(this)}function bi(t){return fp[t]||(fp[t]=cu(t))}function xi(t){var e,n,r;t&&"select"===t.name&&t.binding&&(e=I(t.node.options).filter(ki),t.getAttribute("multiple")?r=e.map(function(t){return t.value}):(n=e[0])&&(r=n.value),void 0!==r&&t.binding.setValue(r),t.bubble())}function ki(t){return t.selected}function Ei(){if(this.rendered)throw new Error("Attempted to render an item that was already rendered");return this.docFrag=document.createDocumentFragment(),this.nodes=dp(this.value,this.parentFragment.getNode(),this.docFrag),xi(this.pElement),this.rendered=!0,this.docFrag}function _i(t){var e;(e=this.root.viewmodel.wrapped[this.keypath.str])&&(t=e.get()),t!==this.value&&(this.value=t,this.parentFragment.bubble(),this.rendered&&oh.addView(this))}function Ai(){return void 0!=this.value?_n(""+this.value):""}function Si(t){this.rendered&&t&&(this.nodes.forEach(e),this.rendered=!1)}function Ci(){var t,e;if(this.rendered){for(;this.nodes&&this.nodes.length;)t=this.nodes.pop(),t.parentNode.removeChild(t);e=this.parentFragment.getNode(),this.nodes=dp(this.value,e,this.docFrag),e.insertBefore(this.docFrag,this.parentFragment.findNextNode(this)),xi(this.pElement)}}function Oi(){var t,e=this.node;return e?((t=e.parentNode)&&t.removeChild(e),e):void 0}function Pi(){return null}function Ti(){return this.node}function Fi(t){return this.attributes&&this.attributes[t]?this.attributes[t].value:void 0}function ji(){var t=this.useProperty||!this.rendered?this.fragment.getValue():this.fragment.toString();a(t,this.value)||("id"===this.name&&this.value&&delete this.root.nodes[this.value],this.value=t,"value"===this.name&&this.node&&(this.node._ractive.value=t),this.rendered&&oh.addView(this))}function Ri(t){var e=t.fragment.items;if(1===e.length)return e[0].type===Sc?e[0]:void 0}function Ni(t){return this.type=Lc,this.element=t.element,this.root=t.root,Vp(this,t.name),this.isBoolean=Ul.test(this.name),t.value&&"string"!=typeof t.value?(this.parentFragment=this.element.parentFragment,this.fragment=new oy({template:t.value,root:this.root,owner:this}),this.value=this.fragment.getValue(),this.interpolator=Ri(this),this.isBindable=!!this.interpolator&&!this.interpolator.isStatic,void(this.ready=!0)):void(this.value=this.isBoolean?!0:t.value||"")}function Li(t,e){this.fragment&&this.fragment.rebind(t,e)}function Di(t){var e;this.node=t,t.namespaceURI&&t.namespaceURI!==nu.html||(e=zp[this.name]||this.name,void 0!==t[e]&&(this.propertyName=e),(this.isBoolean||this.isTwoway)&&(this.useProperty=!0),"value"===e&&(t._ractive.value=this.value)),this.rendered=!0,this.update()}function Ii(){var t=this,e=t.name,n=t.namespacePrefix,r=t.value,i=t.interpolator,s=t.fragment;if(("value"!==e||"select"!==this.element.name&&"textarea"!==this.element.name)&&("value"!==e||void 0===this.element.getAttribute("contenteditable"))){if("name"===e&&"input"===this.element.name&&i)return"name={{"+(i.keypath.str||i.ref)+"}}";if(this.isBoolean)return r?e:"";if(s){if(1===s.items.length&&null==s.items[0].value)return"";r=s.toString()}return n&&(e=n+":"+e),r?e+'="'+Vi(r)+'"':e}}function Vi(t){return t.replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&#39;")}function Wi(){this.fragment&&this.fragment.unbind(),"id"===this.name&&delete this.root.nodes[this.value]}function Ui(){var t,e,n,r,i=this.value;if(!this.locked)for(this.node._ractive.value=i,t=this.node.options,r=t.length;r--;)if(e=t[r],n=e._ractive?e._ractive.value:e.value,n==i){e.selected=!0;break}}function Mi(){var t,e,n,r,i=this.value;for(s(i)||(i=[i]),t=this.node.options,e=t.length;e--;)n=t[e],r=n._ractive?n._ractive.value:n.value,n.selected=j(i,r)}function zi(){var t=this,e=t.node,n=t.value;e.checked=n==e._ractive.value}function Bi(){var t,e,n,r,i=this.node;if(t=i.checked,i.value=this.element.getAttribute("value"),i.checked=this.element.getAttribute("value")===this.element.getAttribute("name"),t&&!i.checked&&this.element.binding&&(n=this.element.binding.siblings,r=n.length)){for(;r--;){if(e=n[r],!e.element.node)return;if(e.element.node.checked)return oh.addRactive(e.root),e.handleChange()}this.root.viewmodel.set(e.keypath,void 0)}}function $i(){var t,e,n=this,r=n.element,i=n.node,o=n.value,a=r.binding;if(t=r.getAttribute("value"),s(o)){for(e=o.length;e--;)if(t==o[e])return void(a.isChecked=i.checked=!0);a.isChecked=i.checked=!1}else a.isChecked=i.checked=o==t}function qi(){this.node.className=n(this.value)}function Qi(){var t=this,e=t.node,n=t.value;this.root.nodes[n]=e,e.id=n}function Zi(){var t,e;t=this.node,e=this.value,void 0===e&&(e=""),t.style.setAttribute("cssText",e)}function Hi(){var t=this.value;void 0===t&&(t=""),this.locked||(this.node.innerHTML=t)}function Ki(){var t=this,e=t.node,n=t.value;e._ractive.value=n,this.locked||(e.value=void 0==n?"":n)}function Gi(){this.locked||(this.node[this.propertyName]=this.value)}function Yi(){var t=this,e=t.node,n=t.namespace,r=t.name,i=t.value,s=t.fragment;n?e.setAttributeNS(n,r,(s||i).toString()):this.isBoolean?i?e.setAttribute(r,""):e.removeAttribute(r):null==i?e.removeAttribute(r):e.setAttribute(r,(s||i).toString())}function Ji(){var t,e,n=this,r=n.name,i=n.element,s=n.node;"id"===r?e=Yp:"value"===r?"select"===i.name&&"value"===r?e=i.getAttribute("multiple")?Qp:qp:"textarea"===i.name?e=tm:null!=i.getAttribute("contenteditable")?e=Xp:"input"===i.name&&(t=i.getAttribute("type"),e="file"===t?ku:"radio"===t&&i.binding&&"name"===i.binding.name?Hp:tm):this.isTwoway&&"name"===r?"radio"===s.type?e=Zp:"checkbox"===s.type&&(e=Kp):"style"===r&&s.style.setAttribute?e=Jp:"class"!==r||s.namespaceURI&&s.namespaceURI!==nu.html?this.useProperty&&(e=em):e=Gp,e||(e=nm),this.update=e,this.update()}function Xi(t,e){var n=e?"svg":"div";return sm.innerHTML="<"+n+" "+t+"></"+n+">",I(sm.childNodes[0].attributes)}function ts(t,e){for(var n=t.length;n--;)if(t[n].name===e.name)return!1;return!0}function es(t){for(;t=t.parent;)if("form"===t.name)return t}function ns(){this._ractive.binding.handleChange()}function rs(t,e,n){var r=t+e+n;return pm[r]||(pm[r]=[])}function is(t){return t.isChecked}function ss(t){return t.element.getAttribute("value")}function os(){var t;fm.call(this),t=this._ractive.root.viewmodel.get(this._ractive.binding.keypath),this.value=void 0==t?"":t}function as(){var t=this._ractive.binding,e=this;t._timeout&&clearTimeout(t._timeout),t._timeout=setTimeout(function(){t.rendered&&fm.call(e),t._timeout=void 0},t.element.lazy)}function us(t){var e,n,r,i,s,o=t.attributes;return t.binding&&(t.binding.teardown(),t.binding=null),(t.getAttribute("contenteditable")||o.contenteditable&&hs(o.contenteditable))&&hs(o.value)?n=dm:"input"===t.name?(e=t.getAttribute("type"),"radio"===e||"checkbox"===e?(r=hs(o.name),i=hs(o.checked),r&&i&&m("A radio input can have two-way binding on its name attribute, or its checked attribute - not both",{ractive:t.root}),r?n="radio"===e?vm:gm:i&&(n="radio"===e?mm:ym)):"file"===e&&hs(o.value)?n=xm:hs(o.value)&&(n="number"===e||"range"===e?km:cm)):"select"===t.name&&hs(o.value)?n=t.getAttribute("multiple")?bm:wm:"textarea"===t.name&&hs(o.value)&&(n=cm),n&&(s=new n(t))&&s.keypath?s:void 0}function hs(t){return t&&t.isBindable}function cs(){var t=this.getAction();t&&!this.hasListener?this.listen():!t&&this.hasListener&&this.unrender()}function ls(t){pe(this.root,this.getAction(),{event:t})}function fs(){return this.action.toString().trim()}function ds(t,e,n){var r,i,s,o=this;this.element=t,this.root=t.root,this.parentFragment=t.parentFragment,this.name=e,-1!==e.indexOf("*")&&(l('Only component proxy-events may contain "*" wildcards, <%s on-%s="..."/> is not valid',t.name,e),this.invalid=!0),n.m?(i=n.a.r,this.method=n.m,this.keypaths=[],this.fn=Tr(n.a.s,i.length),this.parentFragment=t.parentFragment,s=this.root,this.refResolvers=[],i.forEach(function(t,e){var n=void 0;(n=Cm.exec(t))?o.keypaths[e]={eventObject:!0,refinements:n[1]?n[1].split("."):[]}:o.refResolvers.push(Pr(o,t,function(t){return o.resolve(e,t)}))}),this.fire=ps):(r=n.n||n,"string"!=typeof r&&(r=new oy({template:r,root:this.root,owner:this})),this.action=r,n.d?(this.dynamicParams=new oy({template:n.d,root:this.root,owner:this.element}),this.fire=vs):n.a&&(this.params=n.a,this.fire=ms))}function ps(t){var e,n,r;if(e=this.root,"function"!=typeof e[this.method])throw new Error('Attempted to call a non-existent method ("'+this.method+'")');n=this.keypaths.map(function(n){var r,i,s;if(void 0===n)return void 0;if(n.eventObject){if(r=t,i=n.refinements.length)for(s=0;i>s;s+=1)r=r[n.refinements[s]]}else r=e.viewmodel.get(n);return r}),Th.enqueue(e,t),r=this.fn.apply(null,n),e[this.method].apply(e,r),Th.dequeue(e)}function ms(t){pe(this.root,this.getAction(),{event:t,args:this.params})}function vs(t){var e=this.dynamicParams.getArgsList();"string"==typeof e&&(e=e.substr(1,e.length-2)),pe(this.root,this.getAction(),{event:t,args:e})}function gs(t){var e,n,r,i={};e=this._ractive,n=e.events[t.type],(r=Or(n.element.parentFragment))&&(i=Or.resolve(r)),n.fire({node:this,original:t,index:i,keypath:e.keypath.str,context:e.root.viewmodel.get(e.keypath)})}function ys(){var t,e=this.name;if(!this.invalid){if(t=g("events",this.root,e))this.custom=t(this.node,ws(e));else{if(!("on"+e in this.node||window&&"on"+e in window||Xa))return void(Tm[e]||v(Iu(e,"event"),{node:this.node}));this.node.addEventListener(e,gs,!1)}this.hasListener=!0}}function ws(t){return Pm[t]||(Pm[t]=function(e){var n=e.node._ractive;e.index=n.index,e.keypath=n.keypath.str,e.context=n.root.viewmodel.get(n.keypath),n.events[t].fire(e)}),Pm[t]}function bs(t,e){function n(n){n&&n.rebind(t,e)}var r;return this.method?(r=this.element.parentFragment,void this.refResolvers.forEach(n)):("string"!=typeof this.action&&n(this.action),void(this.dynamicParams&&n(this.dynamicParams)))}function xs(){this.node=this.element.node,this.node._ractive.events[this.name]=this,(this.method||this.getAction())&&this.listen()}function ks(t,e){this.keypaths[t]=e}function Es(){return this.method?void this.refResolvers.forEach(Z):("string"!=typeof this.action&&this.action.unbind(),void(this.dynamicParams&&this.dynamicParams.unbind()))}function _s(){this.custom?this.custom.teardown():this.node.removeEventListener(this.name,gs,!1),this.hasListener=!1}function As(){var t=this;this.dirty||(this.dirty=!0,oh.scheduleTask(function(){Ss(t),t.dirty=!1})),this.parentFragment.bubble()}function Ss(t){var e,n,r,i,s;e=t.node,e&&(i=I(e.options),n=t.getAttribute("value"),r=t.getAttribute("multiple"),void 0!==n?(i.forEach(function(t){var e,i;e=t._ractive?t._ractive.value:t.value,i=r?Cs(n,e):n==e,i&&(s=!0),t.selected=i}),s||(i[0]&&(i[0].selected=!0),t.binding&&t.binding.forceUpdate())):t.binding&&t.binding.forceUpdate())}function Cs(t,e){for(var n=t.length;n--;)if(t[n]==e)return!0}function Os(t,e){t.select=Ts(t.parent),t.select&&(t.select.options.push(t),e.a||(e.a={}),void 0!==e.a.value||e.a.hasOwnProperty("disabled")||(e.a.value=e.f),"selected"in e.a&&void 0!==t.select.getAttribute("value")&&delete e.a.selected)}function Ps(t){t.select&&D(t.select.options,t)}function Ts(t){if(t)do if("select"===t.name)return t;while(t=t.parent)}function Fs(t){var e,n,r,i,s,o,a;this.type=Fc,e=this.parentFragment=t.parentFragment,n=this.template=t.template,this.parent=t.pElement||e.pElement,this.root=r=e.root,this.index=t.index,this.key=t.key,this.name=Ip(n.e),"option"===this.name&&Os(this,n),"select"===this.name&&(this.options=[],this.bubble=As),"form"===this.name&&(this.formBindings=[]),a=Lp(this,n),this.attributes=om(this,n.a),this.conditionalAttributes=um(this,n.m),n.f&&(this.fragment=new oy({template:n.f,root:r,owner:this,pElement:this,cssIds:null})),o=r.twoway,a.twoway===!1?o=!1:a.twoway===!0&&(o=!0),this.twoway=o,this.lazy=a.lazy,o&&(i=us(this,n.a))&&(this.binding=i,s=this.root._twowayBindings[i.keypath.str]||(this.root._twowayBindings[i.keypath.str]=[]),s.push(i)),n.v&&(this.eventHandlers=Im(this,n.v)),n.o&&(this.decorator=new Vm(this,n.o)),this.intro=n.t0||n.t1,this.outro=n.t0||n.t2}function js(t,e){function n(n){n.rebind(t,e)}var r,i,s,o;if(this.attributes&&this.attributes.forEach(n),this.conditionalAttributes&&this.conditionalAttributes.forEach(n),this.eventHandlers&&this.eventHandlers.forEach(n),this.decorator&&n(this.decorator),this.fragment&&n(this.fragment),s=this.liveQueries)for(o=this.root,r=s.length;r--;)s[r]._makeDirty();this.node&&(i=this.node._ractive)&&k(i,"keypath",t,e)}function Rs(t){var e;(t.attributes.width||t.attributes.height)&&t.node.addEventListener("load",e=function(){var n=t.getAttribute("width"),r=t.getAttribute("height");void 0!==n&&t.node.setAttribute("width",n),void 0!==r&&t.node.setAttribute("height",r),t.node.removeEventListener("load",e,!1)},!1)}function Ns(t){t.node.addEventListener("reset",Ds,!1)}function Ls(t){t.node.removeEventListener("reset",Ds,!1)}function Ds(){var t=this._ractive.proxy;oh.start(),t.formBindings.forEach(Is),oh.end()}function Is(t){t.root.viewmodel.set(t.keypath,t.resetValue)}function Vs(t,e,n){var r,i,s;this.element=t,this.root=r=t.root,this.isIntro=n,i=e.n||e,("string"==typeof i||(s=new oy({template:i,root:r,owner:t}),i=s.toString(),s.unbind(),""!==i))&&(this.name=i,e.a?this.params=e.a:e.d&&(s=new oy({template:e.d,root:r,owner:t}),this.params=s.getArgsList(),s.unbind()),this._fn=g("transitions",r,i),this._fn||v(Iu(i,"transition"),{ractive:this.root}))}function Ws(t){return t}function Us(){mv.hidden=document[lv]}function Ms(){mv.hidden=!0}function zs(){mv.hidden=!1}function Bs(){var t,e,n,r=this;return t=this.node=this.element.node,e=t.getAttribute("style"),this.complete=function(i){n||(!i&&r.isIntro&&$s(t,e),t._ractive.transition=null,r._manager.remove(r),n=!0)},this._fn?void this._fn.apply(this.root,[this].concat(this.params)):void this.complete()}function $s(t,e){e?t.setAttribute("style",e):(t.getAttribute("style"),t.removeAttribute("style"))}function qs(){var t,e,n,r=this,i=this.root;return t=Qs(this),e=this.node=cu(this.name,t),this.parentFragment.cssIds&&this.node.setAttribute("data-ractive-css",this.parentFragment.cssIds.map(function(t){return"{"+t+"}"}).join(" ")),_u(this.node,"_ractive",{value:{proxy:this,keypath:rh(this.parentFragment),events:Eu(null),root:i}}),this.attributes.forEach(function(t){return t.render(e)}),this.conditionalAttributes.forEach(function(t){return t.render(e)}),this.fragment&&("script"===this.name?(this.bubble=Ev,this.node.text=this.fragment.toString(!1),this.fragment.unrender=ku):"style"===this.name?(this.bubble=kv,this.bubble(),this.fragment.unrender=ku):this.binding&&this.getAttribute("contenteditable")?this.fragment.unrender=ku:this.node.appendChild(this.fragment.render())),this.binding&&(this.binding.render(),this.node._ractive.binding=this.binding),this.eventHandlers&&this.eventHandlers.forEach(function(t){return t.render()}),"option"===this.name&&Zs(this),"img"===this.name?Rs(this):"form"===this.name?Ns(this):"input"===this.name||"textarea"===this.name?this.node.defaultValue=this.node.value:"option"===this.name&&(this.node.defaultSelected=this.node.selected),this.decorator&&this.decorator.fn&&oh.scheduleTask(function(){r.decorator.torndown||r.decorator.init()},!0),i.transitionsEnabled&&this.intro&&(n=new xv(this,this.intro,!0),oh.registerTransition(n),oh.scheduleTask(function(){return n.start()},!0),this.transition=n),this.node.autofocus&&oh.scheduleTask(function(){return r.node.focus()},!0),Hs(this),this.node}function Qs(t){var e,n,r;return e=(n=t.getAttribute("xmlns"))?n:"svg"===t.name?nu.svg:(r=t.parent)?"foreignObject"===r.name?nu.html:r.node.namespaceURI:t.root.el.namespaceURI}function Zs(t){var e,n,r;if(t.select&&(n=t.select.getAttribute("value"),void 0!==n))if(e=t.getAttribute("value"),t.select.node.multiple&&s(n)){for(r=n.length;r--;)if(e==n[r]){t.node.selected=!0;break}}else t.node.selected=e==n}function Hs(t){var e,n,r,i,s;e=t.root;do for(n=e._liveQueries,r=n.length;r--;)i=n[r],s=n["_"+i],s._test(t)&&(t.liveQueries||(t.liveQueries=[])).push(s);while(e=e.parent)}function Ks(t){var e,n,r;if(e=t.getAttribute("value"),void 0===e||!t.select)return!1;if(n=t.select.getAttribute("value"),n==e)return!0;if(t.select.getAttribute("multiple")&&s(n))for(r=n.length;r--;)if(n[r]==e)return!0}function Gs(t){var e,n,r,i;return e=t.attributes,n=e.type,r=e.value,i=e.name,n&&"radio"===n.value&&r&&i.interpolator&&r.value===i.interpolator.value?!0:void 0}function Ys(t){var e=t.toString();return e?" "+e:""}function Js(){this.fragment&&this.fragment.unbind(),this.binding&&this.binding.unbind(),this.eventHandlers&&this.eventHandlers.forEach(Z),"option"===this.name&&Ps(this),this.attributes.forEach(Z),this.conditionalAttributes.forEach(Z)}function Xs(t){var e,n,r;(r=this.transition)&&r.complete(),"option"===this.name?this.detach():t&&oh.detachWhenReady(this),this.fragment&&this.fragment.unrender(!1),(e=this.binding)&&(this.binding.unrender(),this.node._ractive.binding=null,n=this.root._twowayBindings[e.keypath.str],n.splice(n.indexOf(e),1)),this.eventHandlers&&this.eventHandlers.forEach(H),this.decorator&&oh.registerDecorator(this.decorator),this.root.transitionsEnabled&&this.outro&&(r=new xv(this,this.outro,!1),oh.registerTransition(r),oh.scheduleTask(function(){return r.start()})),this.liveQueries&&to(this),"form"===this.name&&Ls(this)}function to(t){var e,n,r;for(r=t.liveQueries.length;r--;)e=t.liveQueries[r],n=e.selector,e._remove(t.node)}function eo(t,e){var n=Tv.exec(e)[0];return null===t||n.length<t.length?n:t}function no(t,e,n){var r;if(r=ro(t,e,n||{}))return r;if(r=sd.fromId(e,{noThrow:!0})){r=Fv(r);var i=sd.parse(r,sd.getParseOptions(t));return t.partials[e]=i.t}}function ro(t,e,n){var r=void 0,i=oo(e,n.owner);if(i)return i;var s=y("partials",t,e);if(s){if(i=s.partials[e],"function"==typeof i&&(r=i.bind(s),r.isOwner=s.partials.hasOwnProperty(e),i=r.call(t,sd)),!i&&""!==i)return void m(Du,e,"partial","partial",{ractive:t});
if(!sd.isParsed(i)){var o=sd.parse(i,sd.getParseOptions(s));o.p&&m("Partials ({{>%s}}) cannot contain nested inline partials",e,{ractive:t});var a=r?s:io(s,e);a.partials[e]=i=o.t}return r&&(i._fn=r),i.v?i.t:i}}function io(t,e){return t.partials.hasOwnProperty(e)?t:so(t.constructor,e)}function so(t,e){return t?t.partials.hasOwnProperty(e)?t:so(t._Parent,e):void 0}function oo(t,e){if(e){if(e.template&&e.template.p&&e.template.p[t])return e.template.p[t];if(e.parentFragment&&e.parentFragment.owner)return oo(t,e.parentFragment.owner)}}function ao(t,e){var n,r=y("components",t,e);if(r&&(n=r.components[e],!n._Parent)){var i=n.bind(r);if(i.isOwner=r.components.hasOwnProperty(e),n=i(),!n)return void m(Du,e,"component","component",{ractive:t});"string"==typeof n&&(n=ao(t,n)),n._fn=i,r.components[e]=n}return n}function uo(){var t=this.instance.fragment.detach();return Wv.fire(this.instance),t}function ho(t){return this.instance.fragment.find(t)}function co(t,e){return this.instance.fragment.findAll(t,e)}function lo(t,e){e._test(this,!0),this.instance.fragment&&this.instance.fragment.findAllComponents(t,e)}function fo(t){return t&&t!==this.name?this.instance.fragment?this.instance.fragment.findComponent(t):null:this.instance}function po(){return this.parentFragment.findNextNode(this)}function mo(){return this.rendered?this.instance.fragment.firstNode():null}function vo(t,e,n){function r(t){var n,r;t.value=e,t.updating||(r=t.ractive,n=t.keypath,t.updating=!0,oh.start(r),r.viewmodel.mark(n),oh.end(),t.updating=!1)}var i,s,o,a,u,h;if(i=t.obj,s=t.prop,n&&!n.configurable){if("length"===s)return;throw new Error('Cannot use magic mode with property "'+s+'" - object is not configurable')}n&&(o=n.get,a=n.set),u=o||function(){return e},h=function(t){a&&a(t),e=o?o():t,h._ractiveWrappers.forEach(r)},h._ractiveWrappers=[t],Object.defineProperty(i,s,{get:u,set:h,enumerable:!0,configurable:!0})}function go(t,e){var n,r,i,s;if(this.adaptors)for(n=this.adaptors.length,r=0;n>r;r+=1)if(i=this.adaptors[r],i.filter(e,t,this.ractive))return s=this.wrapped[t]=i.wrap(this.ractive,e,t,wo(t)),void(s.value=e)}function yo(t,e){var n,r={};if(!e)return t;e+=".";for(n in t)t.hasOwnProperty(n)&&(r[e+n]=t[n]);return r}function wo(t){var e;return og[t]||(e=t?t+".":"",og[t]=function(n,r){var i;return"string"==typeof n?(i={},i[e+n]=r,i):"object"==typeof n?e?yo(n,t):n:void 0}),og[t]}function bo(t){var e,n,r=[Qu];for(e=t.length;e--;)for(n=t[e].parent;n&&!n.isRoot;)-1===t.indexOf(n)&&F(r,n),n=n.parent;return r}function xo(t,e,n){var r;Eo(t,e),n||(r=e.wildcardMatches(),r.forEach(function(n){ko(t,n,e)}))}function ko(t,e,n){var r,i,s;e=e.str||e,r=t.depsMap.patternObservers,i=r&&r[e],i&&i.forEach(function(e){s=n.join(e.lastKey),Eo(t,s),ko(t,e,s)})}function Eo(t,e){t.patternObservers.forEach(function(t){t.regex.test(e.str)&&t.update(e)})}function _o(){function t(t){var r=t.key;t.viewmodel===o?(o.clearCache(r.str),t.invalidate(),n.push(r),e(r)):t.viewmodel.mark(r)}function e(n){var r,i;o.noCascade.hasOwnProperty(n.str)||((i=o.deps.computed[n.str])&&i.forEach(t),(r=o.depsMap.computed[n.str])&&r.forEach(e))}var n,r,i,s=this,o=this,a={};return n=this.changes,n.length?(n.slice().forEach(e),r=bo(n),r.forEach(function(e){var r;-1===n.indexOf(e)&&(r=o.deps.computed[e.str])&&r.forEach(t)}),this.changes=[],this.patternObservers.length&&(r.forEach(function(t){return xo(s,t,!0)}),n.forEach(function(t){return xo(s,t)})),this.deps.observers&&(r.forEach(function(t){return Ao(s,null,t,"observers")}),Co(this,n,"observers")),this.deps["default"]&&(i=[],r.forEach(function(t){return Ao(s,i,t,"default")}),i.length&&So(this,i,n),Co(this,n,"default")),n.forEach(function(t){a[t.str]=s.get(t)}),this.implicitChanges={},this.noCascade={},a):void 0}function Ao(t,e,n,r){var i,s;(i=Oo(t,n,r))&&(s=t.get(n),i.forEach(function(t){e&&t.refineValue?e.push(t):t.setValue(s)}))}function So(t,e,n){e.forEach(function(e){for(var r=!1,i=0,s=n.length,o=[];s>i;){var a=n[i];if(a===e.keypath){r=!0;break}a.slice(0,e.keypath.length)===e.keypath&&o.push(a),i++}r&&e.setValue(t.get(e.keypath)),o.length&&e.refineValue(o)})}function Co(t,e,n){function r(t){t.forEach(i),t.forEach(s)}function i(e){var r=Oo(t,e,n);r&&a.push({keypath:e,deps:r})}function s(e){var i;(i=t.depsMap[n][e.str])&&r(i)}function o(e){var n=t.get(e.keypath);e.deps.forEach(function(t){return t.setValue(n)})}var a=[];r(e),a.forEach(o)}function Oo(t,e,n){var r=t.deps[n];return r?r[e.str]:null}function Po(){this.captureGroups.push([])}function To(t,e){var n,r;if(e||(r=this.wrapped[t])&&r.teardown()!==!1&&(this.wrapped[t]=null),this.cache[t]=void 0,n=this.cacheMap[t])for(;n.length;)this.clearCache(n.pop())}function Fo(t,e){var n=e.firstKey;return!(n in t.data||n in t.computations||n in t.mappings)}function jo(t,e){var n=new lg(t,e);return this.ready&&n.init(this),this.computations[t.str]=n}function Ro(t,e){var n,r,i,s,o,a=this.cache,u=t.str;if(e=e||mg,e.capture&&(s=L(this.captureGroups))&&(~s.indexOf(t)||s.push(t)),Fu.call(this.mappings,t.firstKey))return this.mappings[t.firstKey].get(t,e);if(t.isSpecial)return t.value;if(void 0===a[u]?((r=this.computations[u])&&!r.bypass?(n=r.get(),this.adapt(u,n)):(i=this.wrapped[u])?n=i.value:t.isRoot?(this.adapt("",this.data),n=this.data):n=No(this,t),a[u]=n):n=a[u],!e.noUnwrap&&(i=this.wrapped[u])&&(n=i.get()),t.isRoot&&e.fullRootGet)for(o in this.mappings)n[o]=this.mappings[o].getValue();return n===dg?void 0:n}function No(t,e){var n,r,i,s;return n=t.get(e.parent),(s=t.wrapped[e.parent.str])&&(n=s.get()),null!==n&&void 0!==n?((r=t.cacheMap[e.parent.str])?-1===r.indexOf(e.str)&&r.push(e.str):t.cacheMap[e.parent.str]=[e.str],"object"!=typeof n||e.lastKey in n?(i=n[e.lastKey],t.adapt(e.str,i,!1),t.cache[e.str]=i,i):t.cache[e.str]=dg):void 0}function Lo(){var t;for(t in this.computations)this.computations[t].init(this)}function Do(t,e){var n=this.mappings[t.str]=new yg(t,e);return n.initViewmodel(this),n}function Io(t,e){var n,r=t.str;e&&(e.implicit&&(this.implicitChanges[r]=!0),e.noCascade&&(this.noCascade[r]=!0)),(n=this.computations[r])&&n.invalidate(),-1===this.changes.indexOf(t)&&this.changes.push(t);var i=e?e.keepExistingWrapper:!1;this.clearCache(r,i),this.ready&&this.onchange()}function Vo(t,e,n,r){var i,s,o,a;if(this.mark(t),r&&r.compare){o=Uo(r.compare);try{i=e.map(o),s=n.map(o)}catch(u){m('merge(): "%s" comparison failed. Falling back to identity checking',t),i=e,s=n}}else i=e,s=n;a=bg(i,s),this.smartUpdate(t,n,a,e.length!==n.length)}function Wo(t){return JSON.stringify(t)}function Uo(t){if(t===!0)return Wo;if("string"==typeof t)return kg[t]||(kg[t]=function(e){return e[t]}),kg[t];if("function"==typeof t)return t;throw new Error("The `compare` option must be a function, or a string representing an identifying field (or `true` to use JSON.stringify)")}function Mo(t,e){var n,r,i,s=void 0===arguments[2]?"default":arguments[2];e.isStatic||((n=this.mappings[t.firstKey])?n.register(t,e,s):(r=this.deps[s]||(this.deps[s]={}),i=r[t.str]||(r[t.str]=[]),i.push(e),t.isRoot||zo(this,t,s)))}function zo(t,e,n){for(var r,i,s;!e.isRoot;)r=t.depsMap[n]||(t.depsMap[n]={}),i=r[e.parent.str]||(r[e.parent.str]=[]),s=e.str,void 0===i["_"+s]&&(i["_"+s]=0,i.push(e)),i["_"+s]+=1,e=e.parent}function Bo(){return this.captureGroups.pop()}function $o(t){this.data=t,this.clearCache("")}function qo(t,e){var n,r,i,s,o=void 0===arguments[2]?{}:arguments[2];if(!o.noMapping&&(n=this.mappings[t.firstKey]))return n.set(t,e);if(r=this.computations[t.str]){if(r.setting)return;r.set(e),e=r.get()}a(this.cache[t.str],e)||(i=this.wrapped[t.str],i&&i.reset&&(s=i.reset(e)!==!1,s&&(e=i.get())),r||s||Qo(this,t,e),o.silent?this.clearCache(t.str):this.mark(t))}function Qo(t,e,n){var r,i,s,o;s=function(){r.set?r.set(e.lastKey,n):(i=r.get(),o())},o=function(){i||(i=ng(e.lastKey),t.set(e.parent,i,{silent:!0})),i[e.lastKey]=n},r=t.wrapped[e.parent.str],r?s():(i=t.get(e.parent),(r=t.wrapped[e.parent.str])?s():o())}function Zo(t,e,n){var r,i,s,o=this;if(i=n.length,n.forEach(function(e,n){-1===e&&o.mark(t.join(n),Pg)}),this.set(t,e,{silent:!0}),(r=this.deps["default"][t.str])&&r.filter(Ho).forEach(function(t){return t.shuffle(n,e)}),i!==e.length){for(this.mark(t.join("length"),Og),s=n.touchedFrom;s<e.length;s+=1)this.mark(t.join(s));for(s=e.length;i>s;s+=1)this.mark(t.join(s),Pg)}}function Ho(t){return"function"==typeof t.shuffle}function Ko(){var t,e=this;for(Object.keys(this.cache).forEach(function(t){return e.clearCache(t)});t=this.unresolvedImplicitDependencies.pop();)t.teardown()}function Go(t,e){var n,r,i,s=void 0===arguments[2]?"default":arguments[2];if(!e.isStatic){if(n=this.mappings[t.firstKey])return n.unregister(t,e,s);if(r=this.deps[s][t.str],i=r.indexOf(e),-1===i)throw new Error("Attempted to remove a dependant that was no longer registered! This should not happen. If you are seeing this bug in development please raise an issue at https://github.com/RactiveJS/Ractive/issues - thanks");r.splice(i,1),t.isRoot||Yo(this,t,s)}}function Yo(t,e,n){for(var r,i;!e.isRoot;)r=t.depsMap[n],i=r[e.parent.str],i["_"+e.str]-=1,i["_"+e.str]||(D(i,e),i["_"+e.str]=void 0),e=e.parent}function Jo(t){this.hook=new T(t),this.inProcess={},this.queue={}}function Xo(t,e){return t[e._guid]||(t[e._guid]=[])}function ta(t,e){var n=Xo(t.queue,e);for(t.hook.fire(e);n.length;)ta(t,n.shift());delete t.queue[e._guid]}function ea(t,e){var n,r={};for(n in e)r[n]=na(t,n,e[n]);return r}function na(t,e,n){var r,i;return"function"==typeof n&&(r=ia(n,t)),"string"==typeof n&&(r=ra(t,n)),"object"==typeof n&&("string"==typeof n.get?r=ra(t,n.get):"function"==typeof n.get?r=ia(n.get,t):l("`%s` computation must have a `get()` method",e),"function"==typeof n.set&&(i=ia(n.set,t))),{getter:r,setter:i}}function ra(t,e){var n,r,i;return n="return ("+e.replace(Rg,function(t,e){return r=!0,'__ractive.get("'+e+'")'})+");",r&&(n="var __ractive = this; "+n),i=new Function(n),r?i.bind(t):i}function ia(t,e){return/this/.test(t.toString())?t.bind(e):t}function sa(e){var n,i,s=void 0===arguments[1]?{}:arguments[1],o=void 0===arguments[2]?{}:arguments[2];if(ay.DEBUG&&Tu(),ua(e,o),_u(e,"data",{get:ha}),Ng.fire(e,s),Vg.forEach(function(t){e[t]=r(Eu(e.constructor[t]||null),s[t])}),i=new jg({adapt:oa(e,e.adapt,s),data:bc.init(e.constructor,e,s),computed:ea(e,r(Eu(e.constructor.prototype.computed),s.computed)),mappings:o.mappings,ractive:e,onchange:function(){return oh.addRactive(e)}}),e.viewmodel=i,i.init(),ad.init(e.constructor,e,s),Lg.fire(e),Dg.begin(e),e.template){var a=void 0;(o.cssIds||e.cssId)&&(a=o.cssIds?o.cssIds.slice():[],e.cssId&&a.push(e.cssId)),e.fragment=new oy({template:e.template,root:e,owner:e,cssIds:a})}if(Dg.end(e),n=t(e.el)){var u=e.render(n,e.append);ay.DEBUG_PROMISES&&u["catch"](function(t){throw v("Promise debugging is enabled, to help solve errors that happen asynchronously. Some browsers will log unhandled promise rejections, in which case you can safely disable promise debugging:\n  Ractive.DEBUG_PROMISES = false;"),m("An error happened during rendering",{ractive:e}),t.stack&&f(t.stack),t})}}function oa(t,e,n){function r(e){return"string"==typeof e&&(e=g("adaptors",t,e),e||l(Iu(e,"adaptor"))),e}var i,s,o;if(e=e.map(r),i=N(n.adapt).map(r),i=aa(e,i),s="magic"in n?n.magic:t.magic,o="modifyArrays"in n?n.modifyArrays:t.modifyArrays,s){if(!eu)throw new Error("Getters and setters (magic mode) are not supported in this browser");o&&i.push(rg),i.push(Xv)}return o&&i.push(Kv),i}function aa(t,e){for(var n=t.slice(),r=e.length;r--;)~n.indexOf(e[r])||n.push(e[r]);return n}function ua(t,e){t._guid="r-"+Ig++,t._subs=Eu(null),t._config={},t._twowayBindings=Eu(null),t._animations=[],t.nodes={},t._liveQueries=[],t._liveComponentQueries=[],t._boundFunctions=[],e.component?(t.parent=e.parent,t.container=e.container||null,t.root=t.parent.root,t.component=e.component,e.component.instance=t,t._inlinePartials=e.inlinePartials):(t.root=t,t.parent=t.container=null)}function ha(){throw new Error("Using `ractive.data` is no longer supported - you must use the `ractive.get()` API instead")}function ca(t,e,n){this.parentFragment=t.parentFragment,this.callback=n,this.fragment=new oy({template:e,root:t.root,owner:this}),this.update()}function la(t,e,n){var r;return e.r?r=Pr(t,e.r,n):e.x?r=new Rd(t,t.parentFragment,e.x,n):e.rx&&(r=new Id(t,e.rx,n)),r}function fa(t){return 1===t.length&&t[0].t===Sc}function da(t,e){var n;for(n in e)e.hasOwnProperty(n)&&pa(t.instance,t.root,n,e[n])}function pa(t,e,n,r){"string"!=typeof r&&l("Components currently only support simple events - you cannot include arguments. Sorry!"),t.on(n,function(){var t,n;return arguments.length&&arguments[0]&&arguments[0].node&&(t=Array.prototype.shift.call(arguments)),n=Array.prototype.slice.call(arguments),pe(e,r,{event:t,args:n}),!1})}function ma(t,e){var n,r;if(!e)throw new Error('Component "'+this.name+'" not found');n=this.parentFragment=t.parentFragment,r=n.root,this.root=r,this.type=Ic,this.name=t.template.e,this.index=t.index,this.indexRefBindings={},this.yielders={},this.resolvers=[],Ug(this,e,t.template.a,t.template.f,t.template.p),da(this,t.template.v),(t.template.t1||t.template.t2||t.template.o)&&m('The "intro", "outro" and "decorator" directives have no effect on components',{ractive:this.instance}),Mg(this)}function va(t,e){function n(n){n.rebind(t,e)}var r;this.resolvers.forEach(n);for(var i in this.yielders)this.yielders[i][0]&&n(this.yielders[i][0]);(r=this.root._liveComponentQueries["_"+this.name])&&r._makeDirty()}function ga(){var t=this.instance;return t.render(this.parentFragment.getNode()),this.rendered=!0,t.fragment.detach()}function ya(){return this.instance.fragment.toString()}function wa(){var t=this.instance;this.resolvers.forEach(Z),ba(this),t.fragment.unbind(),t.viewmodel.teardown(),t.fragment.rendered&&t.el.__ractive_instances__&&D(t.el.__ractive_instances__,t),Zg.fire(t)}function ba(t){var e,n;e=t.root;do(n=e._liveComponentQueries["_"+t.name])&&n._remove(t);while(e=e.parent)}function xa(t){this.shouldDestroy=t,this.instance.unrender()}function ka(t){var e=this;this.owner=t.owner,this.parent=this.owner.parentFragment,this.root=t.root,this.pElement=t.pElement,this.context=t.context,this.index=t.index,this.key=t.key,this.registeredIndexRefs=[],this.cssIds="cssIds"in t?t.cssIds:this.parent?this.parent.cssIds:null,this.items=t.template.map(function(n,r){return Ea({parentFragment:e,pElement:t.pElement,template:n,index:r})}),this.value=this.argsList=null,this.dirtyArgs=this.dirtyValue=!0,this.bound=!0}function Ea(t){if("string"==typeof t.template)return new Sd(t);switch(t.template.t){case Vc:return new Jg(t);case Sc:return new zd(t);case Oc:return new sp(t);case Cc:return new wp(t);case Fc:var e=void 0;return(e=ao(t.parentFragment.root,t.template.e))?new Gg(t,e):new Ov(t);case jc:return new Nv(t);case Rc:return new Yg(t);case Uc:return new Xg(t);default:throw new Error("Something very strange happened. Please file an issue at https://github.com/ractivejs/ractive/issues. Thanks!")}}function _a(t,e){(!this.owner||this.owner.hasContext)&&k(this,"context",t,e),this.items.forEach(function(n){n.rebind&&n.rebind(t,e)})}function Aa(){var t;return 1===this.items.length?t=this.items[0].render():(t=document.createDocumentFragment(),this.items.forEach(function(e){t.appendChild(e.render())})),this.rendered=!0,t}function Sa(t){return this.items?this.items.map(t?Oa:Ca).join(""):""}function Ca(t){return t.toString()}function Oa(t){return t.toString(!0)}function Pa(){this.bound&&(this.items.forEach(Ta),this.bound=!1)}function Ta(t){t.unbind&&t.unbind()}function Fa(t){if(!this.rendered)throw new Error("Attempted to unrender a fragment that was not rendered");this.items.forEach(function(e){return e.unrender(t)}),this.rendered=!1}function ja(t){var e,n,r,i,s;if(t=t||{},"object"!=typeof t)throw new Error("The reset method takes either no arguments, or an object containing new data");for((n=this.viewmodel.wrapped[""])&&n.reset?n.reset(t)===!1&&this.viewmodel.reset(t):this.viewmodel.reset(t),r=ad.reset(this),i=r.length;i--;)if(cy.indexOf(r[i])>-1){s=!0;break}if(s){var o=void 0;this.viewmodel.mark(Qu),(o=this.component)&&(o.shouldDestroy=!0),this.unrender(),o&&(o.shouldDestroy=!1),this.fragment.template!==this.template&&(this.fragment.unbind(),this.fragment=new oy({template:this.template,root:this,owner:this})),e=this.render(this.el,this.anchor)}else e=oh.start(this,!0),this.viewmodel.mark(Qu),oh.end();return ly.fire(this,t),e}function Ra(t){var e,n;od.init(null,this,{template:t}),e=this.transitionsEnabled,this.transitionsEnabled=!1,(n=this.component)&&(n.shouldDestroy=!0),this.unrender(),n&&(n.shouldDestroy=!1),this.fragment.unbind(),this.fragment=new oy({template:this.template,root:this,owner:this}),this.render(this.el,this.anchor),this.transitionsEnabled=e}function Na(t,e){var n,r;if(r=oh.start(this,!0),h(t)){n=t;for(t in n)n.hasOwnProperty(t)&&(e=n[t],La(this,t,e))}else La(this,t,e);return oh.end(),r}function La(t,e,n){e=_(C(e)),e.isPattern?A(t,e).forEach(function(e){t.viewmodel.set(e,n)}):t.viewmodel.set(e,n)}function Da(t,e){return O(this,t,void 0===e?-1:-e)}function Ia(){var t;return this.fragment.unbind(),this.viewmodel.teardown(),this.fragment.rendered&&this.el.__ractive_instances__&&D(this.el.__ractive_instances__,this),this.shouldDestroy=!0,t=this.fragment.rendered?this.unrender():nh.resolve(),xy.fire(this),this._boundFunctions.forEach(Va),t}function Va(t){delete t.fn[t.prop]}function Wa(t){var e=this;if("string"!=typeof t)throw new TypeError(Lu);var n=void 0;return/\*/.test(t)?(n={},A(this,_(C(t))).forEach(function(t){n[t.str]=!e.viewmodel.get(t)}),this.set(n)):this.set(t,!this.get(t))}function Ua(){return this.fragment.toString(!0)}function Ma(){var t,e;if(!this.fragment.rendered)return m("ractive.unrender() was called on a Ractive instance that was not rendered"),nh.resolve();for(t=oh.start(this,!0),e=!this.component||this.component.shouldDestroy||this.shouldDestroy;this._animations[0];)this._animations[0].stop();return this.fragment.unrender(e),D(this.el.__ractive_instances__,this),Ay.fire(this),oh.end(),t}function za(t){var e;return t=_(t)||Qu,e=oh.start(this,!0),this.viewmodel.mark(t),oh.end(),Oy.fire(this,t),e}function Ba(t,e){var n,r,i;if("string"!=typeof t||e){i=[];for(r in this._twowayBindings)(!t||_(r).equalsOrStartsWith(t))&&i.push.apply(i,this._twowayBindings[r])}else i=this._twowayBindings[t];return n=$a(this,i),this.set(n)}function $a(t,e){var n={},r=[];return e.forEach(function(t){var e,i;if(!t.radioName||t.element.node.checked){if(t.checkboxName)return void(r[t.keypath.str]||t.changed()||(r.push(t.keypath),r[t.keypath.str]=t));e=t.attribute.value,i=t.getValue(),R(e,i)||a(e,i)||(n[t.keypath.str]=i)}}),r.length&&r.forEach(function(t){var e,i,s;e=r[t.str],i=e.attribute.value,s=e.getValue(),R(i,s)||(n[t.str]=s)}),n}function qa(t,e){return"function"==typeof e&&/_super/.test(t)}function Qa(t){for(var e={};t;)Za(t,e),Ka(t,e),t=t._Parent!==ay?t._Parent:!1;return e}function Za(t,e){nd.forEach(function(n){Ha(n.useDefaults?t.prototype:t,e,n.name)})}function Ha(t,e,n){var r,i=Object.keys(t[n]);i.length&&((r=e[n])||(r=e[n]={}),i.filter(function(t){return!(t in r)}).forEach(function(e){return r[e]=t[n][e]}))}function Ka(t,e){Object.keys(t.prototype).forEach(function(n){if("computed"!==n){var r=t.prototype[n];if(n in e){if("function"==typeof e[n]&&"function"==typeof r&&e[n]._method){var i=void 0,s=r._method;s&&(r=r._method),i=Fy(e[n]._method,r),s&&(i._method=i),e[n]=i}}else e[n]=r._method?r._method:r}})}function Ga(){for(var t=arguments.length,e=Array(t),n=0;t>n;n++)e[n]=arguments[n];return e.length?e.reduce(Ya,this):Ya(this)}function Ya(t){var e,n,i=void 0===arguments[1]?{}:arguments[1];return i.prototype instanceof ay&&(i=jy(i)),e=function(t){return this instanceof e?void Wg(this,t):new e(t)},n=Eu(t.prototype),n.constructor=e,Au(e,{defaults:{value:n},extend:{value:Ga,writable:!0,configurable:!0},_Parent:{value:t}}),ad.extend(t,n,i),bc.extend(t,n,i),i.computed&&(n.computed=r(Eu(t.prototype.computed),i.computed)),e.prototype=n,e}var Ja,Xa,tu,eu,nu,ru,iu,su=3,ou={el:void 0,append:!1,template:{v:su,t:[]},preserveWhitespace:!1,sanitize:!1,stripComments:!0,delimiters:["{{","}}"],tripleDelimiters:["{{{","}}}"],interpolate:!1,data:{},computed:{},magic:!1,modifyArrays:!0,adapt:[],isolated:!1,twoway:!0,lazy:!1,noIntro:!1,transitionsEnabled:!0,complete:void 0,css:null,noCssTransform:!1},au=ou,uu={linear:function(t){return t},easeIn:function(t){return Math.pow(t,3)},easeOut:function(t){return Math.pow(t-1,3)+1},easeInOut:function(t){return(t/=.5)<1?.5*Math.pow(t,3):.5*(Math.pow(t-2,3)+2)}};Ja="object"==typeof document,Xa="undefined"!=typeof navigator&&/jsDom/.test(navigator.appName),tu="undefined"!=typeof console&&"function"==typeof console.warn&&"function"==typeof console.warn.apply;try{Object.defineProperty({},"test",{value:0}),eu=!0}catch(hu){eu=!1}nu={html:"http://www.w3.org/1999/xhtml",mathml:"http://www.w3.org/1998/Math/MathML",svg:"http://www.w3.org/2000/svg",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},ru="undefined"==typeof document?!1:document&&document.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#BasicStructure","1.1"),iu=["o","ms","moz","webkit"];var cu,lu,fu,du,pu,mu,vu,gu,yu;if(cu=ru?function(t,e){return e&&e!==nu.html?document.createElementNS(e,t):document.createElement(t)}:function(t,e){if(e&&e!==nu.html)throw"This browser does not support namespaces other than http://www.w3.org/1999/xhtml. The most likely cause of this error is that you're trying to render SVG in an older browser. See http://docs.ractivejs.org/latest/svg-and-older-browsers for more information";return document.createElement(t)},Ja){for(fu=cu("div"),du=["matches","matchesSelector"],yu=function(t){return function(e,n){return e[t](n)}},vu=du.length;vu--&&!lu;)if(pu=du[vu],fu[pu])lu=yu(pu);else for(gu=iu.length;gu--;)if(mu=iu[vu]+pu.substr(0,1).toUpperCase()+pu.substring(1),fu[mu]){lu=yu(mu);break}lu||(lu=function(t,e){var n,r,i;for(r=t.parentNode,r||(fu.innerHTML="",r=fu,t=t.cloneNode(),fu.appendChild(t)),n=r.querySelectorAll(e),i=n.length;i--;)if(n[i]===t)return!0;return!1})}else lu=null;var wu,bu,xu,ku=function(){};"undefined"==typeof window?xu=null:(wu=window,bu=wu.document,xu={},bu||(xu=null),Date.now||(Date.now=function(){return+new Date}),String.prototype.trim||(String.prototype.trim=function(){return this.replace(/^\s+/,"").replace(/\s+$/,"")}),Object.keys||(Object.keys=function(){var t=Object.prototype.hasOwnProperty,e=!{toString:null}.propertyIsEnumerable("toString"),n=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],r=n.length;return function(i){if("object"!=typeof i&&"function"!=typeof i||null===i)throw new TypeError("Object.keys called on non-object");var s=[];for(var o in i)t.call(i,o)&&s.push(o);if(e)for(var a=0;r>a;a++)t.call(i,n[a])&&s.push(n[a]);return s}}()),Array.prototype.indexOf||(Array.prototype.indexOf=function(t,e){var n;for(void 0===e&&(e=0),0>e&&(e+=this.length),0>e&&(e=0),n=this.length;n>e;e++)if(this.hasOwnProperty(e)&&this[e]===t)return e;return-1}),Array.prototype.forEach||(Array.prototype.forEach=function(t,e){var n,r;for(n=0,r=this.length;r>n;n+=1)this.hasOwnProperty(n)&&t.call(e,this[n],n,this)}),Array.prototype.map||(Array.prototype.map=function(t,e){var n,r,i,s=this,o=[];for(s instanceof String&&(s=s.toString(),i=!0),n=0,r=s.length;r>n;n+=1)(s.hasOwnProperty(n)||i)&&(o[n]=t.call(e,s[n],n,s));return o}),"function"!=typeof Array.prototype.reduce&&(Array.prototype.reduce=function(t,e){var n,r,i,s;if("function"!=typeof t)throw new TypeError(t+" is not a function");for(i=this.length,s=!1,arguments.length>1&&(r=e,s=!0),n=0;i>n;n+=1)this.hasOwnProperty(n)?s&&(r=t(r,this[n],n,this)):(r=this[n],s=!0);if(!s)throw new TypeError("Reduce of empty array with no initial value");return r}),Array.prototype.filter||(Array.prototype.filter=function(t,e){var n,r,i=[];for(n=0,r=this.length;r>n;n+=1)this.hasOwnProperty(n)&&t.call(e,this[n],n,this)&&(i[i.length]=this[n]);return i}),Array.prototype.every||(Array.prototype.every=function(t,e){var n,r,i;if(null==this)throw new TypeError;if(n=Object(this),r=n.length>>>0,"function"!=typeof t)throw new TypeError;for(i=0;r>i;i+=1)if(i in n&&!t.call(e,n[i],i,n))return!1;return!0}),"function"!=typeof Function.prototype.bind&&(Function.prototype.bind=function(t){var e,n,r,i,s=[].slice;if("function"!=typeof this)throw new TypeError("Function.prototype.bind called on non-function");return e=s.call(arguments,1),n=this,r=function(){},i=function(){var i=this instanceof r&&t?this:t;return n.apply(i,e.concat(s.call(arguments)))},r.prototype=this.prototype,i.prototype=new r,i}),wu.addEventListener||!function(t,e){var n,r,i,s,o,a;t.appearsToBeIELessEqual8=!0,n=function(t,e){var n,r=this;for(n in t)r[n]=t[n];r.currentTarget=e,r.target=t.srcElement||e,r.timeStamp=+new Date,r.preventDefault=function(){t.returnValue=!1},r.stopPropagation=function(){t.cancelBubble=!0}},r=function(t,e){var r,i,s=this;r=s.listeners||(s.listeners=[]),i=r.length,r[i]=[e,function(t){e.call(s,new n(t,s))}],s.attachEvent("on"+t,r[i][1])},i=function(t,e){var n,r,i=this;if(i.listeners)for(n=i.listeners,r=n.length;r--;)n[r][0]===e&&i.detachEvent("on"+t,n[r][1])},t.addEventListener=e.addEventListener=r,t.removeEventListener=e.removeEventListener=i,"Element"in t?(t.Element.prototype.addEventListener=r,t.Element.prototype.removeEventListener=i):(a=e.createElement,e.createElement=function(t){var e=a(t);return e.addEventListener=r,e.removeEventListener=i,e},s=e.getElementsByTagName("head")[0],o=e.createElement("style"),s.insertBefore(o,s.firstChild))}(wu,bu),wu.getComputedStyle||(xu.getComputedStyle=function(){function t(n,r,i,s){var o,a=r[i],u=parseFloat(a),h=a.split(/\d/)[0];return isNaN(u)&&/^thin|medium|thick$/.test(a)&&(u=e(a),h=""),s=null!=s?s:/%|em/.test(h)&&n.parentElement?t(n.parentElement,n.parentElement.currentStyle,"fontSize",null):16,o="fontSize"==i?s:/width/i.test(i)?n.clientWidth:n.clientHeight,"em"==h?u*s:"in"==h?96*u:"pt"==h?96*u/72:"%"==h?u/100*o:u}function e(t){var e,n;return s[t]||(e=document.createElement("div"),e.style.display="block",e.style.position="fixed",e.style.width=e.style.height="0",e.style.borderRight=t+" solid black",document.getElementsByTagName("body")[0].appendChild(e),n=e.getBoundingClientRect(),s[t]=n.right-n.left),s[t]}function n(t,e){var n="border"==e?"Width":"",r=e+"Top"+n,i=e+"Right"+n,s=e+"Bottom"+n,o=e+"Left"+n;t[e]=(t[r]==t[i]==t[s]==t[o]?[t[r]]:t[r]==t[s]&&t[o]==t[i]?[t[r],t[i]]:t[o]==t[i]?[t[r],t[i],t[s]]:[t[r],t[i],t[s],t[o]]).join(" ")}function r(e){var r,i,s,a;r=e.currentStyle,i=this,s=t(e,r,"fontSize",null);for(a in r)"normal"===r[a]&&o.hasOwnProperty(a)?i[a]=o[a]:/width|height|margin.|padding.|border.+W/.test(a)?"auto"===r[a]?/^width|height/.test(a)?i[a]=("width"===a?e.clientWidth:e.clientHeight)+"px":/(?:padding)?Top|Bottom$/.test(a)&&(i[a]="0px"):i[a]=t(e,r,a,s)+"px":"styleFloat"===a?i["float"]=r[a]:i[a]=r[a];return n(i,"margin"),n(i,"padding"),n(i,"border"),i.fontSize=s+"px",i}function i(t){return new r(t)}var s={},o={fontWeight:400,lineHeight:1.2,letterSpacing:0};return r.prototype={constructor:r,getPropertyPriority:ku,getPropertyValue:function(t){return this[t]||""},item:ku,removeProperty:ku,setProperty:ku,getPropertyCSSValue:ku},i}()));var Eu,_u,Au,Su=xu;try{Object.defineProperty({},"test",{value:0}),Ja&&Object.defineProperty(document.createElement("div"),"test",{value:0}),_u=Object.defineProperty}catch(Cu){_u=function(t,e,n){t[e]=n.value}}try{try{Object.defineProperties({},{test:{value:0}})}catch(Cu){throw Cu}Ja&&Object.defineProperties(cu("div"),{test:{value:0}}),Au=Object.defineProperties}catch(Cu){Au=function(t,e){var n;for(n in e)e.hasOwnProperty(n)&&_u(t,n,e[n])}}try{Object.create(null),Eu=Object.create}catch(Cu){Eu=function(){var t=function(){};return function(e,n){var r;return null===e?{}:(t.prototype=e,r=new t,n&&Object.defineProperties(r,n),r)}}()}var Ou,Pu,Tu,Fu=Object.prototype.hasOwnProperty,ju=Object.prototype.toString,Ru=/^\[object (?:Array|FileList)\]$/,Nu={};tu?!function(){var t=["%cRactive.js %c0.7.1 %cin debug mode, %cmore...","color: rgb(114, 157, 52); font-weight: normal;","color: rgb(85, 85, 85); font-weight: normal;","color: rgb(85, 85, 85); font-weight: normal;","color: rgb(82, 140, 224); font-weight: normal; text-decoration: underline;"],e="You're running Ractive <@version@> in debug mode - messages will be printed to the console to help you fix problems and optimise your application.\n\nTo disable debug mode, add this line at the start of your app:\n  Ractive.DEBUG = false;\n\nTo disable debug mode when your app is minified, add this snippet:\n  Ractive.DEBUG = /unminified/.test(function(){/*unminified*/});\n\nGet help and support:\n  http://docs.ractivejs.org\n  http://stackoverflow.com/questions/tagged/ractivejs\n  http://groups.google.com/forum/#!forum/ractive-js\n  http://twitter.com/ractivejs\n\nFound a bug? Raise an issue:\n  https://github.com/ractivejs/ractive/issues\n\n";Tu=function(){var n=!!console.groupCollapsed;console[n?"groupCollapsed":"log"].apply(console,t),console.log(e),n&&console.groupEnd(t),Tu=ku},Pu=function(t,e){if(Tu(),"object"==typeof e[e.length-1]){var n=e.pop(),r=n.ractive;if(r){var i=void 0;r.component&&(i=r.component.name)&&(t="<"+i+"> "+t);var s=void 0;(s=n.node||r.fragment&&r.fragment.rendered&&r.find("*"))&&e.push(s)}}console.warn.apply(console,["%cRactive.js: %c"+t,"color: rgb(114, 157, 52);","color: rgb(85, 85, 85);"].concat(e))},Ou=function(){console.log.apply(console,arguments)}}():Pu=Ou=Tu=ku;var Lu="Bad arguments",Du='A function was specified for "%s" %s, but no %s was returned',Iu=function(t,e){return'Missing "'+t+'" '+e+" plugin. You may need to download a plugin via http://docs.ractivejs.org/latest/plugins#"+e+"s"},Vu=function(t,e,n,r){if(t===e)return w(e);if(r){var i=g("interpolators",n,r);if(i)return i(t,e)||w(e);l(Iu(r,"interpolator"))}return Wu.number(t,e)||Wu.array(t,e)||Wu.object(t,e)||w(e)},Wu={number:function(t,e){var n;return u(t)&&u(e)?(t=+t,e=+e,n=e-t,n?function(e){return t+e*n}:function(){return t}):null},array:function(t,e){var n,r,i,o;if(!s(t)||!s(e))return null;for(n=[],r=[],o=i=Math.min(t.length,e.length);o--;)r[o]=Vu(t[o],e[o]);for(o=i;o<t.length;o+=1)n[o]=t[o];for(o=i;o<e.length;o+=1)n[o]=e[o];return function(t){for(var e=i;e--;)n[e]=r[e](t);return n}},object:function(t,e){var n,r,i,s,o;if(!h(t)||!h(e))return null;n=[],s={},i={};for(o in t)Fu.call(t,o)&&(Fu.call(e,o)?(n.push(o),i[o]=Vu(t[o],e[o])):s[o]=t[o]);for(o in e)Fu.call(e,o)&&!Fu.call(t,o)&&(s[o]=e[o]);return r=n.length,function(t){for(var e,o=r;o--;)e=n[o],s[e]=i[e](t);return s}}},Uu={},Mu=/\[\s*(\*|[0-9]|[1-9][0-9]+)\s*\]/g,zu=/\*/,Bu={},$u=function(t){var e=t.split(".");this.str=t,"@"===t[0]&&(this.isSpecial=!0,this.value=E(t)),this.firstKey=e[0],this.lastKey=e.pop(),this.isPattern=zu.test(t),this.parent=""===t?null:_(e.join(".")),this.isRoot=!t};$u.prototype={equalsOrStartsWith:function(t){return t===this||this.startsWith(t)},join:function(t){return _(this.isRoot?String(t):this.str+"."+t)},replace:function(t,e){return this===t?e:this.startsWith(t)?null===e?e:_(this.str.replace(t.str+".",e.str+".")):void 0},startsWith:function(t){return t?t&&this.str.substr(0,t.str.length+1)===t.str+".":!1},toString:function(){throw new Error("Bad coercion")},valueOf:function(){throw new Error("Bad coercion")},wildcardMatches:function(){return this._wildcardMatches||(this._wildcardMatches=b(this.str))}};var qu,Qu=_(""),Zu="Cannot add to a non-numeric value",Hu=P;"undefined"==typeof window?qu=null:(!function(t,e,n){var r,i;if(!n.requestAnimationFrame){for(r=0;r<t.length&&!n.requestAnimationFrame;++r)n.requestAnimationFrame=n[t[r]+"RequestAnimationFrame"];n.requestAnimationFrame||(i=n.setTimeout,n.requestAnimationFrame=function(t){var n,r,s;return n=Date.now(),r=Math.max(0,16-(n-e)),s=i(function(){t(n+r)},r),e=n+r,s})}}(iu,0,window),qu=window.requestAnimationFrame);var Ku,Gu=qu;Ku="undefined"!=typeof window&&window.performance&&"function"==typeof window.performance.now?function(){return window.performance.now()
}:function(){return Date.now()};var Yu={construct:{deprecated:"beforeInit",replacement:"onconstruct"},render:{deprecated:"init",message:'The "init" method has been deprecated and will likely be removed in a future release. You can either use the "oninit" method which will fire only once prior to, and regardless of, any eventual ractive instance being rendered, or if you need to access the rendered DOM, use "onrender" instead. See http://docs.ractivejs.org/latest/migrating for more information.'},complete:{deprecated:"complete",replacement:"oncomplete"}};T.prototype.fire=function(t,e){function n(n){return t[n]?(e?t[n](e):t[n](),!0):void 0}n(this.method),!t[this.method]&&this.deprecate&&n(this.deprecate.deprecated)&&(this.deprecate.message?m(this.deprecate.message):m('The method "%s" has been deprecated in favor of "%s" and will likely be removed in a future release. See http://docs.ractivejs.org/latest/migrating for more information.',this.deprecate.deprecated,this.deprecate.replacement)),e?t.fire(this.event,e):t.fire(this.event)};var Ju,Xu={},th={},eh={};"function"==typeof Promise?Ju=Promise:(Ju=function(t){var e,n,r,i,s,o,a=[],u=[],h=Xu;r=function(t){return function(r){h===Xu&&(e=r,h=t,n=W(h===th?a:u,e),V(n))}},i=r(th),s=r(eh);try{t(i,s)}catch(c){s(c)}return o={then:function(t,e){var r=new Ju(function(i,s){var o=function(t,e,n){e.push("function"==typeof t?function(e){var n;try{n=t(e),U(r,n,i,s)}catch(o){s(o)}}:n)};o(t,a,i),o(e,u,s),h!==Xu&&V(n)});return r}},o["catch"]=function(t){return this.then(null,t)},o},Ju.all=function(t){return new Ju(function(e,n){var r,i,s,o=[];if(!t.length)return void e(o);for(s=function(t,i){t&&"function"==typeof t.then?t.then(function(t){o[i]=t,--r||e(o)},n):(o[i]=t,--r||e(o))},r=i=t.length;i--;)s(t[i],i)})},Ju.resolve=function(t){return new Ju(function(e){e(t)})},Ju.reject=function(t){return new Ju(function(e,n){n(t)})});var nh=Ju,rh=function(t){do if(void 0!==t.context)return t.context;while(t=t.parent);return Qu},ih=function(t,e){this.callback=t,this.parent=e,this.intros=[],this.outros=[],this.children=[],this.totalChildren=this.outroChildren=0,this.detachQueue=[],this.decoratorQueue=[],this.outrosComplete=!1,e&&e.addChild(this)};ih.prototype={addChild:function(t){this.children.push(t),this.totalChildren+=1,this.outroChildren+=1},decrementOutros:function(){this.outroChildren-=1,Y(this)},decrementTotal:function(){this.totalChildren-=1,Y(this)},add:function(t){var e=t.isIntro?this.intros:this.outros;e.push(t)},addDecorator:function(t){this.decoratorQueue.push(t)},remove:function(t){var e=t.isIntro?this.intros:this.outros;D(e,t),Y(this)},init:function(){this.ready=!0,Y(this)},detachNodes:function(){this.decoratorQueue.forEach(Q),this.detachQueue.forEach(K),this.children.forEach(G)}};var sh,oh,ah=[],uh=new T("change");oh={start:function(t,e){var n,r;return e&&(n=new nh(function(t){return r=t})),sh={previousBatch:sh,transitionManager:new ih(r,sh&&sh.transitionManager),views:[],tasks:[],ractives:[],instance:t},t&&sh.ractives.push(t),n},end:function(){J(),sh.transitionManager.init(),!sh.previousBatch&&sh.instance&&(sh.instance.viewmodel.changes=[]),sh=sh.previousBatch},addRactive:function(t){sh&&F(sh.ractives,t)},registerTransition:function(t){t._manager=sh.transitionManager,sh.transitionManager.add(t)},registerDecorator:function(t){sh.transitionManager.addDecorator(t)},addView:function(t){sh.views.push(t)},addUnresolved:function(t){ah.push(t)},removeUnresolved:function(t){D(ah,t)},detachWhenReady:function(t){sh.transitionManager.detachQueue.push(t)},scheduleTask:function(t,e){var n;if(sh){for(n=sh;e&&n.previousBatch;)n=n.previousBatch;n.tasks.push(t)}else t()}};var hh=[],ch={tick:function(){var t,e,n;for(n=Ku(),oh.start(),t=0;t<hh.length;t+=1)e=hh[t],e.tick(n)||hh.splice(t--,1);oh.end(),hh.length?Gu(ch.tick):ch.running=!1},add:function(t){hh.push(t),ch.running||(ch.running=!0,Gu(ch.tick))},abort:function(t,e){for(var n,r=hh.length;r--;)n=hh[r],n.root===e&&n.keypath===t&&n.stop()}},lh=ch,fh=function(t){var e;this.startTime=Date.now();for(e in t)t.hasOwnProperty(e)&&(this[e]=t[e]);this.interpolator=Vu(this.from,this.to,this.root,this.interpolator),this.running=!0,this.tick()};fh.prototype={tick:function(){var t,e,n,r,i,s;return s=this.keypath,this.running?(r=Date.now(),t=r-this.startTime,t>=this.duration?(null!==s&&(oh.start(this.root),this.root.viewmodel.set(s,this.to),oh.end()),this.step&&this.step(1,this.to),this.complete(this.to),i=this.root._animations.indexOf(this),-1===i&&m("Animation was not found"),this.root._animations.splice(i,1),this.running=!1,!1):(e=this.easing?this.easing(t/this.duration):t/this.duration,null!==s&&(n=this.interpolator(e),oh.start(this.root),this.root.viewmodel.set(s,n),oh.end()),this.step&&this.step(e,n),!0)):!1},stop:function(){var t;this.running=!1,t=this.root._animations.indexOf(this),-1===t&&m("Animation was not found"),this.root._animations.splice(t,1)}};var dh=ee,ph={stop:ku},mh=re,vh=new T("detach"),gh=ie,yh=se,wh=function(){var t,e,n;t=this._root[this._isComponentQuery?"liveComponentQueries":"liveQueries"],e=this.selector,n=t.indexOf(e),-1!==n&&(t.splice(n,1),t[e]=null)},bh=function(t,e){var n,r,i,s,o,a,u,h,c,l;for(n=ae(t.component||t._ractive.proxy),r=ae(e.component||e._ractive.proxy),i=L(n),s=L(r);i&&i===s;)n.pop(),r.pop(),o=i,i=L(n),s=L(r);if(i=i.component||i,s=s.component||s,c=i.parentFragment,l=s.parentFragment,c===l)return a=c.items.indexOf(i),u=l.items.indexOf(s),a-u||n.length-r.length;if(h=o.fragments)return a=h.indexOf(c),u=h.indexOf(l),a-u||n.length-r.length;throw new Error("An unexpected condition was met while comparing the position of two components. Please file an issue at https://github.com/RactiveJS/Ractive/issues - thanks!")},xh=function(t,e){var n;return t.compareDocumentPosition?(n=t.compareDocumentPosition(e),2&n?1:-1):bh(t,e)},kh=function(){this.sort(this._isComponentQuery?bh:xh),this._dirty=!1},Eh=function(){var t=this;this._dirty||(this._dirty=!0,oh.scheduleTask(function(){t._sort()}))},_h=function(t){var e=this.indexOf(this._isComponentQuery?t.instance:t);-1!==e&&this.splice(e,1)},Ah=he,Sh=ce,Ch=le,Oh=fe,Ph=de,Th={enqueue:function(t,e){t.event&&(t._eventQueue=t._eventQueue||[],t._eventQueue.push(t.event)),t.event=e},dequeue:function(t){t._eventQueue&&t._eventQueue.length?t.event=t._eventQueue.pop():delete t.event}},Fh=ge,jh=ye,Rh={capture:!0,noUnwrap:!0,fullRootGet:!0},Nh=we,Lh=new T("insert"),Dh=xe,Ih=function(t,e,n,r){this.root=t,this.keypath=e,this.callback=n,this.defer=r.defer,this.context=r&&r.context?r.context:t};Ih.prototype={init:function(t){this.value=this.root.get(this.keypath.str),t!==!1?this.update():this.oldValue=this.value},setValue:function(t){var e=this;a(t,this.value)||(this.value=t,this.defer&&this.ready?oh.scheduleTask(function(){return e.update()}):this.update())},update:function(){this.updating||(this.updating=!0,this.callback.call(this.context,this.value,this.oldValue,this.keypath.str),this.oldValue=this.value,this.updating=!1)}};var Vh,Wh=Array.prototype.slice;Vh=function(t,e,n,r){this.root=t,this.callback=n,this.defer=r.defer,this.keypath=e,this.regex=new RegExp("^"+e.str.replace(/\./g,"\\.").replace(/\*/g,"([^\\.]+)")+"$"),this.values={},this.defer&&(this.proxies=[]),this.context=r&&r.context?r.context:t},Vh.prototype={init:function(t){var e,n;if(e=ke(this.root,this.keypath),t!==!1)for(n in e)e.hasOwnProperty(n)&&this.update(_(n));else this.values=e},update:function(t){var e,n=this;if(t.isPattern){e=ke(this.root,t);for(t in e)e.hasOwnProperty(t)&&this.update(_(t))}else if(!this.root.viewmodel.implicitChanges[t.str])return this.defer&&this.ready?void oh.scheduleTask(function(){return n.getProxy(t).update()}):void this.reallyUpdate(t)},reallyUpdate:function(t){var e,n,r,i;return e=t.str,n=this.root.viewmodel.get(t),this.updating?void(this.values[e]=n):(this.updating=!0,a(n,this.values[e])&&this.ready||(r=Wh.call(this.regex.exec(e),1),i=[n,this.values[e],e].concat(r),this.values[e]=n,this.callback.apply(this.context,i)),void(this.updating=!1))},getProxy:function(t){var e=this;return this.proxies[t.str]||(this.proxies[t.str]={update:function(){return e.reallyUpdate(t)}}),this.proxies[t.str]}};var Uh,Mh,zh,Bh,$h,qh,Qh={},Zh=_e,Hh=Ae,Kh=function(t){return t.trim()},Gh=function(t){return""!==t},Yh=Se,Jh=Ce,Xh=Oe,tc=Array.prototype,ec=function(t){return function(e){for(var n=arguments.length,r=Array(n>1?n-1:0),i=1;n>i;i++)r[i-1]=arguments[i];var o,a,u,h,c=[];if(e=_(C(e)),o=this.viewmodel.get(e),a=o.length,!s(o))throw new Error("Called ractive."+t+"('"+e.str+"'), but '"+e.str+"' does not refer to an array");return c=Pe(o,t,r),h=tc[t].apply(o,r),u=oh.start(this,!0).then(function(){return h}),c?this.viewmodel.smartUpdate(e,o,c):this.viewmodel.mark(e),oh.end(),u}},nc=ec("pop"),rc=ec("push"),ic="/* Ractive.js component styles */\n",sc=[],oc=!1;Ja?(zh=document.createElement("style"),zh.type="text/css",Bh=document.getElementsByTagName("head")[0],qh=!1,$h=zh.styleSheet,Mh=function(){var t=ic+sc.map(function(t){return"\n/* {"+t.id+"} */\n"+t.styles}).join("\n");$h?$h.cssText=t:zh.innerHTML=t,qh||(Bh.appendChild(zh),qh=!0)},Uh={add:function(t){sc.push(t),oc=!0},apply:function(){oc&&(Mh(),oc=!1)}}):Uh=null;var ac,uc,hc=Fe,cc=new T("render"),lc=new T("complete"),fc={extend:function(t,e,n){e.adapt=Re(e.adapt,N(n.adapt))},init:function(){}},dc=/(?:^|\})?\s*([^\{\}]+)\s*\{/g,pc=/\/\*.*?\*\//g,mc=/((?:(?:\[[^\]+]\])|(?:[^\s\+\>\~:]))+)((?::[^\s\+\>\~\(]+(?:\([^\)]+\))?)?\s*[\s\+\>\~]?)\s*/g,vc=/^@media/,gc=/\[data-ractive-css~="\{[a-z0-9-]+\}"]/g,yc=1,wc={name:"css",extend:function(t,e,n){if(n.css){var r=yc++,i=n.noCssTransform?n.css:Ne(n.css,r);e.cssId=r,Uh.add({id:r,styles:i})}},init:function(){}},bc={name:"data",extend:function(t,e,n){var r=void 0,i=void 0;if(n.data&&h(n.data))for(r in n.data)i=n.data[r],i&&"object"==typeof i&&(h(i)||s(i))&&m("Passing a `data` option with object and array properties to Ractive.extend() is discouraged, as mutating them is likely to cause bugs. Consider using a data function instead:\n\n  // this...\n  data: function () {\n    return {\n      myObject: {}\n    };\n  })\n\n  // instead of this:\n  data: {\n    myObject: {}\n  }");e.data=Ve(e.data,n.data)},init:function(t,e,n){var r=Ve(t.prototype.data,n.data);return"function"==typeof r&&(r=r.call(e)),r||{}},reset:function(t){var e=this.init(t.constructor,t,t.viewmodel);return t.viewmodel.reset(e),!0}},xc=/^\s+/;uc=function(t){this.name="ParseError",this.message=t;try{throw new Error(t)}catch(e){this.stack=e.stack}},uc.prototype=Error.prototype,ac=function(t,e){var n,r,i=0;for(this.str=t,this.options=e||{},this.pos=0,this.lines=this.str.split("\n"),this.lineEnds=this.lines.map(function(t){var e=i+t.length+1;return i=e,e},0),this.init&&this.init(t,e),n=[];this.pos<this.str.length&&(r=this.read());)n.push(r);this.leftover=this.remaining(),this.result=this.postProcess?this.postProcess(n,e):n},ac.prototype={read:function(t){var e,n,r,i;for(t||(t=this.converters),e=this.pos,r=t.length,n=0;r>n;n+=1)if(this.pos=e,i=t[n](this))return i;return null},getLinePos:function(t){for(var e,n=0,r=0;t>=this.lineEnds[n];)r=this.lineEnds[n],n+=1;return e=t-r,[n+1,e+1,t]},error:function(t){var e=this.getLinePos(this.pos),n=e[0],r=e[1],i=this.lines[e[0]-1],s=0,o=i.replace(/\t/g,function(t,n){return n<e[1]&&(s+=1),"  "})+"\n"+new Array(e[1]+s).join(" ")+"^----",a=new uc(""+t+" at line "+n+" character "+r+":\n"+o);throw a.line=e[0],a.character=e[1],a.shortMessage=t,a},matchString:function(t){return this.str.substr(this.pos,t.length)===t?(this.pos+=t.length,t):void 0},matchPattern:function(t){var e;return(e=t.exec(this.remaining()))?(this.pos+=e[0].length,e[1]||e[0]):void 0},allowWhitespace:function(){this.matchPattern(xc)},remaining:function(){return this.str.substring(this.pos)},nextChar:function(){return this.str.charAt(this.pos)}},ac.extend=function(t){var e,n,r=this;e=function(t,e){ac.call(this,t,e)},e.prototype=Eu(r.prototype);for(n in t)Fu.call(t,n)&&(e.prototype[n]=t[n]);return e.extend=ac.extend,e};var kc,Ec,_c,Ac=1,Sc=2,Cc=3,Oc=4,Pc=5,Tc=6,Fc=7,jc=8,Rc=9,Nc=10,Lc=13,Dc=14,Ic=15,Vc=16,Wc=17,Uc=18,Mc=20,zc=21,Bc=22,$c=23,qc=24,Qc=25,Zc=26,Hc=27,Kc=30,Gc=31,Yc=32,Jc=33,Xc=34,tl=35,el=36,nl=40,rl=50,il=51,sl=52,ol=53,al=54,ul=60,hl=61,cl=/^[^\s=]+/,ll=/^\s+/,fl=ze,dl=/^(\/(?:[^\n\r\u2028\u2029\/\\[]|\\.|\[(?:[^\n\r\u2028\u2029\]\\]|\\.)*])+\/(?:([gimuy])(?![a-z]*\2))*(?![a-zA-Z_$0-9]))/,pl={t:Nc,exclude:!0},ml="Expected a JavaScript expression",vl="Expected closing paren",gl=qe,yl=/^(?:[+-]?)0*(?:(?:(?:[1-9]\d*)?\.\d+)|(?:(?:0|[1-9]\d*)\.)|(?:0|[1-9]\d*))(?:[eE][+-]?\d+)?/;kc=/^(?=.)[^"'\\]+?(?:(?!.)|(?=["'\\]))/,Ec=/^\\(?:['"\\bfnrt]|0(?![0-9])|x[0-9a-fA-F]{2}|u[0-9a-fA-F]{4}|(?=.)[^ux0-9])/,_c=/^\\(?:\r\n|[\u000A\u000D\u2028\u2029])/;var wl,bl,xl=function(t){return function(e){var n,r,i,s;for(n=e.pos,r='"',i=!1;!i;)s=e.matchPattern(kc)||e.matchPattern(Ec)||e.matchString(t),s?r+='"'===s?'\\"':"\\'"===s?"'":s:(s=e.matchPattern(_c),s?r+="\\u"+("000"+s.charCodeAt(1).toString(16)).slice(-4):i=!0);return r+='"',JSON.parse(r)}},kl=xl('"'),El=xl("'"),_l=function(t){var e,n;return e=t.pos,t.matchString('"')?(n=El(t),t.matchString('"')?{t:zc,v:n}:(t.pos=e,null)):t.matchString("'")?(n=kl(t),t.matchString("'")?{t:zc,v:n}:(t.pos=e,null)):null},Al=/^[a-zA-Z_$][a-zA-Z_$0-9]*/,Sl=/^[a-zA-Z_$][a-zA-Z_$0-9]*$/,Cl=He,Ol=function(t){var e,n;return e=t.pos,t.allowWhitespace(),t.matchString("{")?(n=Ke(t),t.allowWhitespace(),t.matchString("}")?{t:$c,m:n}:(t.pos=e,null)):(t.pos=e,null)},Pl=function(t){var e,n;return e=t.pos,t.allowWhitespace(),t.matchString("[")?(n=Ge(t),t.matchString("]")?{t:Bc,m:n}:(t.pos=e,null)):(t.pos=e,null)},Tl=/^(?:~\/|(?:\.\.\/)+|\.\/(?:\.\.\/)*|\.)/;wl=/^(?:Array|console|Date|RegExp|decodeURIComponent|decodeURI|encodeURIComponent|encodeURI|isFinite|isNaN|parseFloat|parseInt|JSON|Math|NaN|undefined|null)\b/,bl=/^(?:break|case|catch|continue|debugger|default|delete|do|else|finally|for|function|if|in|instanceof|new|return|switch|throw|try|typeof|var|void|while|with)$/;var Fl,jl,Rl=/^[a-zA-Z$_0-9]+(?:(?:\.[a-zA-Z$_0-9]+)|(?:\[[0-9]+\]))*/,Nl=/^[a-zA-Z_$][-a-zA-Z_$0-9]*/,Ll=function(t){return Ye(t)||Je(t)||Xe(t)},Dl=function(t){var e,n,r,i;if(n=Ll(t),!n)return null;for(;n;)if(e=t.pos,r=tn(t))n={t:Yc,x:n,r:r};else{if(!t.matchString("("))break;t.allowWhitespace(),i=Ge(t),t.allowWhitespace(),t.matchString(")")||t.error(vl),n={t:nl,x:n},i&&(n.o=i)}return n};jl=function(t,e){return function(n){var r;return(r=e(n))?r:n.matchString(t)?(n.allowWhitespace(),r=nn(n),r||n.error(ml),{s:t,o:r,t:Jc}):null}},function(){var t,e,n,r,i;for(r="! ~ + - typeof".split(" "),i=Dl,t=0,e=r.length;e>t;t+=1)n=jl(r[t],i),i=n;Fl=i}();var Il,Vl,Wl=Fl;Vl=function(t,e){return function(n){var r,i,s;if(i=e(n),!i)return null;for(;;){if(r=n.pos,n.allowWhitespace(),!n.matchString(t))return n.pos=r,i;if("in"===t&&/[a-zA-Z_$0-9]/.test(n.remaining().charAt(0)))return n.pos=r,i;if(n.allowWhitespace(),s=e(n),!s)return n.pos=r,i;i={t:el,s:t,o:[i,s]}}}},function(){var t,e,n,r,i;for(r="* / % + - << >> >>> < <= > >= in instanceof == != === !== & ^ | && ||".split(" "),i=Wl,t=0,e=r.length;e>t;t+=1)n=Vl(r[t],i),i=n;Il=i}();var Ul,Ml,zl,Bl,$l,ql,Ql,Zl,Hl=en,Kl=/^[0-9][1-9]*$/,Gl=ln,Yl=/^yield\s*/,Jl=vn,Xl=/^\s*else\s*/,tf=gn,ef=/^\s*elseif\s+/,nf={each:sl,"if":rl,"if-with":al,"with":ol,unless:il},rf=/^\s*:\s*([a-zA-Z_$][a-zA-Z_$0-9]*)/,sf=/^\s*,\s*([a-zA-Z_$][a-zA-Z_$0-9]*)/,of=new RegExp("^("+Object.keys(nf).join("|")+")\\b"),af="<!--",uf="-->";Ul=/^(allowFullscreen|async|autofocus|autoplay|checked|compact|controls|declare|default|defaultChecked|defaultMuted|defaultSelected|defer|disabled|enabled|formNoValidate|hidden|indeterminate|inert|isMap|itemScope|loop|multiple|muted|noHref|noResize|noShade|noValidate|noWrap|open|pauseOnExit|readOnly|required|reversed|scoped|seamless|selected|sortable|translate|trueSpeed|typeMustMatch|visible)$/i,Ml=/^(?:area|base|br|col|command|doctype|embed|hr|img|input|keygen|link|meta|param|source|track|wbr)$/i,zl={quot:34,amp:38,apos:39,lt:60,gt:62,nbsp:160,iexcl:161,cent:162,pound:163,curren:164,yen:165,brvbar:166,sect:167,uml:168,copy:169,ordf:170,laquo:171,not:172,shy:173,reg:174,macr:175,deg:176,plusmn:177,sup2:178,sup3:179,acute:180,micro:181,para:182,middot:183,cedil:184,sup1:185,ordm:186,raquo:187,frac14:188,frac12:189,frac34:190,iquest:191,Agrave:192,Aacute:193,Acirc:194,Atilde:195,Auml:196,Aring:197,AElig:198,Ccedil:199,Egrave:200,Eacute:201,Ecirc:202,Euml:203,Igrave:204,Iacute:205,Icirc:206,Iuml:207,ETH:208,Ntilde:209,Ograve:210,Oacute:211,Ocirc:212,Otilde:213,Ouml:214,times:215,Oslash:216,Ugrave:217,Uacute:218,Ucirc:219,Uuml:220,Yacute:221,THORN:222,szlig:223,agrave:224,aacute:225,acirc:226,atilde:227,auml:228,aring:229,aelig:230,ccedil:231,egrave:232,eacute:233,ecirc:234,euml:235,igrave:236,iacute:237,icirc:238,iuml:239,eth:240,ntilde:241,ograve:242,oacute:243,ocirc:244,otilde:245,ouml:246,divide:247,oslash:248,ugrave:249,uacute:250,ucirc:251,uuml:252,yacute:253,thorn:254,yuml:255,OElig:338,oelig:339,Scaron:352,scaron:353,Yuml:376,fnof:402,circ:710,tilde:732,Alpha:913,Beta:914,Gamma:915,Delta:916,Epsilon:917,Zeta:918,Eta:919,Theta:920,Iota:921,Kappa:922,Lambda:923,Mu:924,Nu:925,Xi:926,Omicron:927,Pi:928,Rho:929,Sigma:931,Tau:932,Upsilon:933,Phi:934,Chi:935,Psi:936,Omega:937,alpha:945,beta:946,gamma:947,delta:948,epsilon:949,zeta:950,eta:951,theta:952,iota:953,kappa:954,lambda:955,mu:956,nu:957,xi:958,omicron:959,pi:960,rho:961,sigmaf:962,sigma:963,tau:964,upsilon:965,phi:966,chi:967,psi:968,omega:969,thetasym:977,upsih:978,piv:982,ensp:8194,emsp:8195,thinsp:8201,zwnj:8204,zwj:8205,lrm:8206,rlm:8207,ndash:8211,mdash:8212,lsquo:8216,rsquo:8217,sbquo:8218,ldquo:8220,rdquo:8221,bdquo:8222,dagger:8224,Dagger:8225,bull:8226,hellip:8230,permil:8240,prime:8242,Prime:8243,lsaquo:8249,rsaquo:8250,oline:8254,frasl:8260,euro:8364,image:8465,weierp:8472,real:8476,trade:8482,alefsym:8501,larr:8592,uarr:8593,rarr:8594,darr:8595,harr:8596,crarr:8629,lArr:8656,uArr:8657,rArr:8658,dArr:8659,hArr:8660,forall:8704,part:8706,exist:8707,empty:8709,nabla:8711,isin:8712,notin:8713,ni:8715,prod:8719,sum:8721,minus:8722,lowast:8727,radic:8730,prop:8733,infin:8734,ang:8736,and:8743,or:8744,cap:8745,cup:8746,"int":8747,there4:8756,sim:8764,cong:8773,asymp:8776,ne:8800,equiv:8801,le:8804,ge:8805,sub:8834,sup:8835,nsub:8836,sube:8838,supe:8839,oplus:8853,otimes:8855,perp:8869,sdot:8901,lceil:8968,rceil:8969,lfloor:8970,rfloor:8971,lang:9001,rang:9002,loz:9674,spades:9824,clubs:9827,hearts:9829,diams:9830},Bl=[8364,129,8218,402,8222,8230,8224,8225,710,8240,352,8249,338,141,381,143,144,8216,8217,8220,8221,8226,8211,8212,732,8482,353,8250,339,157,382,376],$l=new RegExp("&(#?(?:x[\\w\\d]+|\\d+|"+Object.keys(zl).join("|")+"));?","g"),ql=/</g,Ql=/>/g,Zl=/&/g;var hf,cf,lf,ff,df,pf,mf,vf=/^\s*\r?\n/,gf=/\r?\n\s*$/,yf=function(t){var e,n,r,i,s;for(e=1;e<t.length;e+=1)n=t[e],r=t[e-1],i=t[e-2],Cn(n)&&On(r)&&Cn(i)&&gf.test(i)&&vf.test(n)&&(t[e-2]=i.replace(gf,"\n"),t[e]=n.replace(vf,"")),Pn(n)&&Cn(r)&&gf.test(r)&&Cn(n.f[0])&&vf.test(n.f[0])&&(t[e-1]=r.replace(gf,"\n"),n.f[0]=n.f[0].replace(vf,"")),Cn(n)&&Pn(r)&&(s=L(r.f),Cn(s)&&gf.test(s)&&vf.test(n)&&(r.f[r.f.length-1]=s.replace(gf,"\n"),t[e]=n.replace(vf,"")));return t},wf=/^[ \t\f\r\n]+/,bf=/[ \t\f\r\n]+$/,xf=function(t,e,n){var r;e&&(r=t[0],"string"==typeof r&&(r=r.replace(wf,""),r?t[0]=r:t.shift())),n&&(r=L(t),"string"==typeof r&&(r=r.replace(bf,""),r?t[t.length-1]=r:t.pop()))},kf=/[ \t\f\r\n]+/g,Ef=/^(?:pre|script|style|textarea)$/i,_f=/^\s+/,Af=/\s+$/,Sf=/^([a-zA-Z]{1,}:?[a-zA-Z0-9\-]*)\s*\>/,Cf=function(t,e){var n,r,i;for(n=e.length;n--;){if(r=t.indexOf(e[n]),!r)return 0;-1!==r&&(!i||i>r)&&(i=r)}return i||-1},Of=/^[^\s"'>\/=]+/,Pf=/^[^\s"'=<>`]+/;cf={"true":!0,"false":!1,undefined:void 0,"null":null},lf=new RegExp("^(?:"+Object.keys(cf).join("|")+")"),ff=/^(?:[+-]?)(?:(?:(?:0|[1-9]\d*)?\.\d+)|(?:(?:0|[1-9]\d*)\.)|(?:0|[1-9]\d*))(?:[eE][+-]?\d+)?/,df=/\$\{([^\}]+)\}/g,pf=/^\$\{([^\}]+)\}/,mf=/^\s*$/,hf=ac.extend({init:function(t,e){this.values=e.values,this.allowWhitespace()},postProcess:function(t){return 1===t.length&&mf.test(this.leftover)?{value:t[0].v}:null},converters:[function(t){var e;return t.values?(e=t.matchPattern(pf),e&&t.values.hasOwnProperty(e)?{v:t.values[e]}:void 0):null},function(t){var e;return(e=t.matchPattern(lf))?{v:cf[e]}:void 0},function(t){var e;return(e=t.matchPattern(ff))?{v:+e}:void 0},function(t){var e,n=_l(t);return n&&(e=t.values)?{v:n.v.replace(df,function(t,n){return n in e?e[n]:n})}:n},function(t){var e,n;if(!t.matchString("{"))return null;if(e={},t.allowWhitespace(),t.matchString("}"))return{v:e};for(;n=Vn(t);){if(e[n.key]=n.value,t.allowWhitespace(),t.matchString("}"))return{v:e};if(!t.matchString(","))return null}return null},function(t){var e,n;if(!t.matchString("["))return null;if(e=[],t.allowWhitespace(),t.matchString("]"))return{v:e};for(;n=t.read();){if(e.push(n.v),t.allowWhitespace(),t.matchString("]"))return{v:e};if(!t.matchString(","))return null;t.allowWhitespace()}return null}]});var Tf,Ff=function(t,e){var n=new hf(t,{values:e});return n.result},jf=/^([a-zA-Z_$][a-zA-Z_$0-9]*)\(/,Rf=/\)\s*$/;Tf=ac.extend({converters:[nn]});var Nf,Lf=/^[a-zA-Z]{1,}:?[a-zA-Z0-9\-]*/,Df=/^[\s\n\/>]/,If=/^on/,Vf=/^on-([a-zA-Z\\*\\.$_][a-zA-Z\\*\\.$_0-9\-]+)$/,Wf=/^(?:change|reset|teardown|update|construct|config|init|render|unrender|detach|insert)$/,Uf={"intro-outro":"t0",intro:"t1",outro:"t2",decorator:"o"},Mf={exclude:!0};Nf={li:["li"],dt:["dt","dd"],dd:["dt","dd"],p:"address article aside blockquote div dl fieldset footer form h1 h2 h3 h4 h5 h6 header hgroup hr main menu nav ol p pre section table ul".split(" "),rt:["rt","rp"],rp:["rt","rp"],optgroup:["optgroup"],option:["option","optgroup"],thead:["tbody","tfoot"],tbody:["tbody","tfoot"],tfoot:["tbody"],tr:["tr","tbody"],td:["td","th","tr"],th:["td","th","tr"]};var zf,Bf=/[-\/\\^$*+?.()|[\]{}]/g,$f=/^<!--\s*/,qf=/s*>\s*([a-zA-Z_$][-a-zA-Z_$0-9]*)\s*/,Qf=/\s*-->/,Zf=/^#\s*partial\s+/,Hf=[cn,hn,yn,pn,dn,Gl],Kf=[un],Gf=[hn,yn,dn],Yf=void 0,Jf=[Be,En,Un,zn],Xf=[$n,qn];Yf=ac.extend({init:function(t,e){var n=e.tripleDelimiters||["{{{","}}}"],r=e.staticDelimiters||["[[","]]"],i=e.staticTripleDelimiters||["[[[","]]]"];this.standardDelimiters=e.delimiters||["{{","}}"],this.tags=[{isStatic:!1,isTriple:!1,open:this.standardDelimiters[0],close:this.standardDelimiters[1],readers:Hf},{isStatic:!1,isTriple:!0,open:n[0],close:n[1],readers:Kf},{isStatic:!0,isTriple:!1,open:r[0],close:r[1],readers:Gf},{isStatic:!0,isTriple:!0,open:i[0],close:i[1],readers:Kf}],this.sortMustacheTags(),this.sectionDepth=0,this.elementStack=[],this.interpolate={script:!e.interpolate||e.interpolate.script!==!1,style:!e.interpolate||e.interpolate.style!==!1},e.sanitize===!0&&(e.sanitize={elements:"applet base basefont body frame frameset head html isindex link meta noframes noscript object param script style title".split(" "),eventAttributes:!0}),this.stripComments=e.stripComments!==!1,this.preserveWhitespace=e.preserveWhitespace,this.sanitizeElements=e.sanitize&&e.sanitize.elements,this.sanitizeEventAttributes=e.sanitize&&e.sanitize.eventAttributes,this.includeLinePositions=e.includeLinePositions},postProcess:function(t){return t.length?(this.sectionDepth>0&&this.error("A section was left open"),Tn(t[0].t,this.stripComments,this.preserveWhitespace,!this.preserveWhitespace,!this.preserveWhitespace),t[0]):{t:[],v:su}},converters:[Qn],sortMustacheTags:function(){this.tags.sort(function(t,e){return e.open.length-t.open.length})}});var td,ed,nd,rd=["preserveWhitespace","sanitize","stripComments","delimiters","tripleDelimiters","interpolate"],id={parse:Kn,fromId:Gn,isHashedId:Yn,isParsed:Jn,getParseOptions:Xn,createHelper:Hn},sd=id,od={name:"template",extend:function(t,e,n){var r;"template"in n&&(r=n.template,e.template="function"==typeof r?r:rr(r,e))},init:function(t,e,n){var r,i;r="template"in n?n.template:t.prototype.template,"function"==typeof r&&(i=r,r=er(e,i),e._config.template={fn:i,result:r}),r=rr(r,e),e.template=r.t,r.p&&ir(e.partials,r.p)},reset:function(t){var e,n=tr(t);return n?(e=rr(n,t),t.template=e.t,ir(t.partials,e.p,!0),!0):void 0}};td=["adaptors","components","computed","decorators","easing","events","interpolators","partials","transitions"],ed=function(t,e){this.name=t,this.useDefaults=e},ed.prototype={constructor:ed,extend:function(t,e,n){this.configure(this.useDefaults?t.defaults:t,this.useDefaults?e:e.constructor,n)},init:function(){},configure:function(t,e,n){var r,i=this.name,s=n[i];r=Eu(t[i]);for(var o in s)r[o]=s[o];e[i]=r},reset:function(t){var e=t[this.name],n=!1;return Object.keys(e).forEach(function(t){var r=e[t];r._fn&&(r._fn.isOwner?e[t]=r._fn:delete e[t],n=!0)}),n}},nd=td.map(function(t){return new ed(t,"computed"===t)});var ad,ud,hd,cd,ld,fd,dd=sr;cd={adapt:fc,css:wc,data:bc,template:od},hd=Object.keys(au),fd=fr(hd.filter(function(t){return!cd[t]})),ld=fr(hd.concat(nd.map(function(t){return t.name}))),ud=[].concat(hd.filter(function(t){return!nd[t]&&!cd[t]}),nd,cd.data,cd.template,cd.css),ad={extend:function(t,e,n){return cr("extend",t,e,n)},init:function(t,e,n){return cr("init",t,e,n)},reset:function(t){return ud.filter(function(e){return e.reset&&e.reset(t)}).map(function(t){return t.name})},order:ud};var pd=dr,md=pr,vd=mr,gd=vr,yd=gr,wd=yr,bd=wr,xd=br,kd=kr,Ed=Er,_d=_r,Ad=function(){return e(this.node)},Sd=function(t){this.type=Ac,this.text=t.template};Sd.prototype={detach:Ad,firstNode:function(){return this.node},render:function(){return this.node||(this.node=document.createTextNode(this.text)),this.node},toString:function(t){return t?Sn(this.text):this.text},unrender:function(t){return t?this.detach():void 0}};var Cd=Ar,Od=Sr,Pd=function(t,e,n){var r;this.ref=e,this.resolved=!1,this.root=t.root,this.parentFragment=t.parentFragment,this.callback=n,r=M(t.root,e,t.parentFragment),void 0!=r?this.resolve(r):oh.addUnresolved(this)};Pd.prototype={resolve:function(t){this.keypath&&!t&&oh.addUnresolved(this),this.resolved=!0,this.keypath=t,this.callback(t)},forceResolution:function(){this.resolve(_(this.ref))},rebind:function(t,e){var n;void 0!=this.keypath&&(n=this.keypath.replace(t,e),void 0!==n&&this.resolve(n))},unbind:function(){this.resolved||oh.removeUnresolved(this)}};var Td=function(t,e,n){this.parentFragment=t.parentFragment,this.ref=e,this.callback=n,this.rebind()},Fd={"@keypath":{prefix:"c",prop:["context"]},"@index":{prefix:"i",prop:["index"]},"@key":{prefix:"k",prop:["key","index"]}};Td.prototype={rebind:function(){var t,e=this.ref,n=this.parentFragment,r=Fd[e];if(!r)throw new Error('Unknown special reference "'+e+'" - valid references are @index, @key and @keypath');if(this.cached)return this.callback(_("@"+r.prefix+Cr(this.cached,r)));if(-1!==r.prop.indexOf("index")||-1!==r.prop.indexOf("key"))for(;n;){if(n.owner.currentSubtype===sl&&void 0!==(t=Cr(n,r)))return this.cached=n,n.registerIndexRef(this),this.callback(_("@"+r.prefix+t));n=!n.parent&&n.owner&&n.owner.component&&n.owner.component.parentFragment&&!n.owner.component.instance.isolated?n.owner.component.parentFragment:n.parent}else for(;n;){if(void 0!==(t=Cr(n,r)))return this.callback(_("@"+r.prefix+t.str));n=n.parent}},unbind:function(){this.cached&&this.cached.unregisterIndexRef(this)}};var jd=function(t,e,n){this.parentFragment=t.parentFragment,this.ref=e,this.callback=n,e.ref.fragment.registerIndexRef(this),this.rebind()};jd.prototype={rebind:function(){var t,e=this.ref.ref;t="k"===e.ref.t?"k"+e.fragment.key:"i"+e.fragment.index,void 0!==t&&this.callback(_("@"+t))},unbind:function(){this.ref.ref.fragment.unregisterIndexRef(this)}},Or.resolve=function(t){var e,n,r={};for(e in t.refs)n=t.refs[e],r[n.ref.n]="k"===n.ref.t?n.fragment.key:n.fragment.index;return r};var Rd,Nd={},Ld=Function.prototype.bind;Rd=function(t,e,n,r){var i,s=this;i=t.root,this.root=i,this.parentFragment=e,this.callback=r,this.owner=t,this.str=n.s,this.keypaths=[],this.pending=n.r.length,this.refResolvers=n.r.map(function(t,e){return Pr(s,t,function(t){s.resolve(e,t)})}),this.ready=!0,this.bubble()},Rd.prototype={bubble:function(){this.ready&&(this.uniqueString=jr(this.str,this.keypaths),this.keypath=Rr(this.uniqueString),this.createEvaluator(),this.callback(this.keypath))},unbind:function(){for(var t;t=this.refResolvers.pop();)t.unbind()},resolve:function(t,e){this.keypaths[t]=e,this.bubble()},createEvaluator:function(){var t,e,n,r,i,s=this;r=this.keypath,t=this.root.viewmodel.computations[r.str],t?this.root.viewmodel.mark(r):(i=Tr(this.str,this.refResolvers.length),e=this.keypaths.map(function(t){var e;return"undefined"===t?function(){return void 0}:t.isSpecial?(e=t.value,function(){return e}):function(){var e=s.root.viewmodel.get(t,{noUnwrap:!0,fullRootGet:!0});return"function"==typeof e&&(e=Lr(e,s.root)),e}}),n={deps:this.keypaths.filter(Nr),getter:function(){var t=e.map(Fr);return i.apply(null,t)}},t=this.root.viewmodel.compute(r,n))},rebind:function(t,e){this.refResolvers.forEach(function(n){return n.rebind(t,e)})}};var Dd=function(t,e,n){var r=this;this.resolver=e,this.root=e.root,this.parentFragment=n,this.viewmodel=e.root.viewmodel,"string"==typeof t?this.value=t:t.t===Kc?this.refResolver=Pr(this,t.n,function(t){r.resolve(t)}):new Rd(e,n,t,function(t){r.resolve(t)})};Dd.prototype={resolve:function(t){this.keypath&&this.viewmodel.unregister(this.keypath,this),this.keypath=t,this.value=this.viewmodel.get(t),this.bind(),this.resolver.bubble()},bind:function(){this.viewmodel.register(this.keypath,this)},rebind:function(t,e){this.refResolver&&this.refResolver.rebind(t,e)},setValue:function(t){this.value=t,this.resolver.bubble()},unbind:function(){this.keypath&&this.viewmodel.unregister(this.keypath,this),this.refResolver&&this.refResolver.unbind()},forceResolution:function(){this.refResolver&&this.refResolver.forceResolution()}};var Id=function(t,e,n){var r,i,s,o,a=this;this.parentFragment=o=t.parentFragment,this.root=r=t.root,this.mustache=t,this.ref=i=e.r,this.callback=n,this.unresolved=[],(s=M(r,i,o))?this.base=s:this.baseResolver=new Pd(this,i,function(t){a.base=t,a.baseResolver=null,a.bubble()}),this.members=e.m.map(function(t){return new Dd(t,a,o)}),this.ready=!0,this.bubble()};Id.prototype={getKeypath:function(){var t=this.members.map(Dr);return!t.every(Ir)||this.baseResolver?null:this.base.join(t.join("."))},bubble:function(){this.ready&&!this.baseResolver&&this.callback(this.getKeypath())},unbind:function(){this.members.forEach(Z)},rebind:function(t,e){var n;if(this.base){var r=this.base.replace(t,e);r&&r!==this.base&&(this.base=r,n=!0)}this.members.forEach(function(r){r.rebind(t,e)&&(n=!0)}),n&&this.bubble()},forceResolution:function(){this.baseResolver&&(this.base=_(this.ref),this.baseResolver.unbind(),this.baseResolver=null),this.members.forEach(Vr),this.bubble()}};var Vd=Wr,Wd=Ur,Ud=Mr,Md={getValue:Od,init:Vd,resolve:Wd,rebind:Ud},zd=function(t){this.type=Sc,Md.init(this,t)};zd.prototype={update:function(){this.node.data=void 0==this.value?"":this.value},resolve:Md.resolve,rebind:Md.rebind,detach:Ad,unbind:Cd,render:function(){return this.node||(this.node=document.createTextNode(n(this.value))),this.node},unrender:function(t){t&&e(this.node)},getValue:Md.getValue,setValue:function(t){var e;this.keypath&&(e=this.root.viewmodel.wrapped[this.keypath.str])&&(t=e.get()),a(t,this.value)||(this.value=t,this.parentFragment.bubble(),this.node&&oh.addView(this))},firstNode:function(){return this.node},toString:function(t){var e=""+n(this.value);return t?Sn(e):e}};var Bd=zr,$d=Br,qd=$r,Qd=qr,Zd=Qr,Hd=Zr,Kd=Hr,Gd=Kr,Yd=Gr,Jd=function(t,e){Md.rebind.call(this,t,e)},Xd=Jr,tp=Xr,ep=ci,np=li,rp=fi,ip=mi,sp=function(t){this.type=Oc,this.subtype=this.currentSubtype=t.template.n,this.inverted=this.subtype===il,this.pElement=t.pElement,this.fragments=[],this.fragmentsToCreate=[],this.fragmentsToRender=[],this.fragmentsToUnrender=[],t.template.i&&(this.indexRefs=t.template.i.split(",").map(function(t,e){return{n:t,t:0===e?"k":"i"}})),this.renderedFragments=[],this.length=0,Md.init(this,t)};sp.prototype={bubble:Bd,detach:$d,find:qd,findAll:Qd,findAllComponents:Zd,findComponent:Hd,findNextNode:Kd,firstNode:Gd,getIndexRef:function(t){if(this.indexRefs)for(var e=this.indexRefs.length;e--;){var n=this.indexRefs[e];
if(n.n===t)return n}},getValue:Md.getValue,shuffle:Yd,rebind:Jd,render:Xd,resolve:Md.resolve,setValue:tp,toString:ep,unbind:np,unrender:rp,update:ip};var op,ap,up=vi,hp=gi,cp=yi,lp=wi,fp={};try{cu("table").innerHTML="foo"}catch(Cu){op=!0,ap={TABLE:['<table class="x">',"</table>"],THEAD:['<table><thead class="x">',"</thead></table>"],TBODY:['<table><tbody class="x">',"</tbody></table>"],TR:['<table><tr class="x">',"</tr></table>"],SELECT:['<select class="x">',"</select>"]}}var dp=function(t,e,n){var r,i,s,o,a,u=[];if(null!=t&&""!==t){for(op&&(i=ap[e.tagName])?(r=bi("DIV"),r.innerHTML=i[0]+t+i[1],r=r.querySelector(".x"),"SELECT"===r.tagName&&(s=r.options[r.selectedIndex])):e.namespaceURI===nu.svg?(r=bi("DIV"),r.innerHTML='<svg class="x">'+t+"</svg>",r=r.querySelector(".x")):(r=bi(e.tagName),r.innerHTML=t,"SELECT"===r.tagName&&(s=r.options[r.selectedIndex]));o=r.firstChild;)u.push(o),n.appendChild(o);if("SELECT"===e.tagName)for(a=u.length;a--;)u[a]!==s&&(u[a].selected=!1)}return u},pp=Ei,mp=_i,vp=Ai,gp=Si,yp=Ci,wp=function(t){this.type=Cc,Md.init(this,t)};wp.prototype={detach:up,find:hp,findAll:cp,firstNode:lp,getValue:Md.getValue,rebind:Md.rebind,render:pp,resolve:Md.resolve,setValue:mp,toString:vp,unbind:Cd,unrender:gp,update:yp};var bp,xp,kp,Ep,_p=function(){this.parentFragment.bubble()},Ap=Oi,Sp=function(t){return this.node?lu(this.node,t)?this.node:this.fragment&&this.fragment.find?this.fragment.find(t):void 0:null},Cp=function(t,e){e._test(this,!0)&&e.live&&(this.liveQueries||(this.liveQueries=[])).push(e),this.fragment&&this.fragment.findAll(t,e)},Op=function(t,e){this.fragment&&this.fragment.findAllComponents(t,e)},Pp=function(t){return this.fragment?this.fragment.findComponent(t):void 0},Tp=Pi,Fp=Ti,jp=Fi,Rp=/^true|on|yes|1$/i,Np=/^[0-9]+$/,Lp=function(t,e){var n,r,i;return i=e.a||{},r={},n=i.twoway,void 0!==n&&(r.twoway=0===n||Rp.test(n)),n=i.lazy,void 0!==n&&(r.lazy=0!==n&&Np.test(n)?parseInt(n):0===n||Rp.test(n)),r},Dp=ji;bp="altGlyph altGlyphDef altGlyphItem animateColor animateMotion animateTransform clipPath feBlend feColorMatrix feComponentTransfer feComposite feConvolveMatrix feDiffuseLighting feDisplacementMap feDistantLight feFlood feFuncA feFuncB feFuncG feFuncR feGaussianBlur feImage feMerge feMergeNode feMorphology feOffset fePointLight feSpecularLighting feSpotLight feTile feTurbulence foreignObject glyphRef linearGradient radialGradient textPath vkern".split(" "),xp="attributeName attributeType baseFrequency baseProfile calcMode clipPathUnits contentScriptType contentStyleType diffuseConstant edgeMode externalResourcesRequired filterRes filterUnits glyphRef gradientTransform gradientUnits kernelMatrix kernelUnitLength keyPoints keySplines keyTimes lengthAdjust limitingConeAngle markerHeight markerUnits markerWidth maskContentUnits maskUnits numOctaves pathLength patternContentUnits patternTransform patternUnits pointsAtX pointsAtY pointsAtZ preserveAlpha preserveAspectRatio primitiveUnits refX refY repeatCount repeatDur requiredExtensions requiredFeatures specularConstant specularExponent spreadMethod startOffset stdDeviation stitchTiles surfaceScale systemLanguage tableValues targetX targetY textLength viewBox viewTarget xChannelSelector yChannelSelector zoomAndPan".split(" "),kp=function(t){for(var e={},n=t.length;n--;)e[t[n].toLowerCase()]=t[n];return e},Ep=kp(bp.concat(xp));var Ip=function(t){var e=t.toLowerCase();return Ep[e]||e},Vp=function(t,e){var n,r;if(n=e.indexOf(":"),-1===n||(r=e.substr(0,n),"xmlns"===r))t.name=t.element.namespace!==nu.html?Ip(e):e;else if(e=e.substring(n+1),t.name=Ip(e),t.namespace=nu[r.toLowerCase()],t.namespacePrefix=r,!t.namespace)throw'Unknown namespace ("'+r+'")'},Wp=Ni,Up=Li,Mp=Di,zp={"accept-charset":"acceptCharset",accesskey:"accessKey",bgcolor:"bgColor","class":"className",codebase:"codeBase",colspan:"colSpan",contenteditable:"contentEditable",datetime:"dateTime",dirname:"dirName","for":"htmlFor","http-equiv":"httpEquiv",ismap:"isMap",maxlength:"maxLength",novalidate:"noValidate",pubdate:"pubDate",readonly:"readOnly",rowspan:"rowSpan",tabindex:"tabIndex",usemap:"useMap"},Bp=Ii,$p=Wi,qp=Ui,Qp=Mi,Zp=zi,Hp=Bi,Kp=$i,Gp=qi,Yp=Qi,Jp=Zi,Xp=Hi,tm=Ki,em=Gi,nm=Yi,rm=Ji,im=function(t){this.init(t)};im.prototype={bubble:Dp,init:Wp,rebind:Up,render:Mp,toString:Bp,unbind:$p,update:rm};var sm,om=function(t,e){var n,r,i=[];for(n in e)"twoway"!==n&&"lazy"!==n&&e.hasOwnProperty(n)&&(r=new im({element:t,name:n,value:e[n],root:t.root}),i[n]=r,"value"!==n&&i.push(r));return(r=i.value)&&i.push(r),i};"undefined"!=typeof document&&(sm=cu("div"));var am=function(t,e){this.element=t,this.root=t.root,this.parentFragment=t.parentFragment,this.attributes=[],this.fragment=new oy({root:t.root,owner:this,template:[e]})};am.prototype={bubble:function(){this.node&&this.update(),this.element.bubble()},rebind:function(t,e){this.fragment.rebind(t,e)},render:function(t){this.node=t,this.isSvg=t.namespaceURI===nu.svg,this.update()},unbind:function(){this.fragment.unbind()},update:function(){var t,e,n=this;t=this.fragment.toString(),e=Xi(t,this.isSvg),this.attributes.filter(function(t){return ts(e,t)}).forEach(function(t){n.node.removeAttribute(t.name)}),e.forEach(function(t){n.node.setAttribute(t.name,t.value)}),this.attributes=e},toString:function(){return this.fragment.toString()}};var um=function(t,e){return e?e.map(function(e){return new am(t,e)}):[]},hm=function(t){var e,n,r,i;if(this.element=t,this.root=t.root,this.attribute=t.attributes[this.name||"value"],e=this.attribute.interpolator,e.twowayBinding=this,n=e.keypath){if("}"===n.str.slice(-1))return v("Two-way binding does not work with expressions (`%s` on <%s>)",e.resolver.uniqueString,t.name,{ractive:this.root}),!1;if(n.isSpecial)return v("Two-way binding does not work with %s",e.resolver.ref,{ractive:this.root}),!1}else{var s=e.template.r?"'"+e.template.r+"' reference":"expression";m("The %s being used for two-way binding is ambiguous, and may cause unexpected results. Consider initialising your data to eliminate the ambiguity",s,{ractive:this.root}),e.resolver.forceResolution(),n=e.keypath}this.attribute.isTwoway=!0,this.keypath=n,r=this.root.viewmodel.get(n),void 0===r&&this.getInitialValue&&(r=this.getInitialValue(),void 0!==r&&this.root.viewmodel.set(n,r)),(i=es(t))&&(this.resetValue=r,i.formBindings.push(this))};hm.prototype={handleChange:function(){var t=this;oh.start(this.root),this.attribute.locked=!0,this.root.viewmodel.set(this.keypath,this.getValue()),oh.scheduleTask(function(){return t.attribute.locked=!1}),oh.end()},rebound:function(){var t,e,n;e=this.keypath,n=this.attribute.interpolator.keypath,e!==n&&(D(this.root._twowayBindings[e.str],this),this.keypath=n,t=this.root._twowayBindings[n.str]||(this.root._twowayBindings[n.str]=[]),t.push(this))},unbind:function(){}},hm.extend=function(t){var e,n=this;return e=function(t){hm.call(this,t),this.init&&this.init()},e.prototype=Eu(n.prototype),r(e.prototype,t),e.extend=hm.extend,e};var cm,lm=hm,fm=ns,dm=lm.extend({getInitialValue:function(){return this.element.fragment?this.element.fragment.toString():""},render:function(){var t=this.element.node;t.addEventListener("change",fm,!1),this.root.lazy||(t.addEventListener("input",fm,!1),t.attachEvent&&t.addEventListener("keyup",fm,!1))},unrender:function(){var t=this.element.node;t.removeEventListener("change",fm,!1),t.removeEventListener("input",fm,!1),t.removeEventListener("keyup",fm,!1)},getValue:function(){return this.element.node.innerHTML}}),pm={},mm=lm.extend({name:"checked",init:function(){this.siblings=rs(this.root._guid,"radio",this.element.getAttribute("name")),this.siblings.push(this)},render:function(){var t=this.element.node;t.addEventListener("change",fm,!1),t.attachEvent&&t.addEventListener("click",fm,!1)},unrender:function(){var t=this.element.node;t.removeEventListener("change",fm,!1),t.removeEventListener("click",fm,!1)},handleChange:function(){oh.start(this.root),this.siblings.forEach(function(t){t.root.viewmodel.set(t.keypath,t.getValue())}),oh.end()},getValue:function(){return this.element.node.checked},unbind:function(){D(this.siblings,this)}}),vm=lm.extend({name:"name",init:function(){this.siblings=rs(this.root._guid,"radioname",this.keypath.str),this.siblings.push(this),this.radioName=!0},getInitialValue:function(){return this.element.getAttribute("checked")?this.element.getAttribute("value"):void 0},render:function(){var t=this.element.node;t.name="{{"+this.keypath.str+"}}",t.checked=this.root.viewmodel.get(this.keypath)==this.element.getAttribute("value"),t.addEventListener("change",fm,!1),t.attachEvent&&t.addEventListener("click",fm,!1)},unrender:function(){var t=this.element.node;t.removeEventListener("change",fm,!1),t.removeEventListener("click",fm,!1)},getValue:function(){var t=this.element.node;return t._ractive?t._ractive.value:t.value},handleChange:function(){this.element.node.checked&&lm.prototype.handleChange.call(this)},rebound:function(t,e){var n;lm.prototype.rebound.call(this,t,e),(n=this.element.node)&&(n.name="{{"+this.keypath.str+"}}")},unbind:function(){D(this.siblings,this)}}),gm=lm.extend({name:"name",getInitialValue:function(){return this.noInitialValue=!0,[]},init:function(){var t,e;this.checkboxName=!0,this.siblings=rs(this.root._guid,"checkboxes",this.keypath.str),this.siblings.push(this),this.noInitialValue&&(this.siblings.noInitialValue=!0),this.siblings.noInitialValue&&this.element.getAttribute("checked")&&(t=this.root.viewmodel.get(this.keypath),e=this.element.getAttribute("value"),t.push(e))},unbind:function(){D(this.siblings,this)},render:function(){var t,e,n=this.element.node;t=this.root.viewmodel.get(this.keypath),e=this.element.getAttribute("value"),this.isChecked=s(t)?j(t,e):t==e,n.name="{{"+this.keypath.str+"}}",n.checked=this.isChecked,n.addEventListener("change",fm,!1),n.attachEvent&&n.addEventListener("click",fm,!1)},unrender:function(){var t=this.element.node;t.removeEventListener("change",fm,!1),t.removeEventListener("click",fm,!1)},changed:function(){var t=!!this.isChecked;return this.isChecked=this.element.node.checked,this.isChecked===t},handleChange:function(){this.isChecked=this.element.node.checked,lm.prototype.handleChange.call(this)},getValue:function(){return this.siblings.filter(is).map(ss)}}),ym=lm.extend({name:"checked",render:function(){var t=this.element.node;t.addEventListener("change",fm,!1),t.attachEvent&&t.addEventListener("click",fm,!1)},unrender:function(){var t=this.element.node;t.removeEventListener("change",fm,!1),t.removeEventListener("click",fm,!1)},getValue:function(){return this.element.node.checked}}),wm=lm.extend({getInitialValue:function(){var t,e,n,r,i=this.element.options;if(void 0===this.element.getAttribute("value")&&(e=t=i.length,t)){for(;e--;)if(i[e].getAttribute("selected")){n=i[e].getAttribute("value"),r=!0;break}if(!r)for(;++e<t;)if(!i[e].getAttribute("disabled")){n=i[e].getAttribute("value");break}return void 0!==n&&(this.element.attributes.value.value=n),n}},render:function(){this.element.node.addEventListener("change",fm,!1)},unrender:function(){this.element.node.removeEventListener("change",fm,!1)},setValue:function(t){this.root.viewmodel.set(this.keypath,t)},getValue:function(){var t,e,n,r,i;for(t=this.element.node.options,n=t.length,e=0;n>e;e+=1)if(r=t[e],t[e].selected)return i=r._ractive?r._ractive.value:r.value},forceUpdate:function(){var t=this,e=this.getValue();void 0!==e&&(this.attribute.locked=!0,oh.scheduleTask(function(){return t.attribute.locked=!1}),this.root.viewmodel.set(this.keypath,e))}}),bm=wm.extend({getInitialValue:function(){return this.element.options.filter(function(t){return t.getAttribute("selected")}).map(function(t){return t.getAttribute("value")})},render:function(){var t;this.element.node.addEventListener("change",fm,!1),t=this.root.viewmodel.get(this.keypath),void 0===t&&this.handleChange()},unrender:function(){this.element.node.removeEventListener("change",fm,!1)},setValue:function(){throw new Error("TODO not implemented yet")},getValue:function(){var t,e,n,r,i,s;for(t=[],e=this.element.node.options,r=e.length,n=0;r>n;n+=1)i=e[n],i.selected&&(s=i._ractive?i._ractive.value:i.value,t.push(s));return t},handleChange:function(){var t,e,n;return t=this.attribute,e=t.value,n=this.getValue(),void 0!==e&&R(n,e)||wm.prototype.handleChange.call(this),this},forceUpdate:function(){var t=this,e=this.getValue();void 0!==e&&(this.attribute.locked=!0,oh.scheduleTask(function(){return t.attribute.locked=!1}),this.root.viewmodel.set(this.keypath,e))},updateModel:function(){void 0!==this.attribute.value&&this.attribute.value.length||this.root.viewmodel.set(this.keypath,this.initialValue)}}),xm=lm.extend({render:function(){this.element.node.addEventListener("change",fm,!1)},unrender:function(){this.element.node.removeEventListener("change",fm,!1)},getValue:function(){return this.element.node.files}});cm=lm.extend({getInitialValue:function(){return""},getValue:function(){return this.element.node.value},render:function(){var t,e=this.element.node,n=!1;this.rendered=!0,t=this.root.lazy,this.element.lazy===!0?t=!0:this.element.lazy===!1?t=!1:u(this.element.lazy)?(t=!1,n=+this.element.lazy):u(t||"")&&(n=+t,t=!1,this.element.lazy=n),this.handler=n?as:fm,e.addEventListener("change",fm,!1),t||(e.addEventListener("input",this.handler,!1),e.attachEvent&&e.addEventListener("keyup",this.handler,!1)),e.addEventListener("blur",os,!1)},unrender:function(){var t=this.element.node;this.rendered=!1,t.removeEventListener("change",fm,!1),t.removeEventListener("input",this.handler,!1),t.removeEventListener("keyup",this.handler,!1),t.removeEventListener("blur",os,!1)}});var km=cm.extend({getInitialValue:function(){return void 0},getValue:function(){var t=parseFloat(this.element.node.value);return isNaN(t)?void 0:t}}),Em=cs,_m=ls,Am=fs,Sm=ds,Cm=/^event(?:\.(.+))?/,Om=ys,Pm={},Tm={touchstart:!0,touchmove:!0,touchend:!0,touchcancel:!0,touchleave:!0},Fm=bs,jm=xs,Rm=ks,Nm=Es,Lm=_s,Dm=function(t,e,n){this.init(t,e,n)};Dm.prototype={bubble:Em,fire:_m,getAction:Am,init:Sm,listen:Om,rebind:Fm,render:jm,resolve:Rm,unbind:Nm,unrender:Lm};var Im=function(t,e){var n,r,i,s,o=[];for(r in e)if(e.hasOwnProperty(r))for(i=r.split("-"),n=i.length;n--;)s=new Dm(t,i[n],e[r]),o.push(s);return o},Vm=function(t,e){var n,r,i,s=this;this.element=t,this.root=n=t.root,r=e.n||e,("string"==typeof r||(i=new oy({template:r,root:n,owner:t}),r=i.toString(),i.unbind(),""!==r))&&(e.a?this.params=e.a:e.d&&(this.fragment=new oy({template:e.d,root:n,owner:t}),this.params=this.fragment.getArgsList(),this.fragment.bubble=function(){this.dirtyArgs=this.dirtyValue=!0,s.params=this.getArgsList(),s.ready&&s.update()}),this.fn=g("decorators",n,r),this.fn||l(Iu(r,"decorator")))};Vm.prototype={init:function(){var t,e,n;if(t=this.element.node,this.params?(n=[t].concat(this.params),e=this.fn.apply(this.root,n)):e=this.fn.call(this.root,t),!e||!e.teardown)throw new Error("Decorator definition must return an object with a teardown method");this.actual=e,this.ready=!0},update:function(){this.actual.update?this.actual.update.apply(this.root,this.params):(this.actual.teardown(!0),this.init())},rebind:function(t,e){this.fragment&&this.fragment.rebind(t,e)},teardown:function(t){this.torndown=!0,this.ready&&this.actual.teardown(),!t&&this.fragment&&this.fragment.unbind()}};var Wm,Um,Mm,zm=Fs,Bm=js,$m=Vs,qm=function(t){return t.replace(/-([a-zA-Z])/g,function(t,e){return e.toUpperCase()})};Ja?(Um={},Mm=cu("div").style,Wm=function(t){var e,n,r;if(t=qm(t),!Um[t])if(void 0!==Mm[t])Um[t]=t;else for(r=t.charAt(0).toUpperCase()+t.substring(1),e=iu.length;e--;)if(n=iu[e],void 0!==Mm[n+r]){Um[t]=n+r;break}return Um[t]}):Wm=null;var Qm,Zm,Hm=Wm;Ja?(Zm=window.getComputedStyle||Su.getComputedStyle,Qm=function(t){var e,n,r,i,o;if(e=Zm(this.node),"string"==typeof t)return o=e[Hm(t)],"0px"===o&&(o=0),o;if(!s(t))throw new Error("Transition$getStyle must be passed a string, or an array of strings representing CSS properties");for(n={},r=t.length;r--;)i=t[r],o=e[Hm(i)],"0px"===o&&(o=0),n[i]=o;return n}):Qm=null;var Km=function(t,e){var n;if("string"==typeof t)this.node.style[Hm(t)]=e;else for(n in t)t.hasOwnProperty(n)&&(this.node.style[Hm(n)]=t[n]);return this},Gm=function(t){var e;this.duration=t.duration,this.step=t.step,this.complete=t.complete,"string"==typeof t.easing?(e=t.root.easing[t.easing],e||(v(Iu(t.easing,"easing")),e=Ws)):e="function"==typeof t.easing?t.easing:Ws,this.easing=e,this.start=Ku(),this.end=this.start+this.duration,this.running=!0,lh.add(this)};Gm.prototype={tick:function(t){var e,n;return this.running?t>this.end?(this.step&&this.step(1),this.complete&&this.complete(1),!1):(e=t-this.start,n=this.easing(e/this.duration),this.step&&this.step(n),!0):!1},stop:function(){this.abort&&this.abort(),this.running=!1}};var Ym,Jm,Xm,tv,ev,nv,rv,iv,sv=new RegExp("^-(?:"+iu.join("|")+")-"),ov=function(t){return t.replace(sv,"")},av=new RegExp("^(?:"+iu.join("|")+")([A-Z])"),uv=function(t){var e;return t?(av.test(t)&&(t="-"+t),e=t.replace(/[A-Z]/g,function(t){return"-"+t.toLowerCase()})):""},hv={},cv={};Ja?(Jm=cu("div").style,function(){void 0!==Jm.transition?(Xm="transition",tv="transitionend",ev=!0):void 0!==Jm.webkitTransition?(Xm="webkitTransition",tv="webkitTransitionEnd",ev=!0):ev=!1}(),Xm&&(nv=Xm+"Duration",rv=Xm+"Property",iv=Xm+"TimingFunction"),Ym=function(t,e,n,r,i){setTimeout(function(){var s,o,a,u,h;u=function(){o&&a&&(t.root.fire(t.name+":end",t.node,t.isIntro),i())},s=(t.node.namespaceURI||"")+t.node.tagName,t.node.style[rv]=r.map(Hm).map(uv).join(","),t.node.style[iv]=uv(n.easing||"linear"),t.node.style[nv]=n.duration/1e3+"s",h=function(e){var n;n=r.indexOf(qm(ov(e.propertyName))),-1!==n&&r.splice(n,1),r.length||(t.node.removeEventListener(tv,h,!1),a=!0,u())},t.node.addEventListener(tv,h,!1),setTimeout(function(){for(var i,c,l,f,d,p=r.length,v=[];p--;)f=r[p],i=s+f,ev&&!cv[i]&&(t.node.style[Hm(f)]=e[f],hv[i]||(c=t.getStyle(f),hv[i]=t.getStyle(f)!=e[f],cv[i]=!hv[i],cv[i]&&(t.node.style[Hm(f)]=c))),(!ev||cv[i])&&(void 0===c&&(c=t.getStyle(f)),l=r.indexOf(f),-1===l?m("Something very strange happened with transitions. Please raise an issue at https://github.com/ractivejs/ractive/issues - thanks!",{node:t.node}):r.splice(l,1),d=/[^\d]*$/.exec(e[f])[0],v.push({name:Hm(f),interpolator:Vu(parseFloat(c),parseFloat(e[f])),suffix:d}));v.length?new Gm({root:t.root,duration:n.duration,easing:qm(n.easing||""),step:function(e){var n,r;for(r=v.length;r--;)n=v[r],t.node.style[n.name]=n.interpolator(e)+n.suffix},complete:function(){o=!0,u()}}):o=!0,r.length||(t.node.removeEventListener(tv,h,!1),a=!0,u())},0)},n.delay||0)}):Ym=null;var lv,fv,dv,pv,mv;if("undefined"!=typeof document){if(lv="hidden",mv={},lv in document)dv="";else for(pv=iu.length;pv--;)fv=iu[pv],lv=fv+"Hidden",lv in document&&(dv=fv);void 0!==dv?(document.addEventListener(dv+"visibilitychange",Us),Us()):("onfocusout"in document?(document.addEventListener("focusout",Ms),document.addEventListener("focusin",zs)):(window.addEventListener("pagehide",Ms),window.addEventListener("blur",Ms),window.addEventListener("pageshow",zs),window.addEventListener("focus",zs)),mv.hidden=!1)}var vv,gv,yv;Ja?(gv=window.getComputedStyle||Su.getComputedStyle,vv=function(t,e,n){var r,i=this;if(4===arguments.length)throw new Error("t.animateStyle() returns a promise - use .then() instead of passing a callback");if(mv.hidden)return this.setStyle(t,e),yv||(yv=nh.resolve());"string"==typeof t?(r={},r[t]=e):(r=t,n=e),n||(v('The "%s" transition does not supply an options object to `t.animateStyle()`. This will break in a future version of Ractive. For more info see https://github.com/RactiveJS/Ractive/issues/340',this.name),n=this);var s=new nh(function(t){var e,s,o,a,u,h,c;if(!n.duration)return i.setStyle(r),void t();for(e=Object.keys(r),s=[],o=gv(i.node),u={},h=e.length;h--;)c=e[h],a=o[Hm(c)],"0px"===a&&(a=0),a!=r[c]&&(s.push(c),i.node.style[Hm(c)]=a);return s.length?void Ym(i,r,n,s,t):void t()});return s}):vv=null;var wv=function(t,e){return"number"==typeof t?t={duration:t}:"string"==typeof t?t="slow"===t?{duration:600}:"fast"===t?{duration:200}:{duration:400}:t||(t={}),i({},t,e)},bv=Bs,xv=function(t,e,n){this.init(t,e,n)};xv.prototype={init:$m,start:bv,getStyle:Qm,setStyle:Km,animateStyle:vv,processParams:wv};var kv,Ev,_v=qs;kv=function(){var t=this.node,e=this.fragment.toString(!1);if(window&&window.appearsToBeIELessEqual8&&(t.type="text/css"),t.styleSheet)t.styleSheet.cssText=e;else{for(;t.hasChildNodes();)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(e))}},Ev=function(){this.node.type&&"text/javascript"!==this.node.type||m("Script tag was updated. This does not cause the code to be re-evaluated!",{ractive:this.root}),this.node.text=this.fragment.toString(!1)};var Av=function(){var t,e;return this.template.y?"<!DOCTYPE"+this.template.dd+">":(t="<"+this.template.e,t+=this.attributes.map(Ys).join("")+this.conditionalAttributes.map(Ys).join(""),"option"===this.name&&Ks(this)&&(t+=" selected"),"input"===this.name&&Gs(this)&&(t+=" checked"),t+=">","textarea"===this.name&&void 0!==this.getAttribute("value")?t+=Sn(this.getAttribute("value")):void 0!==this.getAttribute("contenteditable")&&(t+=this.getAttribute("value")||""),this.fragment&&(e="script"!==this.name&&"style"!==this.name,t+=this.fragment.toString(e)),Ml.test(this.template.e)||(t+="</"+this.template.e+">"),t)},Sv=Js,Cv=Xs,Ov=function(t){this.init(t)};Ov.prototype={bubble:_p,detach:Ap,find:Sp,findAll:Cp,findAllComponents:Op,findComponent:Pp,findNextNode:Tp,firstNode:Fp,getAttribute:jp,init:zm,rebind:Bm,render:_v,toString:Av,unbind:Sv,unrender:Cv};var Pv=/^\s*$/,Tv=/^\s*/,Fv=function(t){var e,n,r,i;return e=t.split("\n"),n=e[0],void 0!==n&&Pv.test(n)&&e.shift(),r=L(e),void 0!==r&&Pv.test(r)&&e.pop(),i=e.reduce(eo,null),i&&(t=e.map(function(t){return t.replace(i,"")}).join("\n")),t},jv=function(t,e){var n;return e?n=t.split("\n").map(function(t,n){return n?e+t:t}).join("\n"):t},Rv='Could not find template for partial "%s"',Nv=function(t){var e,n;e=this.parentFragment=t.parentFragment,this.root=e.root,this.type=jc,this.index=t.index,this.name=t.template.r,this.rendered=!1,this.fragment=this.fragmentToRender=this.fragmentToUnrender=null,Md.init(this,t),this.keypath||((n=no(this.root,this.name,e))?(Cd.call(this),this.isNamed=!0,this.setTemplate(n)):v(Rv,this.name))};Nv.prototype={bubble:function(){this.parentFragment.bubble()},detach:function(){return this.fragment.detach()},find:function(t){return this.fragment.find(t)},findAll:function(t,e){return this.fragment.findAll(t,e)},findComponent:function(t){return this.fragment.findComponent(t)},findAllComponents:function(t,e){return this.fragment.findAllComponents(t,e)},firstNode:function(){return this.fragment.firstNode()},findNextNode:function(){return this.parentFragment.findNextNode(this)},getPartialName:function(){return this.isNamed&&this.name?this.name:void 0===this.value?this.name:this.value},getValue:function(){return this.fragment.getValue()},rebind:function(t,e){this.isNamed||Ud.call(this,t,e),this.fragment&&this.fragment.rebind(t,e)},render:function(){return this.docFrag=document.createDocumentFragment(),this.update(),this.rendered=!0,this.docFrag},resolve:Md.resolve,setValue:function(t){var e;(void 0===t||t!==this.value)&&(void 0!==t&&(e=no(this.root,""+t,this.parentFragment)),!e&&this.name&&(e=no(this.root,this.name,this.parentFragment))&&(Cd.call(this),this.isNamed=!0),e||v(Rv,this.name,{ractive:this.root}),this.value=t,this.setTemplate(e||[]),this.bubble(),this.rendered&&oh.addView(this))},setTemplate:function(t){this.fragment&&(this.fragment.unbind(),this.rendered&&(this.fragmentToUnrender=this.fragment)),this.fragment=new oy({template:t,root:this.root,owner:this,pElement:this.parentFragment.pElement}),this.fragmentToRender=this.fragment},toString:function(t){var e,n,r,i;return e=this.fragment.toString(t),n=this.parentFragment.items[this.index-1],n&&n.type===Ac?(r=n.text.split("\n").pop(),(i=/^\s+$/.exec(r))?jv(e,i[0]):e):e},unbind:function(){this.isNamed||Cd.call(this),this.fragment&&this.fragment.unbind()},unrender:function(t){this.rendered&&(this.fragment&&this.fragment.unrender(t),this.rendered=!1)},update:function(){var t,e;this.fragmentToUnrender&&(this.fragmentToUnrender.unrender(!0),this.fragmentToUnrender=null),this.fragmentToRender&&(this.docFrag.appendChild(this.fragmentToRender.render()),this.fragmentToRender=null),this.rendered&&(t=this.parentFragment.getNode(),e=this.parentFragment.findNextNode(this),t.insertBefore(this.docFrag,e))}};var Lv,Dv,Iv,Vv=uo,Wv=new T("detach"),Uv=ho,Mv=co,zv=lo,Bv=fo,$v=po,qv=mo,Qv=function(t,e,n,r){var i=t.root,s=t.keypath;r?i.viewmodel.smartUpdate(s,e,r):i.viewmodel.mark(s)},Zv=[],Hv=["pop","push","reverse","shift","sort","splice","unshift"];Hv.forEach(function(t){var e=function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];var i,s,o,a;for(i=Pe(this,t,n),s=Array.prototype[t].apply(this,arguments),oh.start(),this._ractive.setting=!0,a=this._ractive.wrappers.length;a--;)o=this._ractive.wrappers[a],oh.addRactive(o.root),Qv(o,this,t,i);return oh.end(),this._ractive.setting=!1,s};_u(Zv,t,{value:e})}),Lv={},Lv.__proto__?(Dv=function(t){t.__proto__=Zv},Iv=function(t){t.__proto__=Array.prototype}):(Dv=function(t){var e,n;for(e=Hv.length;e--;)n=Hv[e],_u(t,n,{value:Zv[n],configurable:!0})},Iv=function(t){var e;for(e=Hv.length;e--;)delete t[Hv[e]]}),Dv.unpatch=Iv;var Kv,Gv,Yv,Jv=Dv;Kv={filter:function(t){return s(t)&&(!t._ractive||!t._ractive.setting)},wrap:function(t,e,n){return new Gv(t,e,n)}},Gv=function(t,e,n){this.root=t,this.value=e,this.keypath=_(n),e._ractive||(_u(e,"_ractive",{value:{wrappers:[],instances:[],setting:!1},configurable:!0}),Jv(e)),e._ractive.instances[t._guid]||(e._ractive.instances[t._guid]=0,e._ractive.instances.push(t)),e._ractive.instances[t._guid]+=1,e._ractive.wrappers.push(this)},Gv.prototype={get:function(){return this.value},teardown:function(){var t,e,n,r,i;if(t=this.value,e=t._ractive,n=e.wrappers,r=e.instances,e.setting)return!1;if(i=n.indexOf(this),-1===i)throw new Error(Yv);if(n.splice(i,1),n.length){if(r[this.root._guid]-=1,!r[this.root._guid]){if(i=r.indexOf(this.root),-1===i)throw new Error(Yv);r.splice(i,1)}}else delete t._ractive,Jv.unpatch(this.value)}},Yv="Something went wrong in a rather interesting way";var Xv,tg,eg=/^\s*[0-9]+\s*$/,ng=function(t){return eg.test(t)?[]:{}};try{Object.defineProperty({},"test",{value:0}),Xv={filter:function(t,e,n){var r,i;return e?(e=_(e),(r=n.viewmodel.wrapped[e.parent.str])&&!r.magic?!1:(i=n.viewmodel.get(e.parent),s(i)&&/^[0-9]+$/.test(e.lastKey)?!1:i&&("object"==typeof i||"function"==typeof i))):!1},wrap:function(t,e,n){return new tg(t,e,n)}},tg=function(t,e,n){var r,i,s;return n=_(n),this.magic=!0,this.ractive=t,this.keypath=n,this.value=e,this.prop=n.lastKey,r=n.parent,this.obj=r.isRoot?t.viewmodel.data:t.viewmodel.get(r),i=this.originalDescriptor=Object.getOwnPropertyDescriptor(this.obj,this.prop),i&&i.set&&(s=i.set._ractiveWrappers)?void(-1===s.indexOf(this)&&s.push(this)):void vo(this,e,i)},tg.prototype={get:function(){return this.value},reset:function(t){return this.updating?void 0:(this.updating=!0,this.obj[this.prop]=t,oh.addRactive(this.ractive),this.ractive.viewmodel.mark(this.keypath,{keepExistingWrapper:!0}),this.updating=!1,!0)},set:function(t,e){this.updating||(this.obj[this.prop]||(this.updating=!0,this.obj[this.prop]=ng(t),this.updating=!1),this.obj[this.prop][t]=e)},teardown:function(){var t,e,n,r,i;return this.updating?!1:(t=Object.getOwnPropertyDescriptor(this.obj,this.prop),e=t&&t.set,void(e&&(r=e._ractiveWrappers,i=r.indexOf(this),-1!==i&&r.splice(i,1),r.length||(n=this.obj[this.prop],Object.defineProperty(this.obj,this.prop,this.originalDescriptor||{writable:!0,enumerable:!0,configurable:!0}),this.obj[this.prop]=n))))}}}catch(Cu){Xv=!1}var rg,ig;Xv&&(rg={filter:function(t,e,n){return Xv.filter(t,e,n)&&Kv.filter(t)},wrap:function(t,e,n){return new ig(t,e,n)}},ig=function(t,e,n){this.value=e,this.magic=!0,this.magicWrapper=Xv.wrap(t,e,n),this.arrayWrapper=Kv.wrap(t,e,n)},ig.prototype={get:function(){return this.value},teardown:function(){this.arrayWrapper.teardown(),this.magicWrapper.teardown()},reset:function(t){return this.magicWrapper.reset(t)}});var sg=go,og={},ag=_o,ug=Po,hg=To,cg=function(t,e){this.computation=t,this.viewmodel=t.viewmodel,this.ref=e,this.root=this.viewmodel.ractive,this.parentFragment=this.root.component&&this.root.component.parentFragment};cg.prototype={resolve:function(t){this.computation.softDeps.push(t),this.computation.unresolvedDeps[t.str]=null,this.viewmodel.register(t,this.computation,"computed")}};var lg=function(t,e){this.key=t,this.getter=e.getter,this.setter=e.setter,this.hardDeps=e.deps||[],this.softDeps=[],this.unresolvedDeps={},this.depValues={},this._dirty=this._firstRun=!0};lg.prototype={constructor:lg,init:function(t){var e,n=this;this.viewmodel=t,this.bypass=!0,e=t.get(this.key),t.clearCache(this.key.str),this.bypass=!1,this.setter&&void 0!==e&&this.set(e),this.hardDeps&&this.hardDeps.forEach(function(e){return t.register(e,n,"computed")})},invalidate:function(){this._dirty=!0},get:function(){var t,e,n=this,r=!1;if(this.getting){var i="The "+this.key.str+" computation indirectly called itself. This probably indicates a bug in the computation. It is commonly caused by `array.sort(...)` - if that's the case, clone the array first with `array.slice().sort(...)`";return p(i),this.value}if(this.getting=!0,this._dirty){if(this._firstRun||!this.hardDeps.length&&!this.softDeps.length?r=!0:[this.hardDeps,this.softDeps].forEach(function(t){var e,i,s;if(!r)for(s=t.length;s--;)if(e=t[s],i=n.viewmodel.get(e),!a(i,n.depValues[e.str]))return n.depValues[e.str]=i,void(r=!0)}),r){this.viewmodel.capture();try{this.value=this.getter()}catch(s){m('Failed to compute "%s"',this.key.str),f(s.stack||s),this.value=void 0}t=this.viewmodel.release(),e=this.updateDependencies(t),e&&[this.hardDeps,this.softDeps].forEach(function(t){t.forEach(function(t){n.depValues[t.str]=n.viewmodel.get(t)})})}this._dirty=!1}return this.getting=this._firstRun=!1,this.value},set:function(t){if(this.setting)return void(this.value=t);if(!this.setter)throw new Error("Computed properties without setters are read-only. (This may change in a future version of Ractive!)");this.setter(t)},updateDependencies:function(t){var e,n,r,i,s;for(n=this.softDeps,e=n.length;e--;)r=n[e],-1===t.indexOf(r)&&(i=!0,this.viewmodel.unregister(r,this,"computed"));for(e=t.length;e--;)r=t[e],-1!==n.indexOf(r)||this.hardDeps&&-1!==this.hardDeps.indexOf(r)||(i=!0,Fo(this.viewmodel,r)&&!this.unresolvedDeps[r.str]?(s=new cg(this,r.str),t.splice(e,1),this.unresolvedDeps[r.str]=s,oh.addUnresolved(s)):this.viewmodel.register(r,this,"computed"));return i&&(this.softDeps=t.slice()),i}};var fg=jo,dg={FAILED_LOOKUP:!0},pg=Ro,mg={},vg=Lo,gg=Do,yg=function(t,e){this.localKey=t,this.keypath=e.keypath,this.origin=e.origin,this.deps=[],this.unresolved=[],this.resolved=!1};yg.prototype={forceResolution:function(){this.keypath=this.localKey,this.setup()},get:function(t,e){return this.resolved?this.origin.get(this.map(t),e):void 0},getValue:function(){return this.keypath?this.origin.get(this.keypath):void 0},initViewmodel:function(t){this.local=t,this.setup()},map:function(t){return void 0===typeof this.keypath?this.localKey:t.replace(this.localKey,this.keypath)},register:function(t,e,n){this.deps.push({keypath:t,dep:e,group:n}),this.resolved&&this.origin.register(this.map(t),e,n)},resolve:function(t){void 0!==this.keypath&&this.unbind(!0),this.keypath=t,this.setup()},set:function(t,e){this.resolved||this.forceResolution(),this.origin.set(this.map(t),e)},setup:function(){var t=this;void 0!==this.keypath&&(this.resolved=!0,this.deps.length&&(this.deps.forEach(function(e){var n=t.map(e.keypath);if(t.origin.register(n,e.dep,e.group),e.dep.setValue)e.dep.setValue(t.origin.get(n));else{if(!e.dep.invalidate)throw new Error("An unexpected error occurred. Please raise an issue at https://github.com/ractivejs/ractive/issues - thanks!");
e.dep.invalidate()}}),this.origin.mark(this.keypath)))},setValue:function(t){if(!this.keypath)throw new Error("Mapping does not have keypath, cannot set value. Please raise an issue at https://github.com/ractivejs/ractive/issues - thanks!");this.origin.set(this.keypath,t)},unbind:function(t){var e=this;t||delete this.local.mappings[this.localKey],this.resolved&&(this.deps.forEach(function(t){e.origin.unregister(e.map(t.keypath),t.dep,t.group)}),this.tracker&&this.origin.unregister(this.keypath,this.tracker))},unregister:function(t,e,n){var r,i;if(this.resolved){for(r=this.deps,i=r.length;i--;)if(r[i].dep===e){r.splice(i,1);break}this.origin.unregister(this.map(t),e,n)}}};var wg=Io,bg=function(t,e){var n,r,i,s;return n={},r=0,i=t.map(function(t,i){var o,a,u;a=r,u=e.length;do{if(o=e.indexOf(t,a),-1===o)return s=!0,-1;a=o+1}while(n[o]&&u>a);return o===r&&(r+=1),o!==i&&(s=!0),n[o]=!0,o})},xg=Vo,kg={},Eg=Mo,_g=Bo,Ag=$o,Sg=qo,Cg=Zo,Og={implicit:!0},Pg={noCascade:!0},Tg=Ko,Fg=Go,jg=function(t){var e,n,r=t.adapt,i=t.data,s=t.ractive,o=t.computed,a=t.mappings;this.ractive=s,this.adaptors=r,this.onchange=t.onchange,this.cache={},this.cacheMap=Eu(null),this.deps={computed:Eu(null),"default":Eu(null)},this.depsMap={computed:Eu(null),"default":Eu(null)},this.patternObservers=[],this.specials=Eu(null),this.wrapped=Eu(null),this.computations=Eu(null),this.captureGroups=[],this.unresolvedImplicitDependencies=[],this.changes=[],this.implicitChanges={},this.noCascade={},this.data=i,this.mappings=Eu(null);for(e in a)this.map(_(e),a[e]);if(i)for(e in i)(n=this.mappings[e])&&void 0===n.getValue()&&n.setValue(i[e]);for(e in o)a&&e in a&&l("Cannot map to a computed property ('%s')",e),this.compute(_(e),o[e]);this.ready=!0};jg.prototype={adapt:sg,applyChanges:ag,capture:ug,clearCache:hg,compute:fg,get:pg,init:vg,map:gg,mark:wg,merge:xg,register:Eg,release:_g,reset:Ag,set:Sg,smartUpdate:Cg,teardown:Tg,unregister:Fg},Jo.prototype={constructor:Jo,begin:function(t){this.inProcess[t._guid]=!0},end:function(t){var e=t.parent;e&&this.inProcess[e._guid]?Xo(this.queue,e).push(t):ta(this,t),delete this.inProcess[t._guid]}};var Rg=/\$\{([^\}]+)\}/g,Ng=new T("construct"),Lg=new T("config"),Dg=new Jo("init"),Ig=0,Vg=["adaptors","components","decorators","easing","events","interpolators","partials","transitions"],Wg=sa;ca.prototype={bubble:function(){this.dirty||(this.dirty=!0,oh.addView(this))},update:function(){this.callback(this.fragment.getValue()),this.dirty=!1},rebind:function(t,e){this.fragment.rebind(t,e)},unbind:function(){this.fragment.unbind()}};var Ug=function(t,e,n,i,o){var a,u,h,c,l,f,d={},p={},v={},g=[];for(u=t.parentFragment,h=t.root,o=o||{},r(d,o),o.content=i||[],d[""]=o.content,e.defaults.el&&m("The <%s/> component has a default `el` property; it has been disregarded",t.name),c=u;c;){if(c.owner.type===Vc){l=c.owner.container;break}c=c.parent}return n&&Object.keys(n).forEach(function(e){var r,i,o=n[e];if("string"==typeof o)r=Ff(o),p[e]=r?r.value:o;else if(0===o)p[e]=!0;else{if(!s(o))throw new Error("erm wut");fa(o)?(v[e]={origin:t.root.viewmodel,keypath:void 0},i=la(t,o[0],function(t){t.isSpecial?f?a.set(e,t.value):(p[e]=t.value,delete v[e]):f?a.viewmodel.mappings[e].resolve(t):v[e].keypath=t})):i=new ca(t,o,function(t){f?a.set(e,t):p[e]=t}),g.push(i)}}),a=Eu(e.prototype),Wg(a,{el:null,append:!0,data:p,partials:o,magic:h.magic||e.defaults.magic,modifyArrays:h.modifyArrays,adapt:h.adapt},{parent:h,component:t,container:l,mappings:v,inlinePartials:d,cssIds:u.cssIds}),f=!0,t.resolvers=g,a},Mg=function(t){var e,n;for(e=t.root;e;)(n=e._liveComponentQueries["_"+t.name])&&n.push(t.instance),e=e.parent},zg=ma,Bg=va,$g=ga,qg=ya,Qg=wa,Zg=new T("teardown"),Hg=xa,Kg=function(t,e){this.init(t,e)};Kg.prototype={detach:Vv,find:Uv,findAll:Mv,findAllComponents:zv,findComponent:Bv,findNextNode:$v,firstNode:qv,init:zg,rebind:Bg,render:$g,toString:qg,unbind:Qg,unrender:Hg};var Gg=Kg,Yg=function(t){this.type=Rc,this.value=t.template.c};Yg.prototype={detach:Ad,firstNode:function(){return this.node},render:function(){return this.node||(this.node=document.createComment(this.value)),this.node},toString:function(){return"<!--"+this.value+"-->"},unrender:function(t){t&&this.node.parentNode.removeChild(this.node)}};var Jg=function(t){var e,n;this.type=Vc,this.container=e=t.parentFragment.root,this.component=n=e.component,this.container=e,this.containerFragment=t.parentFragment,this.parentFragment=n.parentFragment;var r=this.name=t.template.n||"",i=e._inlinePartials[r];i||(m('Could not find template for partial "'+r+'"',{ractive:t.root}),i=[]),this.fragment=new oy({owner:this,root:e.parent,template:i,pElement:this.containerFragment.pElement}),s(n.yielders[r])?n.yielders[r].push(this):n.yielders[r]=[this],oh.scheduleTask(function(){if(n.yielders[r].length>1)throw new Error("A component template can only have one {{yield"+(r?" "+r:"")+"}} declaration at a time")})};Jg.prototype={detach:function(){return this.fragment.detach()},find:function(t){return this.fragment.find(t)},findAll:function(t,e){return this.fragment.findAll(t,e)},findComponent:function(t){return this.fragment.findComponent(t)},findAllComponents:function(t,e){return this.fragment.findAllComponents(t,e)},findNextNode:function(){return this.containerFragment.findNextNode(this)},firstNode:function(){return this.fragment.firstNode()},getValue:function(t){return this.fragment.getValue(t)},render:function(){return this.fragment.render()},unbind:function(){this.fragment.unbind()},unrender:function(t){this.fragment.unrender(t),D(this.component.yielders[this.name],this)},rebind:function(t,e){this.fragment.rebind(t,e)},toString:function(){return this.fragment.toString()}};var Xg=function(t){this.declaration=t.template.a};Xg.prototype={init:ku,render:ku,unrender:ku,teardown:ku,toString:function(){return"<!DOCTYPE"+this.declaration+">"}};var ty=ka,ey=_a,ny=Aa,ry=Sa,iy=Pa,sy=Fa,oy=function(t){this.init(t)};oy.prototype={bubble:pd,detach:md,find:vd,findAll:gd,findAllComponents:yd,findComponent:wd,findNextNode:bd,firstNode:xd,getArgsList:kd,getNode:Ed,getValue:_d,init:ty,rebind:ey,registerIndexRef:function(t){var e=this.registeredIndexRefs;-1===e.indexOf(t)&&e.push(t)},render:ny,toString:ry,unbind:iy,unregisterIndexRef:function(t){var e=this.registeredIndexRefs;e.splice(e.indexOf(t),1)},unrender:sy};var ay,uy,hy=ja,cy=["template","partials","components","decorators","events"],ly=new T("reset"),fy=function(t,e){function n(e,r,i){i&&i.partials[t]||e.forEach(function(e){e.type===jc&&e.getPartialName()===t&&r.push(e),e.fragment&&n(e.fragment.items,r,i),s(e.fragments)?n(e.fragments,r,i):s(e.items)?n(e.items,r,i):e.type===Ic&&e.instance&&n(e.instance.fragment.items,r,e.instance),e.type===Fc&&(s(e.attributes)&&n(e.attributes,r,i),s(e.conditionalAttributes)&&n(e.conditionalAttributes,r,i))})}var r,i=[];return n(this.fragment.items,i),this.partials[t]=e,r=oh.start(this,!0),i.forEach(function(e){e.value=void 0,e.setValue(t)}),oh.end(),r},dy=Ra,py=ec("reverse"),my=Na,vy=ec("shift"),gy=ec("sort"),yy=ec("splice"),wy=Da,by=Ia,xy=new T("teardown"),ky=Wa,Ey=Ua,_y=Ma,Ay=new T("unrender"),Sy=ec("unshift"),Cy=za,Oy=new T("update"),Py=Ba,Ty={add:Hu,animate:dh,detach:mh,find:gh,findAll:Ah,findAllComponents:Sh,findComponent:Ch,findContainer:Oh,findParent:Ph,fire:Fh,get:jh,insert:Nh,merge:Dh,observe:Zh,observeOnce:Hh,off:Yh,on:Jh,once:Xh,pop:nc,push:rc,render:hc,reset:hy,resetPartial:fy,resetTemplate:dy,reverse:py,set:my,shift:vy,sort:gy,splice:yy,subtract:wy,teardown:by,toggle:ky,toHTML:Ey,toHtml:Ey,unrender:_y,unshift:Sy,update:Cy,updateModel:Py},Fy=function(t,e,n){return n||qa(t,e)?function(){var n,r="_super"in this,i=this._super;return this._super=e,n=t.apply(this,arguments),r&&(this._super=i),n}:t},jy=Qa,Ry=Ga,Ny=function(t){var e,n,r={};return t&&(e=t._ractive)?(r.ractive=e.root,r.keypath=e.keypath.str,r.index={},(n=Or(e.proxy.parentFragment))&&(r.index=Or.resolve(n)),r):r};ay=function(t){return this instanceof ay?void Wg(this,t):new ay(t)},uy={DEBUG:{writable:!0,value:!0},DEBUG_PROMISES:{writable:!0,value:!0},extend:{value:Ry},getNodeInfo:{value:Ny},parse:{value:Zn},Promise:{value:nh},svg:{value:ru},magic:{value:eu},VERSION:{value:"0.7.1"},adaptors:{writable:!0,value:{}},components:{writable:!0,value:{}},decorators:{writable:!0,value:{}},easing:{writable:!0,value:uu},events:{writable:!0,value:{}},interpolators:{writable:!0,value:Wu},partials:{writable:!0,value:{}},transitions:{writable:!0,value:{}}},Au(ay,uy),ay.prototype=r(Ty,au),ay.prototype.constructor=ay,ay.defaults=ay.prototype;var Ly="function";if(typeof Date.now!==Ly||typeof String.prototype.trim!==Ly||typeof Object.keys!==Ly||typeof Array.prototype.indexOf!==Ly||typeof Array.prototype.forEach!==Ly||typeof Array.prototype.map!==Ly||typeof Array.prototype.filter!==Ly||"undefined"!=typeof window&&typeof window.addEventListener!==Ly)throw new Error("It looks like you're attempting to use Ractive.js in an older browser. You'll need to use one of the 'legacy builds' in order to continue - see http://docs.ractivejs.org/latest/legacy-builds for more information.");return ay});
//# sourceMappingURL=ractive-legacy.min.js.map