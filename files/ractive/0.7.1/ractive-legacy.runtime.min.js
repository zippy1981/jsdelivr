!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):t.Ractive=e()}(this,function(){"use strict";function t(t){var e;if(t&&"boolean"!=typeof t)return"undefined"!=typeof window&&document&&t?t.nodeType?t:"string"==typeof t&&(e=document.getElementById(t),!e&&document.querySelector&&(e=document.querySelector(t)),e&&e.nodeType)?e:t[0]&&t[0].nodeType?t[0]:null:null}function e(t){return t&&"unknown"!=typeof t.parentNode&&t.parentNode&&t.parentNode.removeChild(t),t}function n(t){return null!=t&&t.toString?t:""}function i(t){for(var e=arguments.length,n=Array(e>1?e-1:0),i=1;e>i;i++)n[i-1]=arguments[i];for(var r,o;o=n.shift();)for(r in o)ja.call(o,r)&&(t[r]=o[r]);return t}function r(t){for(var e=arguments.length,n=Array(e>1?e-1:0),i=1;e>i;i++)n[i-1]=arguments[i];return n.forEach(function(e){for(var n in e)!e.hasOwnProperty(n)||n in t||(t[n]=e[n])}),t}function o(t){return"[object Array]"===Pa.call(t)}function s(t){return Ra.test(Pa.call(t))}function a(t,e){return null===t&&null===e?!0:"object"==typeof t||"object"==typeof e?!1:t===e}function u(t){return!isNaN(parseFloat(t))&&isFinite(t)}function h(t){return t&&"[object Object]"===Pa.call(t)}function c(t,e){return t.replace(/%s/g,function(){return e.shift()})}function l(t){for(var e=arguments.length,n=Array(e>1?e-1:0),i=1;e>i;i++)n[i-1]=arguments[i];throw t=c(t,n),new Error(t)}function d(){km.DEBUG&&Sa.apply(null,arguments)}function f(t){for(var e=arguments.length,n=Array(e>1?e-1:0),i=1;e>i;i++)n[i-1]=arguments[i];t=c(t,n),Ta(t,n)}function p(t){for(var e=arguments.length,n=Array(e>1?e-1:0),i=1;e>i;i++)n[i-1]=arguments[i];t=c(t,n),Na[t]||(Na[t]=!0,Ta(t,n))}function m(){km.DEBUG&&f.apply(null,arguments)}function v(){km.DEBUG&&p.apply(null,arguments)}function g(t,e,n){var i=y(t,e,n);return i?i[t][n]:null}function y(t,e,n){for(;e;){if(n in e[t])return e;if(e.isolated)return null;e=e.parent}}function b(t){return function(){return t}}function w(t){var e,n,i,r,o,s;for(e=t.split("."),(n=Ua[e.length])||(n=k(e.length)),o=[],i=function(t,n){return t?"*":e[n]},r=n.length;r--;)s=n[r].map(i).join("."),o.hasOwnProperty(s)||(o.push(s),o[s]=!0);return o}function k(t){var e,n,i,r,o,s="";if(!Ua[t]){for(i=[];s.length<t;)s+=1;for(e=parseInt(s,2),r=function(t){return"1"===t},o=0;e>=o;o+=1){for(n=o.toString(2);n.length<t;)n="0"+n;i[o]=Array.prototype.map.call(n,r)}Ua[t]=i}return Ua[t]}function E(t,e,n,i){var r=t[e];if(!r||!r.equalsOrStartsWith(i)&&r.equalsOrStartsWith(n))return t[e]=r?r.replace(n,i):i,!0}function x(t){var e=t.slice(2);return"i"===t[1]&&u(e)?+e:e}function _(t){return null==t?t:(Wa.hasOwnProperty(t)||(Wa[t]=new Qa(t)),Wa[t])}function A(t,e){function n(e,n){var i,r,s;return n.isRoot?s=[].concat(Object.keys(t.viewmodel.data),Object.keys(t.viewmodel.mappings),Object.keys(t.viewmodel.computations)):(i=t.viewmodel.wrapped[n.str],r=i?i.get():t.viewmodel.get(n),s=r?Object.keys(r):null),s&&s.forEach(function(t){"_ractive"===t&&o(r)||e.push(n.join(t))}),e}var i,r,s;for(i=e.str.split("."),s=[Ha];r=i.shift();)"*"===r?s=s.reduce(n,[]):s[0]===Ha?s[0]=_(r):s=s.map(C(r));return s}function C(t){return function(e){return e.join(t)}}function O(t){return t?t.replace(Ba,".$1"):""}function S(t,e,n){if("string"!=typeof e||!u(n))throw new Error("Bad arguments");var i=void 0,r=void 0;if(/\*/.test(e))return r={},A(t,_(O(e))).forEach(function(e){var i=t.viewmodel.get(e);if(!u(i))throw new Error(Ka);r[e.str]=i+n}),t.set(r);if(i=t.get(e),!u(i))throw new Error(Ka);return t.set(e,+i+n)}function T(t,e){return S(this,t,void 0===e?1:+e)}function F(t){this.event=t,this.method="on"+t,this.deprecate=Ja[t]}function j(t,e){var n=t.indexOf(e);-1===n&&t.push(e)}function P(t,e){for(var n=0,i=t.length;i>n;n++)if(t[n]==e)return!0;return!1}function R(t,e){var n;if(!o(t)||!o(e))return!1;if(t.length!==e.length)return!1;for(n=t.length;n--;)if(t[n]!==e[n])return!1;return!0}function N(t){return"string"==typeof t?[t]:void 0===t?[]:t}function L(t){return t[t.length-1]}function V(t,e){var n=t.indexOf(e);-1!==n&&t.splice(n,1)}function I(t){for(var e=[],n=t.length;n--;)e[n]=t[n];return e}function D(t){setTimeout(t,0)}function M(t,e){return function(){for(var n;n=t.shift();)n(e)}}function U(t,e,n,i){var r;if(e===t)throw new TypeError("A promise's fulfillment handler cannot return the same promise");if(e instanceof Za)e.then(n,i);else if(!e||"object"!=typeof e&&"function"!=typeof e)n(e);else{try{r=e.then}catch(o){return void i(o)}if("function"==typeof r){var s,a,u;a=function(e){s||(s=!0,U(t,e,n,i))},u=function(t){s||(s=!0,i(t))};try{r.call(e,a,u)}catch(o){if(!s)return i(o),void(s=!0)}}else n(e)}}function B(t,e,n){var i;return e=O(e),"~/"===e.substr(0,2)?(i=_(e.substring(2)),Q(t,i.firstKey,n)):"."===e[0]?(i=q(iu(n),e),i&&Q(t,i.firstKey,n)):i=W(t,_(e),n),i}function q(t,e){var n;if(void 0!=t&&"string"!=typeof t&&(t=t.str),"."===e)return _(t);if(n=t?t.split("."):[],"../"===e.substr(0,3)){for(;"../"===e.substr(0,3);){if(!n.length)throw new Error('Could not resolve reference - too many "../" prefixes');n.pop(),e=e.substring(3)}return n.push(e),_(n.join("."))}return _(t?t+e.replace(/^\.\//,"."):e.replace(/^\.\/?/,""))}function W(t,e,n,i){var r,o,s,a,u;if(e.isRoot)return e;for(o=e.firstKey;n;)if(r=n.context,n=n.parent,r&&(a=!0,s=t.viewmodel.get(r),s&&("object"==typeof s||"function"==typeof s)&&o in s))return r.join(e.str);return z(t.viewmodel,o)?e:t.parent&&!t.isolated&&(a=!0,n=t.component.parentFragment,o=_(o),u=W(t.parent,o,n,!0))?(t.viewmodel.map(o,{origin:t.parent.viewmodel,keypath:u}),e):i||a?void 0:(t.viewmodel.set(e,void 0),e)}function Q(t,e){var n;!t.parent||t.isolated||z(t.viewmodel,e)||(e=_(e),(n=W(t.parent,e,t.component.parentFragment,!0))&&t.viewmodel.map(e,{origin:t.parent.viewmodel,keypath:n}))}function z(t,e){return""===e||e in t.data||e in t.computations||e in t.mappings}function H(t){t.teardown()}function K(t){t.unbind()}function G(t){t.unrender()}function $(t){t.detach()}function Y(t){t.detachNodes()}function J(t){!t.ready||t.outros.length||t.outroChildren||(t.outrosComplete||(t.parent?t.parent.decrementOutros(t):t.detachNodes(),t.outrosComplete=!0),t.intros.length||t.totalChildren||("function"==typeof t.callback&&t.callback(),t.parent&&t.parent.decrementTotal()))}function Z(){for(var t,e,n;ou.ractives.length;)e=ou.ractives.pop(),n=e.viewmodel.applyChanges(),n&&uu.fire(e,n);for(X(),t=0;t<ou.views.length;t+=1)ou.views[t].update();for(ou.views.length=0,t=0;t<ou.tasks.length;t+=1)ou.tasks[t]();return ou.tasks.length=0,ou.ractives.length?Z():void 0}function X(){var t,e,n,i;for(t=au.length;t--;)e=au[t],e.keypath?au.splice(t,1):(n=B(e.root,e.ref,e.parentFragment))&&((i||(i=[])).push({item:e,keypath:n}),au.splice(t,1));i&&i.forEach(te)}function te(t){t.item.resolve(t.keypath)}function ee(t,e,n){var i,r,o,s,a,u,h,c,l,d,f,p,m,v;if(i=new nu(function(t){return r=t}),"object"==typeof t){n=e||{},u=n.easing,h=n.duration,a=[],c=n.step,l=n.complete,(c||l)&&(f={},n.step=null,n.complete=null,d=function(t){return function(e,n){f[t]=n}});for(o in t)t.hasOwnProperty(o)&&((c||l)&&(p=d(o),n={easing:u,duration:h},c&&(n.step=p)),n.complete=l?p:Ea,a.push(ne(this,o,t[o],n)));return v={easing:u,duration:h},c&&(v.step=function(t){return c(t,f)}),l&&i.then(function(t){return l(t,f)}),v.complete=r,m=ne(this,null,null,v),a.push(m),i.stop=function(){for(var t;t=a.pop();)t.stop();m&&m.stop()},i}return n=n||{},n.complete&&i.then(n.complete),n.complete=r,s=ne(this,t,e,n),i.stop=function(){return s.stop()},i}function ne(t,e,n,i){var r,o,s,u;return e&&(e=_(O(e))),null!==e&&(u=t.viewmodel.get(e)),lu.abort(e,t),a(u,n)?(i.complete&&i.complete(i.to),pu):(i.easing&&(r="function"==typeof i.easing?i.easing:t.easing[i.easing],"function"!=typeof r&&(r=null)),o=void 0===i.duration?400:i.duration,s=new du({keypath:e,from:u,to:n,root:t,duration:o,easing:r,interpolator:i.interpolator,step:i.step,complete:i.complete}),lu.add(s),t._animations.push(s),s)}function ie(){return this.detached?this.detached:(this.el&&V(this.el.__ractive_instances__,this),this.detached=this.fragment.detach(),vu.fire(this),this.detached)}function re(t){return this.el?this.fragment.find(t):null}function oe(t,e){var n;return n=this._isComponentQuery?!this.selector||t.name===this.selector:t.node?la(t.node,this.selector):null,n?(this.push(t.node||t.instance),e||this._makeDirty(),!0):void 0}function se(t){var e;return(e=t.parentFragment)?e.owner:t.component&&(e=t.component.parentFragment)?e.owner:void 0}function ae(t){var e,n;for(e=[t],n=se(t);n;)e.push(n),n=se(n);return e}function ue(t,e,n,i){var r=[];return Aa(r,{selector:{value:e},live:{value:n},_isComponentQuery:{value:i},_test:{value:yu}}),n?(Aa(r,{cancel:{value:bu},_root:{value:t},_sort:{value:Eu},_makeDirty:{value:xu},_remove:{value:_u},_dirty:{value:!1,writable:!0}}),r):r}function he(t,e){var n,i;return this.el?(e=e||{},n=this._liveQueries,(i=n[t])?e&&e.live?i:i.slice():(i=ue(this,t,!!e.live,!1),i.live&&(n.push(t),n["_"+t]=i),this.fragment.findAll(t,i),i)):[]}function ce(t,e){var n,i;return e=e||{},n=this._liveComponentQueries,(i=n[t])?e&&e.live?i:i.slice():(i=ue(this,t,!!e.live,!0),i.live&&(n.push(t),n["_"+t]=i),this.fragment.findAllComponents(t,i),i)}function le(t){return this.fragment.findComponent(t)}function de(t){return this.container?this.container.component&&this.container.component.name===t?this.container:this.container.findContainer(t):null}function fe(t){return this.parent?this.parent.component&&this.parent.component.name===t?this.parent:this.parent.findParent(t):null}function pe(t,e){var n=void 0===arguments[2]?{}:arguments[2];if(e){n.event?n.event.name=e:n.event={name:e,_noArg:!0};var i=_(e).wildcardMatches();me(t,i,n.event,n.args,!0)}}function me(t,e,n,i){var r,o,s=void 0===arguments[4]?!1:arguments[4],a=!0;for(Fu.enqueue(t,n),o=e.length;o>=0;o--)r=t._subs[e[o]],r&&(a=ve(t,r,n,i)&&a);if(Fu.dequeue(t),t.parent&&a){if(s&&t.component){var u=t.component.name+"."+e[e.length-1];e=_(u).wildcardMatches(),n&&(n.component=t)}me(t.parent,e,n,i)}}function ve(t,e,n,i){var r=null,o=!1;n&&!n._noArg&&(i=[n].concat(i)),e=e.slice();for(var s=0,a=e.length;a>s;s+=1)e[s].apply(t,i)===!1&&(o=!0);return n&&!n._noArg&&o&&(r=n.original)&&(r.preventDefault&&r.preventDefault(),r.stopPropagation&&r.stopPropagation()),!o}function ge(t){var e={args:Array.prototype.slice.call(arguments,1)};pe(this,t,e)}function ye(t){var e;return t=_(O(t)),e=this.viewmodel.get(t,Ru),void 0===e&&this.parent&&!this.isolated&&B(this,t.str,this.component.parentFragment)&&(e=this.viewmodel.get(t)),e}function be(e,n){if(!this.fragment.rendered)throw new Error("The API has changed - you must call `ractive.render(target[, anchor])` to render your Ractive instance. Once rendered you can use `ractive.insert()`.");if(e=t(e),n=t(n)||null,!e)throw new Error("You must specify a valid target to insert into");e.insertBefore(this.detach(),n),this.el=e,(e.__ractive_instances__||(e.__ractive_instances__=[])).push(this),this.detached=null,we(this)}function we(t){Lu.fire(t),t.findAllComponents("*").forEach(function(t){we(t.instance)})}function ke(t,e,n){var i,r;return t=_(O(t)),i=this.viewmodel.get(t),o(i)&&o(e)?(r=su.start(this,!0),this.viewmodel.merge(t,i,e,n),su.end(),r):this.set(t,e,n&&n.complete)}function Ee(t,e){var n,i;return n=A(t,e),i={},n.forEach(function(e){i[e.str]=t.get(e.str)}),i}function xe(t,e,n,i){var r,o,s;return e=_(O(e)),i=i||Hu,e.isPattern?(r=new Du(t,e,n,i),t.viewmodel.patternObservers.push(r),o=!0):r=new Iu(t,e,n,i),r.init(i.init),t.viewmodel.register(e,r,o?"patternObservers":"observers"),r.ready=!0,{cancel:function(){var n;s||(o?(n=t.viewmodel.patternObservers.indexOf(r),t.viewmodel.patternObservers.splice(n,1),t.viewmodel.unregister(e,r,"patternObservers")):t.viewmodel.unregister(e,r,"observers"),s=!0)}}}function _e(t,e,n){var i,r,o,s;if(h(t)){n=e,r=t,i=[];for(t in r)r.hasOwnProperty(t)&&(e=r[t],i.push(this.observe(t,e,n)));return{cancel:function(){for(;i.length;)i.pop().cancel()}}}if("function"==typeof t)return n=e,e=t,t="",xe(this,t,e,n);if(o=t.split(" "),1===o.length)return xe(this,t,e,n);for(i=[],s=o.length;s--;)t=o[s],t&&i.push(xe(this,t,e,n));return{cancel:function(){for(;i.length;)i.pop().cancel()}}}function Ae(t,e,n){var i=this.observe(t,function(){e.apply(this,arguments),i.cancel()},{init:!1,defer:n&&n.defer});return i}function Ce(t,e){var n,i=this;if(t)n=t.split(" ").map($u).filter(Yu),n.forEach(function(t){var n,r;(n=i._subs[t])&&(e?(r=n.indexOf(e),-1!==r&&n.splice(r,1)):i._subs[t]=[])});else for(t in this._subs)delete this._subs[t];return this}function Oe(t,e){var n,i,r,o=this;if("object"==typeof t){n=[];for(i in t)t.hasOwnProperty(i)&&n.push(this.on(i,t[i]));return{cancel:function(){for(var t;t=n.pop();)t.cancel()}}}return r=t.split(" ").map($u).filter(Yu),r.forEach(function(t){(o._subs[t]||(o._subs[t]=[])).push(e)}),{cancel:function(){return o.off(t,e)}}}function Se(t,e){var n=this.on(t,function(){e.apply(this,arguments),n.cancel()});return n}function Te(t,e,n){var i,r,o,s,a,u,h=[];if(i=Fe(t,e,n),!i)return null;for(r=t.length,a=i.length-2-i[1],o=Math.min(r,i[0]),s=o+i[1],u=0;o>u;u+=1)h.push(u);for(;s>u;u+=1)h.push(-1);for(;r>u;u+=1)h.push(u+a);return h.touchedFrom=0!==a?i[0]:t.length,h}function Fe(t,e,n){switch(e){case"splice":for(void 0!==n[0]&&n[0]<0&&(n[0]=t.length+Math.max(n[0],-t.length));n.length<2;)n.push(0);return n[1]=Math.min(n[1],t.length-n[0]),n;case"sort":case"reverse":return null;case"pop":return t.length?[t.length-1,1]:[0,0];case"push":return[t.length,0].concat(n);case"shift":return[0,t.length?1:0];case"unshift":return[0,0].concat(n)}}function je(e,n){var i,r,o,s=this;if(o=this.transitionsEnabled,this.noIntro&&(this.transitionsEnabled=!1),i=su.start(this,!0),su.scheduleTask(function(){return lh.fire(s)},!0),this.fragment.rendered)throw new Error("You cannot call ractive.render() on an already rendered instance! Call ractive.unrender() first");if(e=t(e)||this.el,n=t(n)||this.anchor,this.el=e,this.anchor=n,!this.append&&e){var a=e.__ractive_instances__;a&&a.length&&Pe(a),e.innerHTML=""}return this.cssId&&Uu.apply(),e&&((r=e.__ractive_instances__)?r.push(this):e.__ractive_instances__=[this],n?e.insertBefore(this.fragment.render(),n):e.appendChild(this.fragment.render())),su.end(),this.transitionsEnabled=o,i.then(function(){return dh.fire(s)})}function Pe(t){t.splice(0,t.length).forEach(H)}function Re(t,e){for(var n=t.slice(),i=e.length;i--;)~n.indexOf(e[i])||n.push(e[i]);return n}function Ne(t,e){var n,i,r;return i='[data-ractive-css~="{'+e+'}"]',r=function(t){var e,n,r,o,s,a,u,h=[];for(e=[];n=vh.exec(t);)e.push({str:n[0],base:n[1],modifiers:n[2]});for(o=e.map(Ve),u=e.length;u--;)a=o.slice(),r=e[u],a[u]=r.base+i+r.modifiers||"",s=o.slice(),s[u]=i+" "+s[u],h.push(a.join(" "),s.join(" "));return h.join(", ")},n=yh.test(t)?t.replace(yh,i):t.replace(mh,"").replace(ph,function(t,e){var n,i;return gh.test(e)?t:(n=e.split(",").map(Le),i=n.map(r).join(", ")+" ",t.replace(e,i))})}function Le(t){return t.trim?t.trim():t.replace(/^\s+/,"").replace(/\s+$/,"")}function Ve(t){return t.str}function Ie(t){t&&t.constructor!==Object&&("function"==typeof t||("object"!=typeof t?l("data option must be an object or a function, `"+t+"` is not valid"):m("If supplied, options.data should be a plain JavaScript object - using a non-POJO as the root object may work, but is discouraged")))}function De(t,e){Ie(e);var n="function"==typeof t,i="function"==typeof e;return e||n||(e={}),n||i?function(){var r=i?Me(e,this):e,o=n?Me(t,this):t;return Ue(r,o)}:Ue(e,t)}function Me(t,e){var n=t.call(e);if(n)return"object"!=typeof n&&l("Data function must return an object"),n.constructor!==Object&&v("Data function returned something other than a plain JavaScript object. This might work, but is strongly discouraged"),n}function Ue(t,e){if(t&&e){for(var n in e)n in t||(t[n]=e[n]);return t}return t||e}function Be(t){var e=xa(xh);return e.parse=function(e,n){return qe(e,n||t)},e}function qe(t,e){if(!parse)throw new Error("Missing Ractive.parse - cannot parse template. Either preparse or use the version that includes the parser");return parse(t,e||this.options)}function We(t,e){var n;if(!Zs){if(e&&e.noThrow)return;throw new Error("Cannot retrieve template #"+t+" as Ractive is not running in a browser.")}if(Qe(t)&&(t=t.substring(1)),!(n=document.getElementById(t))){if(e&&e.noThrow)return;throw new Error("Could not find template element with id #"+t)}if("SCRIPT"!==n.tagName.toUpperCase()){if(e&&e.noThrow)return;throw new Error("Template element with id #"+t+", must be a <script> element")}return n.textContent}function Qe(t){return t&&"#"===t.charAt(0)}function ze(t){return!("string"==typeof t)}function He(t){return t.defaults&&(t=t.defaults),Eh.reduce(function(e,n){return e[n]=t[n],e},{})}function Ke(t){var e,n=t._config.template;if(n&&n.fn)return e=Ge(t,n.fn),e!==n.result?(n.result=e,e=Ye(e,t)):void 0}function Ge(t,e){var n=$e(_h.getParseOptions(t));return e.call(t,n)}function $e(t){var e=xa(_h);return e.parse=function(e,n){return _h.parse(e,n||t)},e}function Ye(t,e){if("string"==typeof t)"#"===t[0]&&(t=_h.fromId(t)),t=parse(t,_h.getParseOptions(e));else{if("number"!=typeof t.v)throw new Error("The template parser was passed a non-string template, but the template doesn't have a version.  Make sure you're passing in the template you think you are.");if(t.v!==oa)throw new Error("Mismatched template version (expected "+oa+", got "+t.v+") Please ensure you are using the latest version of Ractive.js in your build process as well as in your app")}return t}function Je(t,e,n){if(e)for(var i in e)(n||!t.hasOwnProperty(i))&&(t[i]=e[i])}function Ze(t,e,n){if(!/_super/.test(n))return n;var i=function(){var t,r=Xe(i._parent,e),o="_super"in this,s=this._super;return this._super=r,t=n.apply(this,arguments),o?this._super=s:delete this._super,t};return i._parent=t,i._method=n,i}function Xe(t,e){var n,i;return e in t?(n=t[e],i="function"==typeof n?n:function(){return n}):i=Ea,i}function tn(t,e,n){return"options."+t+" has been deprecated in favour of options."+e+"."+(n?" You cannot specify both options, please use options."+e+".":"")}function en(t,e,n){if(e in t){if(n in t)throw new Error(tn(e,n,!0));m(tn(e,n)),t[n]=t[e]}}function nn(t){en(t,"beforeInit","onconstruct"),en(t,"init","onrender"),en(t,"complete","oncomplete"),en(t,"eventDefinitions","events"),o(t.adaptors)&&en(t,"adaptors","adapt")}function rn(t,e,n,i){nn(i);for(var r in i)if(jh[r]){var o=i[r];"function"==typeof o&&(o=Ph(e.prototype,r,o)),n[r]=o}hh.forEach(function(r){r[t](e,n,i)}),fh[t](e,n,i),Ah[t](e,n,i),wh[t](e,n,i),on(e.prototype,n,i)}function on(t,e,n){for(var i in n)if(!Fh[i]&&n.hasOwnProperty(i)){var r=n[i];"function"==typeof r&&(r=Ph(t,i,r)),e[i]=r}}function sn(t){var e={};return t.forEach(function(t){return e[t]=!0}),e}function an(){this.dirtyValue=this.dirtyArgs=!0,this.bound&&"function"==typeof this.owner.bubble&&this.owner.bubble()}function un(){var t;return 1===this.items.length?this.items[0].detach():(t=document.createDocumentFragment(),this.items.forEach(function(e){var n=e.detach();n&&t.appendChild(n)}),t)}function hn(t){var e,n,i,r;if(this.items){for(n=this.items.length,e=0;n>e;e+=1)if(i=this.items[e],i.find&&(r=i.find(t)))return r;return null}}function cn(t,e){var n,i,r;if(this.items)for(i=this.items.length,n=0;i>n;n+=1)r=this.items[n],r.findAll&&r.findAll(t,e);return e}function ln(t,e){var n,i,r;if(this.items)for(i=this.items.length,n=0;i>n;n+=1)r=this.items[n],r.findAllComponents&&r.findAllComponents(t,e);return e}function dn(t){var e,n,i,r;if(this.items){for(e=this.items.length,n=0;e>n;n+=1)if(i=this.items[n],i.findComponent&&(r=i.findComponent(t)))return r;return null}}function fn(t){var e,n=t.index;return e=this.items[n+1]?this.items[n+1].firstNode():this.owner===this.root?this.owner.component?this.owner.component.findNextNode():null:this.owner.findNextNode(this)}function pn(){return this.items&&this.items[0]?this.items[0].firstNode():null}function mn(t){var e;return(e=t.matchPattern(xc))?{t:rc,v:e}:null}function vn(t){var e;return(e=Ec(t))?Ac.test(e.v)?e.v:'"'+e.v.replace(/"/g,'\\"')+'"':(e=mn(t))?e.v:(e=t.matchPattern(_c))?e:void 0}function gn(t){var e,n,i;return t.allowWhitespace(),(e=vn(t))?(i={key:e},t.allowWhitespace(),t.matchString(":")?(t.allowWhitespace(),(n=t.read())?(i.value=n.v,i):null):null):null}function yn(t,e,n,i){return i=i||0,t.map(function(t){var r,o,s;return t.text?t.text:t.fragments?t.fragments.map(function(t){return yn(t.items,e,n,i)}).join(""):(r=n+"-"+i++,s=t.keypath&&(o=t.root.viewmodel.wrapped[t.keypath.str])?o.value:t.getValue(),e[r]=s,"${"+r+"}")}).join("")}function bn(){var t,e,n,i;return this.dirtyArgs&&(e=yn(this.items,t={},this.root._guid),n=Nc("["+e+"]",t),i=n?n.value:[this.toString()],this.argsList=i,this.dirtyArgs=!1),this.argsList}function wn(){var t=this;do if(t.pElement)return t.pElement.node;while(t=t.parent);return this.root.detached||this.root.el}function kn(){var t,e,n,i;return this.dirtyValue&&(e=yn(this.items,t={},this.root._guid),n=Nc(e,t),i=n?n.value:this.toString(),this.value=i,this.dirtyValue=!1),this.value}function En(t){return t.replace(Fc,function(t,e){var n;return n="#"!==e[0]?Sc[e]:"x"===e[1]?parseInt(e.substring(2),16):parseInt(e.substring(1),10),n?String.fromCharCode(xn(n)):t})}function xn(t){return t?10===t?32:128>t?t:159>=t?Tc[t-128]:55296>t?t:57343>=t?65533:65535>=t?t:65533:65533}function _n(t){return t.replace(Rc,"&amp;").replace(jc,"&lt;").replace(Pc,"&gt;")}function An(){this.registered&&this.root.viewmodel.unregister(this.keypath,this),this.resolver&&this.resolver.unbind()}function Cn(){return this.value}function On(t,e){for(var n,i=0;i<e.prop.length;i++)if(void 0!==(n=t[e.prop[i]]))return n}function Sn(t,e){var n,i,r,o,s,a={},u=!1;for(e||(a.refs=n={});t;){if((s=t.owner)&&(i=s.indexRefs)){if(e&&(r=s.getIndexRef(e)))return a.ref={fragment:t,ref:r},a;if(!e)for(o in i)r=i[o],n[r.n]||(u=!0,n[r.n]={fragment:t,ref:r})}!t.parent&&t.owner&&t.owner.component&&t.owner.component.parentFragment&&!t.owner.component.instance.isolated?(a.componentBoundary=!0,t=t.owner.component.parentFragment):t=t.parent}return u?a:void 0}function Tn(t,e,n){var i;return"@"===e.charAt(0)?new Wc(t,e,n):(i=Sn(t.parentFragment,e))?new zc(t,i,n):new qc(t,e,n)}function Fn(t,e){var n,i;if(Kc[t])return Kc[t];for(i=[];e--;)i[e]="_"+e;return n=new Function(i.join(","),"return("+t+")"),Kc[t]=n,n}function jn(t){return t.call()}function Pn(t,e){return t.replace(/_([0-9]+)/g,function(t,n){var i,r;return+n>=e.length?"_"+n:(i=e[n],void 0===i?"undefined":i.isSpecial?(r=i.value,"number"==typeof r?r:'"'+r+'"'):i.str)})}function Rn(t){return _("${"+t.replace(/[\.\[\]]/g,"-").replace(/\*/,"#MUL#")+"}")}function Nn(t){return void 0!==t&&"@"!==t[0]}function Ln(t,e){var n,i,r;if(t.__ractive_nowrap)return t;if(i="__ractive_"+e._guid,n=t[i])return n;if(/this/.test(t.toString())){_a(t,i,{value:Gc.call(t,e),configurable:!0});for(r in t)t.hasOwnProperty(r)&&(t[i][r]=t[r]);return e._boundFunctions.push({fn:t,prop:i}),t[i]}return _a(t,"__ractive_nowrap",{value:t}),t.__ractive_nowrap}function Vn(t){return t.value}function In(t){return void 0!=t}function Dn(t){t.forceResolution()}function Mn(t,e){function n(e){t.resolve(e)}function i(e){var n=t.keypath;e!=n&&(t.resolve(e),void 0!==n&&t.fragments&&t.fragments.forEach(function(t){t.rebind(n,e)}))}var r,o,s;o=e.parentFragment,s=e.template,t.root=o.root,t.parentFragment=o,t.pElement=o.pElement,t.template=e.template,t.index=e.index||0,t.isStatic=e.template.s,t.type=e.template.t,t.registered=!1,(r=s.r)&&(t.resolver=Tn(t,r,n)),e.template.x&&(t.resolver=new Hc(t,o,e.template.x,i)),e.template.rx&&(t.resolver=new Yc(t,e.template.rx,i)),t.template.n!==uc||t.hasOwnProperty("value")||t.setValue(void 0)}function Un(t){var e,n,i;return t&&t.isSpecial?(this.keypath=t,void this.setValue(t.value)):(this.registered&&(this.root.viewmodel.unregister(this.keypath,this),this.registered=!1,e=!0),this.keypath=t,void 0!=t&&(n=this.root.viewmodel.get(t),this.root.viewmodel.register(t,this),this.registered=!0),this.setValue(n),void(e&&(i=this.twowayBinding)&&i.rebound()))}function Bn(t,e){this.fragments&&this.fragments.forEach(function(n){return n.rebind(t,e)}),this.resolver&&this.resolver.rebind(t,e)}function qn(){this.parentFragment.bubble()}function Wn(){var t;return 1===this.fragments.length?this.fragments[0].detach():(t=document.createDocumentFragment(),this.fragments.forEach(function(e){t.appendChild(e.detach())}),t)}function Qn(t){var e,n,i;for(n=this.fragments.length,e=0;n>e;e+=1)if(i=this.fragments[e].find(t))return i;return null}function zn(t,e){var n,i;for(i=this.fragments.length,n=0;i>n;n+=1)this.fragments[n].findAll(t,e)}function Hn(t,e){var n,i;for(i=this.fragments.length,n=0;i>n;n+=1)this.fragments[n].findAllComponents(t,e)}function Kn(t){var e,n,i;for(n=this.fragments.length,e=0;n>e;e+=1)if(i=this.fragments[e].findComponent(t))return i;return null}function Gn(t){return this.fragments[t.index+1]?this.fragments[t.index+1].firstNode():this.parentFragment.findNextNode(this)}function $n(){var t,e,n;if(t=this.fragments.length)for(e=0;t>e;e+=1)if(n=this.fragments[e].firstNode())return n;return this.parentFragment.findNextNode(this)}function Yn(t){var e,n,i,r,o,s,a,u=this;if(!this.shuffling&&!this.unbound&&this.currentSubtype===hc){if(this.shuffling=!0,su.scheduleTask(function(){return u.shuffling=!1}),e=this.parentFragment,o=[],t.forEach(function(t,e){var i,r,s,a,h;return t===e?void(o[t]=u.fragments[e]):(i=u.fragments[e],void 0===n&&(n=e),-1===t?(u.fragmentsToUnrender.push(i),void i.unbind()):(r=t-e,s=u.keypath.join(e),a=u.keypath.join(t),i.index=t,(h=i.registeredIndexRefs)&&h.forEach(Jn),i.rebind(s,a),void(o[t]=i)))}),r=this.root.viewmodel.get(this.keypath).length,void 0===n){if(this.length===r)return;n=this.length}for(this.length=this.fragments.length=r,this.rendered&&su.addView(this),s={template:this.template.f,root:this.root,owner:this},i=n;r>i;i+=1)a=o[i],a||this.fragmentsToCreate.push(i),this.fragments[i]=a}}function Jn(t){t.rebind("","")}function Zn(){var t=this;return this.docFrag=document.createDocumentFragment(),this.fragments.forEach(function(e){return t.docFrag.appendChild(e.render())}),this.renderedFragments=this.fragments.slice(),this.fragmentsToRender=[],this.rendered=!0,this.docFrag}function Xn(t){var e,n,i=this;this.updating||(this.updating=!0,this.keypath&&(e=this.root.viewmodel.wrapped[this.keypath.str])&&(t=e.get()),this.fragmentsToCreate.length?(n={template:this.template.f||[],root:this.root,pElement:this.pElement,owner:this},this.fragmentsToCreate.forEach(function(t){var e;n.context=i.keypath.join(t),n.index=t,e=new wm(n),i.fragmentsToRender.push(i.fragments[t]=e)}),this.fragmentsToCreate.length=0):ei(this,t)&&(this.bubble(),this.rendered&&su.addView(this)),this.value=t,this.updating=!1)}function ti(t,e,n){if(e===hc&&t.indexRefs&&t.indexRefs[0]){var i=t.indexRefs[0];(n&&"i"===i.t||!n&&"k"===i.t)&&(n||(t.length=0,t.fragmentsToUnrender=t.fragments.slice(0),t.fragmentsToUnrender.forEach(function(t){return t.unbind()}))),i.t=n?"k":"i"}t.currentSubtype=e}function ei(t,e){var n={template:t.template.f||[],root:t.root,pElement:t.parentFragment.pElement,owner:t};if(t.hasContext=!0,t.subtype)switch(t.subtype){case ac:return t.hasContext=!1,si(t,e,!1,n);case uc:return t.hasContext=!1,si(t,e,!0,n);case cc:return oi(t,n);case lc:return ri(t,e,n);case hc:if(h(e))return ti(t,t.subtype,!0),ii(t,e,n)}return t.ordered=!!s(e),t.ordered?(ti(t,hc,!1),ni(t,e,n)):h(e)||"function"==typeof e?t.template.i?(ti(t,hc,!0),ii(t,e,n)):(ti(t,cc,!1),oi(t,n)):(ti(t,ac,!1),t.hasContext=!1,si(t,e,!1,n))}function ni(t,e,n){var i,r,o;if(r=e.length,r===t.length)return!1;if(r<t.length)t.fragmentsToUnrender=t.fragments.splice(r,t.length-r),t.fragmentsToUnrender.forEach(K);else if(r>t.length)for(i=t.length;r>i;i+=1)n.context=t.keypath.join(i),n.index=i,o=new wm(n),t.fragmentsToRender.push(t.fragments[i]=o);return t.length=r,!0}function ii(t,e,n){var i,r,o,s,a,u;for(o=t.hasKey||(t.hasKey={}),r=t.fragments.length;r--;)s=t.fragments[r],s.key in e||(a=!0,s.unbind(),t.fragmentsToUnrender.push(s),t.fragments.splice(r,1),o[s.key]=!1);for(r=t.fragments.length;r--;)s=t.fragments[r],s.index!==r&&(s.index=r,(u=s.registeredIndexRefs)&&u.forEach(hi));r=t.fragments.length;for(i in e)o[i]||(a=!0,n.context=t.keypath.join(i),n.key=i,n.index=r++,s=new wm(n),t.fragmentsToRender.push(s),t.fragments.push(s),o[i]=!0);return t.length=t.fragments.length,a}function ri(t,e,n){return e?oi(t,n):ai(t)}function oi(t,e){var n;return t.length?void 0:(e.context=t.keypath,e.index=0,n=new wm(e),t.fragmentsToRender.push(t.fragments[0]=n),t.length=1,!0)}function si(t,e,n,i){var r,o,a,u,c;if(o=s(e)&&0===e.length,a=!1,!s(e)&&h(e)){a=!0;for(c in e){a=!1;break}}return r=n?o||a||!e:e&&!o&&!a,r?t.length?t.length>1?(t.fragmentsToUnrender=t.fragments.splice(1),t.fragmentsToUnrender.forEach(K),!0):void 0:(i.index=0,u=new wm(i),t.fragmentsToRender.push(t.fragments[0]=u),t.length=1,!0):ai(t)}function ai(t){return t.length?(t.fragmentsToUnrender=t.fragments.splice(0,t.fragments.length).filter(ui),t.fragmentsToUnrender.forEach(K),t.length=t.fragmentsToRender.length=0,!0):void 0}function ui(t){return t.rendered}function hi(t){t.rebind("","")}function ci(t){var e,n,i;for(e="",n=0,i=this.length,n=0;i>n;n+=1)e+=this.fragments[n].toString(t);return e}function li(){var t=this;this.fragments.forEach(K),this.fragmentsToRender.forEach(function(e){return V(t.fragments,e)}),this.fragmentsToRender=[],Uc.call(this),this.length=0,this.unbound=!0}function di(t){this.fragments.forEach(t?fi:pi),this.renderedFragments=[],this.rendered=!1}function fi(t){t.unrender(!0)}function pi(t){t.unrender(!1)}function mi(){var t,e,n,i,r,o,s;for(n=this.renderedFragments;t=this.fragmentsToUnrender.pop();)t.unrender(!0),n.splice(n.indexOf(t),1);for(;t=this.fragmentsToRender.shift();)t.render();for(this.rendered&&(r=this.parentFragment.getNode()),s=this.fragments.length,o=0;s>o;o+=1)t=this.fragments[o],e=n.indexOf(t,o),e!==o?(this.docFrag.appendChild(t.detach()),-1!==e&&n.splice(e,1),n.splice(o,0,t)):this.docFrag.childNodes.length&&(i=t.firstNode(),r.insertBefore(this.docFrag,i));this.rendered&&this.docFrag.childNodes.length&&(i=this.parentFragment.findNextNode(this),r.insertBefore(this.docFrag,i)),this.renderedFragments=this.fragments.slice()}function vi(){var t,e;if(this.docFrag){for(t=this.nodes.length,e=0;t>e;e+=1)this.docFrag.appendChild(this.nodes[e]);return this.docFrag}}function gi(t){var e,n,i,r;for(n=this.nodes.length,e=0;n>e;e+=1)if(i=this.nodes[e],1===i.nodeType){if(la(i,t))return i;if(r=i.querySelector(t))return r}return null}function yi(t,e){var n,i,r,o,s,a;for(i=this.nodes.length,n=0;i>n;n+=1)if(r=this.nodes[n],1===r.nodeType&&(la(r,t)&&e.push(r),o=r.querySelectorAll(t)))for(s=o.length,a=0;s>a;a+=1)e.push(o[a])}function bi(){return this.rendered&&this.nodes[0]?this.nodes[0]:this.parentFragment.findNextNode(this)}function wi(t){return Al[t]||(Al[t]=ca(t))}function ki(t){var e,n,i;t&&"select"===t.name&&t.binding&&(e=I(t.node.options).filter(Ei),t.getAttribute("multiple")?i=e.map(function(t){return t.value}):(n=e[0])&&(i=n.value),void 0!==i&&t.binding.setValue(i),t.bubble())}function Ei(t){return t.selected}function xi(){if(this.rendered)throw new Error("Attempted to render an item that was already rendered");return this.docFrag=document.createDocumentFragment(),this.nodes=Cl(this.value,this.parentFragment.getNode(),this.docFrag),ki(this.pElement),this.rendered=!0,this.docFrag}function _i(t){var e;(e=this.root.viewmodel.wrapped[this.keypath.str])&&(t=e.get()),t!==this.value&&(this.value=t,this.parentFragment.bubble(),this.rendered&&su.addView(this))}function Ai(){return void 0!=this.value?En(""+this.value):""}function Ci(t){this.rendered&&t&&(this.nodes.forEach(e),this.rendered=!1)}function Oi(){var t,e;if(this.rendered){for(;this.nodes&&this.nodes.length;)t=this.nodes.pop(),t.parentNode.removeChild(t);e=this.parentFragment.getNode(),this.nodes=Cl(this.value,e,this.docFrag),e.insertBefore(this.docFrag,this.parentFragment.findNextNode(this)),ki(this.pElement)}}function Si(){var t,e=this.node;
return e?((t=e.parentNode)&&t.removeChild(e),e):void 0}function Ti(){return null}function Fi(){return this.node}function ji(t){return this.attributes&&this.attributes[t]?this.attributes[t].value:void 0}function Pi(){var t=this.useProperty||!this.rendered?this.fragment.getValue():this.fragment.toString();a(t,this.value)||("id"===this.name&&this.value&&delete this.root.nodes[this.value],this.value=t,"value"===this.name&&this.node&&(this.node._ractive.value=t),this.rendered&&su.addView(this))}function Ri(t){var e=t.fragment.items;if(1===e.length)return e[0].type===Gh?e[0]:void 0}function Ni(t){return this.type=tc,this.element=t.element,this.root=t.root,Jl(this,t.name),this.isBoolean=Cc.test(this.name),t.value&&"string"!=typeof t.value?(this.parentFragment=this.element.parentFragment,this.fragment=new wm({template:t.value,root:this.root,owner:this}),this.value=this.fragment.getValue(),this.interpolator=Ri(this),this.isBindable=!!this.interpolator&&!this.interpolator.isStatic,void(this.ready=!0)):void(this.value=this.isBoolean?!0:t.value||"")}function Li(t,e){this.fragment&&this.fragment.rebind(t,e)}function Vi(t){var e;this.node=t,t.namespaceURI&&t.namespaceURI!==na.html||(e=ed[this.name]||this.name,void 0!==t[e]&&(this.propertyName=e),(this.isBoolean||this.isTwoway)&&(this.useProperty=!0),"value"===e&&(t._ractive.value=this.value)),this.rendered=!0,this.update()}function Ii(){var t=this,e=t.name,n=t.namespacePrefix,i=t.value,r=t.interpolator,o=t.fragment;if(("value"!==e||"select"!==this.element.name&&"textarea"!==this.element.name)&&("value"!==e||void 0===this.element.getAttribute("contenteditable"))){if("name"===e&&"input"===this.element.name&&r)return"name={{"+(r.keypath.str||r.ref)+"}}";if(this.isBoolean)return i?e:"";if(o){if(1===o.items.length&&null==o.items[0].value)return"";i=o.toString()}return n&&(e=n+":"+e),i?e+'="'+Di(i)+'"':e}}function Di(t){return t.replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&#39;")}function Mi(){this.fragment&&this.fragment.unbind(),"id"===this.name&&delete this.root.nodes[this.value]}function Ui(){var t,e,n,i,r=this.value;if(!this.locked)for(this.node._ractive.value=r,t=this.node.options,i=t.length;i--;)if(e=t[i],n=e._ractive?e._ractive.value:e.value,n==r){e.selected=!0;break}}function Bi(){var t,e,n,i,r=this.value;for(o(r)||(r=[r]),t=this.node.options,e=t.length;e--;)n=t[e],i=n._ractive?n._ractive.value:n.value,n.selected=P(r,i)}function qi(){var t=this,e=t.node,n=t.value;e.checked=n==e._ractive.value}function Wi(){var t,e,n,i,r=this.node;if(t=r.checked,r.value=this.element.getAttribute("value"),r.checked=this.element.getAttribute("value")===this.element.getAttribute("name"),t&&!r.checked&&this.element.binding&&(n=this.element.binding.siblings,i=n.length)){for(;i--;){if(e=n[i],!e.element.node)return;if(e.element.node.checked)return su.addRactive(e.root),e.handleChange()}this.root.viewmodel.set(e.keypath,void 0)}}function Qi(){var t,e,n=this,i=n.element,r=n.node,s=n.value,a=i.binding;if(t=i.getAttribute("value"),o(s)){for(e=s.length;e--;)if(t==s[e])return void(a.isChecked=r.checked=!0);a.isChecked=r.checked=!1}else a.isChecked=r.checked=s==t}function zi(){this.node.className=n(this.value)}function Hi(){var t=this,e=t.node,n=t.value;this.root.nodes[n]=e,e.id=n}function Ki(){var t,e;t=this.node,e=this.value,void 0===e&&(e=""),t.style.setAttribute("cssText",e)}function Gi(){var t=this.value;void 0===t&&(t=""),this.locked||(this.node.innerHTML=t)}function $i(){var t=this,e=t.node,n=t.value;e._ractive.value=n,this.locked||(e.value=void 0==n?"":n)}function Yi(){this.locked||(this.node[this.propertyName]=this.value)}function Ji(){var t=this,e=t.node,n=t.namespace,i=t.name,r=t.value,o=t.fragment;n?e.setAttributeNS(n,i,(o||r).toString()):this.isBoolean?r?e.setAttribute(i,""):e.removeAttribute(i):null==r?e.removeAttribute(i):e.setAttribute(i,(o||r).toString())}function Zi(){var t,e,n=this,i=n.name,r=n.element,o=n.node;"id"===i?e=cd:"value"===i?"select"===r.name&&"value"===i?e=r.getAttribute("multiple")?od:rd:"textarea"===r.name?e=fd:null!=r.getAttribute("contenteditable")?e=dd:"input"===r.name&&(t=r.getAttribute("type"),e="file"===t?Ea:"radio"===t&&r.binding&&"name"===r.binding.name?ad:fd):this.isTwoway&&"name"===i?"radio"===o.type?e=sd:"checkbox"===o.type&&(e=ud):"style"===i&&o.style.setAttribute?e=ld:"class"!==i||o.namespaceURI&&o.namespaceURI!==na.html?this.useProperty&&(e=pd):e=hd,e||(e=md),this.update=e,this.update()}function Xi(t,e){var n=e?"svg":"div";return yd.innerHTML="<"+n+" "+t+"></"+n+">",I(yd.childNodes[0].attributes)}function tr(t,e){for(var n=t.length;n--;)if(t[n].name===e.name)return!1;return!0}function er(t){for(;t=t.parent;)if("form"===t.name)return t}function nr(){this._ractive.binding.handleChange()}function ir(t,e,n){var i=t+e+n;return Od[i]||(Od[i]=[])}function rr(t){return t.isChecked}function or(t){return t.element.getAttribute("value")}function sr(){var t;Ad.call(this),t=this._ractive.root.viewmodel.get(this._ractive.binding.keypath),this.value=void 0==t?"":t}function ar(){var t=this._ractive.binding,e=this;t._timeout&&clearTimeout(t._timeout),t._timeout=setTimeout(function(){t.rendered&&Ad.call(e),t._timeout=void 0},t.element.lazy)}function ur(t){var e,n,i,r,o,s=t.attributes;return t.binding&&(t.binding.teardown(),t.binding=null),(t.getAttribute("contenteditable")||s.contenteditable&&hr(s.contenteditable))&&hr(s.value)?n=Cd:"input"===t.name?(e=t.getAttribute("type"),"radio"===e||"checkbox"===e?(i=hr(s.name),r=hr(s.checked),i&&r&&m("A radio input can have two-way binding on its name attribute, or its checked attribute - not both",{ractive:t.root}),i?n="radio"===e?Td:Fd:r&&(n="radio"===e?Sd:jd)):"file"===e&&hr(s.value)?n=Nd:hr(s.value)&&(n="number"===e||"range"===e?Ld:xd)):"select"===t.name&&hr(s.value)?n=t.getAttribute("multiple")?Rd:Pd:"textarea"===t.name&&hr(s.value)&&(n=xd),n&&(o=new n(t))&&o.keypath?o:void 0}function hr(t){return t&&t.isBindable}function cr(){var t=this.getAction();t&&!this.hasListener?this.listen():!t&&this.hasListener&&this.unrender()}function lr(t){pe(this.root,this.getAction(),{event:t})}function dr(){return this.action.toString().trim()}function fr(t,e,n){var i,r,o,s=this;this.element=t,this.root=t.root,this.parentFragment=t.parentFragment,this.name=e,-1!==e.indexOf("*")&&(l('Only component proxy-events may contain "*" wildcards, <%s on-%s="..."/> is not valid',t.name,e),this.invalid=!0),n.m?(r=n.a.r,this.method=n.m,this.keypaths=[],this.fn=Fn(n.a.s,r.length),this.parentFragment=t.parentFragment,o=this.root,this.refResolvers=[],r.forEach(function(t,e){var n=void 0;(n=Ud.exec(t))?s.keypaths[e]={eventObject:!0,refinements:n[1]?n[1].split("."):[]}:s.refResolvers.push(Tn(s,t,function(t){return s.resolve(e,t)}))}),this.fire=pr):(i=n.n||n,"string"!=typeof i&&(i=new wm({template:i,root:this.root,owner:this})),this.action=i,n.d?(this.dynamicParams=new wm({template:n.d,root:this.root,owner:this.element}),this.fire=vr):n.a&&(this.params=n.a,this.fire=mr))}function pr(t){var e,n,i;if(e=this.root,"function"!=typeof e[this.method])throw new Error('Attempted to call a non-existent method ("'+this.method+'")');n=this.keypaths.map(function(n){var i,r,o;if(void 0===n)return void 0;if(n.eventObject){if(i=t,r=n.refinements.length)for(o=0;r>o;o+=1)i=i[n.refinements[o]]}else i=e.viewmodel.get(n);return i}),Fu.enqueue(e,t),i=this.fn.apply(null,n),e[this.method].apply(e,i),Fu.dequeue(e)}function mr(t){pe(this.root,this.getAction(),{event:t,args:this.params})}function vr(t){var e=this.dynamicParams.getArgsList();"string"==typeof e&&(e=e.substr(1,e.length-2)),pe(this.root,this.getAction(),{event:t,args:e})}function gr(t){var e,n,i,r={};e=this._ractive,n=e.events[t.type],(i=Sn(n.element.parentFragment))&&(r=Sn.resolve(i)),n.fire({node:this,original:t,index:r,keypath:e.keypath.str,context:e.root.viewmodel.get(e.keypath)})}function yr(){var t,e=this.name;if(!this.invalid){if(t=g("events",this.root,e))this.custom=t(this.node,br(e));else{if(!("on"+e in this.node||window&&"on"+e in window||Xs))return void(Wd[e]||v(Ia(e,"event"),{node:this.node}));this.node.addEventListener(e,gr,!1)}this.hasListener=!0}}function br(t){return qd[t]||(qd[t]=function(e){var n=e.node._ractive;e.index=n.index,e.keypath=n.keypath.str,e.context=n.root.viewmodel.get(n.keypath),n.events[t].fire(e)}),qd[t]}function wr(t,e){function n(n){n&&n.rebind(t,e)}var i;return this.method?(i=this.element.parentFragment,void this.refResolvers.forEach(n)):("string"!=typeof this.action&&n(this.action),void(this.dynamicParams&&n(this.dynamicParams)))}function kr(){this.node=this.element.node,this.node._ractive.events[this.name]=this,(this.method||this.getAction())&&this.listen()}function Er(t,e){this.keypaths[t]=e}function xr(){return this.method?void this.refResolvers.forEach(K):("string"!=typeof this.action&&this.action.unbind(),void(this.dynamicParams&&this.dynamicParams.unbind()))}function _r(){this.custom?this.custom.teardown():this.node.removeEventListener(this.name,gr,!1),this.hasListener=!1}function Ar(){var t=this;this.dirty||(this.dirty=!0,su.scheduleTask(function(){Cr(t),t.dirty=!1})),this.parentFragment.bubble()}function Cr(t){var e,n,i,r,o;e=t.node,e&&(r=I(e.options),n=t.getAttribute("value"),i=t.getAttribute("multiple"),void 0!==n?(r.forEach(function(t){var e,r;e=t._ractive?t._ractive.value:t.value,r=i?Or(n,e):n==e,r&&(o=!0),t.selected=r}),o||(r[0]&&(r[0].selected=!0),t.binding&&t.binding.forceUpdate())):t.binding&&t.binding.forceUpdate())}function Or(t,e){for(var n=t.length;n--;)if(t[n]==e)return!0}function Sr(t,e){t.select=Fr(t.parent),t.select&&(t.select.options.push(t),e.a||(e.a={}),void 0!==e.a.value||e.a.hasOwnProperty("disabled")||(e.a.value=e.f),"selected"in e.a&&void 0!==t.select.getAttribute("value")&&delete e.a.selected)}function Tr(t){t.select&&V(t.select.options,t)}function Fr(t){if(t)do if("select"===t.name)return t;while(t=t.parent)}function jr(t){var e,n,i,r,o,s,a;this.type=Jh,e=this.parentFragment=t.parentFragment,n=this.template=t.template,this.parent=t.pElement||e.pElement,this.root=i=e.root,this.index=t.index,this.key=t.key,this.name=Yl(n.e),"option"===this.name&&Sr(this,n),"select"===this.name&&(this.options=[],this.bubble=Ar),"form"===this.name&&(this.formBindings=[]),a=Gl(this,n),this.attributes=bd(this,n.a),this.conditionalAttributes=kd(this,n.m),n.f&&(this.fragment=new wm({template:n.f,root:i,owner:this,pElement:this,cssIds:null})),s=i.twoway,a.twoway===!1?s=!1:a.twoway===!0&&(s=!0),this.twoway=s,this.lazy=a.lazy,s&&(r=ur(this,n.a))&&(this.binding=r,o=this.root._twowayBindings[r.keypath.str]||(this.root._twowayBindings[r.keypath.str]=[]),o.push(r)),n.v&&(this.eventHandlers=Yd(this,n.v)),n.o&&(this.decorator=new Jd(this,n.o)),this.intro=n.t0||n.t1,this.outro=n.t0||n.t2}function Pr(t,e){function n(n){n.rebind(t,e)}var i,r,o,s;if(this.attributes&&this.attributes.forEach(n),this.conditionalAttributes&&this.conditionalAttributes.forEach(n),this.eventHandlers&&this.eventHandlers.forEach(n),this.decorator&&n(this.decorator),this.fragment&&n(this.fragment),o=this.liveQueries)for(s=this.root,i=o.length;i--;)o[i]._makeDirty();this.node&&(r=this.node._ractive)&&E(r,"keypath",t,e)}function Rr(t){var e;(t.attributes.width||t.attributes.height)&&t.node.addEventListener("load",e=function(){var n=t.getAttribute("width"),i=t.getAttribute("height");void 0!==n&&t.node.setAttribute("width",n),void 0!==i&&t.node.setAttribute("height",i),t.node.removeEventListener("load",e,!1)},!1)}function Nr(t){t.node.addEventListener("reset",Vr,!1)}function Lr(t){t.node.removeEventListener("reset",Vr,!1)}function Vr(){var t=this._ractive.proxy;su.start(),t.formBindings.forEach(Ir),su.end()}function Ir(t){t.root.viewmodel.set(t.keypath,t.resetValue)}function Dr(t,e,n){var i,r,o;this.element=t,this.root=i=t.root,this.isIntro=n,r=e.n||e,("string"==typeof r||(o=new wm({template:r,root:i,owner:t}),r=o.toString(),o.unbind(),""!==r))&&(this.name=r,e.a?this.params=e.a:e.d&&(o=new wm({template:e.d,root:i,owner:t}),this.params=o.getArgsList(),o.unbind()),this._fn=g("transitions",i,r),this._fn||v(Ia(r,"transition"),{ractive:this.root}))}function Mr(t){return t}function Ur(){Tf.hidden=document[Af]}function Br(){Tf.hidden=!0}function qr(){Tf.hidden=!1}function Wr(){var t,e,n,i=this;return t=this.node=this.element.node,e=t.getAttribute("style"),this.complete=function(r){n||(!r&&i.isIntro&&Qr(t,e),t._ractive.transition=null,i._manager.remove(i),n=!0)},this._fn?void this._fn.apply(this.root,[this].concat(this.params)):void this.complete()}function Qr(t,e){e?t.setAttribute("style",e):(t.getAttribute("style"),t.removeAttribute("style"))}function zr(){var t,e,n,i=this,r=this.root;return t=Hr(this),e=this.node=ca(this.name,t),this.parentFragment.cssIds&&this.node.setAttribute("data-ractive-css",this.parentFragment.cssIds.map(function(t){return"{"+t+"}"}).join(" ")),_a(this.node,"_ractive",{value:{proxy:this,keypath:iu(this.parentFragment),events:xa(null),root:r}}),this.attributes.forEach(function(t){return t.render(e)}),this.conditionalAttributes.forEach(function(t){return t.render(e)}),this.fragment&&("script"===this.name?(this.bubble=If,this.node.text=this.fragment.toString(!1),this.fragment.unrender=Ea):"style"===this.name?(this.bubble=Vf,this.bubble(),this.fragment.unrender=Ea):this.binding&&this.getAttribute("contenteditable")?this.fragment.unrender=Ea:this.node.appendChild(this.fragment.render())),this.binding&&(this.binding.render(),this.node._ractive.binding=this.binding),this.eventHandlers&&this.eventHandlers.forEach(function(t){return t.render()}),"option"===this.name&&Kr(this),"img"===this.name?Rr(this):"form"===this.name?Nr(this):"input"===this.name||"textarea"===this.name?this.node.defaultValue=this.node.value:"option"===this.name&&(this.node.defaultSelected=this.node.selected),this.decorator&&this.decorator.fn&&su.scheduleTask(function(){i.decorator.torndown||i.decorator.init()},!0),r.transitionsEnabled&&this.intro&&(n=new Lf(this,this.intro,!0),su.registerTransition(n),su.scheduleTask(function(){return n.start()},!0),this.transition=n),this.node.autofocus&&su.scheduleTask(function(){return i.node.focus()},!0),Gr(this),this.node}function Hr(t){var e,n,i;return e=(n=t.getAttribute("xmlns"))?n:"svg"===t.name?na.svg:(i=t.parent)?"foreignObject"===i.name?na.html:i.node.namespaceURI:t.root.el.namespaceURI}function Kr(t){var e,n,i;if(t.select&&(n=t.select.getAttribute("value"),void 0!==n))if(e=t.getAttribute("value"),t.select.node.multiple&&o(n)){for(i=n.length;i--;)if(e==n[i]){t.node.selected=!0;break}}else t.node.selected=e==n}function Gr(t){var e,n,i,r,o;e=t.root;do for(n=e._liveQueries,i=n.length;i--;)r=n[i],o=n["_"+r],o._test(t)&&(t.liveQueries||(t.liveQueries=[])).push(o);while(e=e.parent)}function $r(t){var e,n,i;if(e=t.getAttribute("value"),void 0===e||!t.select)return!1;if(n=t.select.getAttribute("value"),n==e)return!0;if(t.select.getAttribute("multiple")&&o(n))for(i=n.length;i--;)if(n[i]==e)return!0}function Yr(t){var e,n,i,r;return e=t.attributes,n=e.type,i=e.value,r=e.name,n&&"radio"===n.value&&i&&r.interpolator&&i.value===r.interpolator.value?!0:void 0}function Jr(t){var e=t.toString();return e?" "+e:""}function Zr(){this.fragment&&this.fragment.unbind(),this.binding&&this.binding.unbind(),this.eventHandlers&&this.eventHandlers.forEach(K),"option"===this.name&&Tr(this),this.attributes.forEach(K),this.conditionalAttributes.forEach(K)}function Xr(t){var e,n,i;(i=this.transition)&&i.complete(),"option"===this.name?this.detach():t&&su.detachWhenReady(this),this.fragment&&this.fragment.unrender(!1),(e=this.binding)&&(this.binding.unrender(),this.node._ractive.binding=null,n=this.root._twowayBindings[e.keypath.str],n.splice(n.indexOf(e),1)),this.eventHandlers&&this.eventHandlers.forEach(G),this.decorator&&su.registerDecorator(this.decorator),this.root.transitionsEnabled&&this.outro&&(i=new Lf(this,this.outro,!1),su.registerTransition(i),su.scheduleTask(function(){return i.start()})),this.liveQueries&&to(this),"form"===this.name&&Lr(this)}function to(t){var e,n,i;for(i=t.liveQueries.length;i--;)e=t.liveQueries[i],n=e.selector,e._remove(t.node)}function eo(t,e){var n=Qf.exec(e)[0];return null===t||n.length<t.length?n:t}function no(t,e,n){var i;if(i=io(t,e,n||{}))return i;if(i=_h.fromId(e,{noThrow:!0})){i=zf(i);var r=_h.parse(i,_h.getParseOptions(t));return t.partials[e]=r.t}}function io(t,e,n){var i=void 0,r=so(e,n.owner);if(r)return r;var o=y("partials",t,e);if(o){if(r=o.partials[e],"function"==typeof r&&(i=r.bind(o),i.isOwner=o.partials.hasOwnProperty(e),r=i.call(t,_h)),!r&&""!==r)return void m(Va,e,"partial","partial",{ractive:t});if(!_h.isParsed(r)){var s=_h.parse(r,_h.getParseOptions(o));s.p&&m("Partials ({{>%s}}) cannot contain nested inline partials",e,{ractive:t});var a=i?o:ro(o,e);a.partials[e]=r=s.t}return i&&(r._fn=i),r.v?r.t:r}}function ro(t,e){return t.partials.hasOwnProperty(e)?t:oo(t.constructor,e)}function oo(t,e){return t?t.partials.hasOwnProperty(e)?t:oo(t._Parent,e):void 0}function so(t,e){if(e){if(e.template&&e.template.p&&e.template.p[t])return e.template.p[t];if(e.parentFragment&&e.parentFragment.owner)return so(t,e.parentFragment.owner)}}function ao(t,e){var n,i=y("components",t,e);if(i&&(n=i.components[e],!n._Parent)){var r=n.bind(i);if(r.isOwner=i.components.hasOwnProperty(e),n=r(),!n)return void m(Va,e,"component","component",{ractive:t});"string"==typeof n&&(n=ao(t,n)),n._fn=r,i.components[e]=n}return n}function uo(){var t=this.instance.fragment.detach();return Xf.fire(this.instance),t}function ho(t){return this.instance.fragment.find(t)}function co(t,e){return this.instance.fragment.findAll(t,e)}function lo(t,e){e._test(this,!0),this.instance.fragment&&this.instance.fragment.findAllComponents(t,e)}function fo(t){return t&&t!==this.name?this.instance.fragment?this.instance.fragment.findComponent(t):null:this.instance}function po(){return this.parentFragment.findNextNode(this)}function mo(){return this.rendered?this.instance.fragment.firstNode():null}function vo(t,e,n){function i(t){var n,i;t.value=e,t.updating||(i=t.ractive,n=t.keypath,t.updating=!0,su.start(i),i.viewmodel.mark(n),su.end(),t.updating=!1)}var r,o,s,a,u,h;if(r=t.obj,o=t.prop,n&&!n.configurable){if("length"===o)return;throw new Error('Cannot use magic mode with property "'+o+'" - object is not configurable')}n&&(s=n.get,a=n.set),u=s||function(){return e},h=function(t){a&&a(t),e=s?s():t,h._ractiveWrappers.forEach(i)},h._ractiveWrappers=[t],Object.defineProperty(r,o,{get:u,set:h,enumerable:!0,configurable:!0})}function go(t,e){var n,i,r,o;if(this.adaptors)for(n=this.adaptors.length,i=0;n>i;i+=1)if(r=this.adaptors[i],r.filter(e,t,this.ractive))return o=this.wrapped[t]=r.wrap(this.ractive,e,t,bo(t)),void(o.value=e)}function yo(t,e){var n,i={};if(!e)return t;e+=".";for(n in t)t.hasOwnProperty(n)&&(i[e+n]=t[n]);return i}function bo(t){var e;return wp[t]||(e=t?t+".":"",wp[t]=function(n,i){var r;return"string"==typeof n?(r={},r[e+n]=i,r):"object"==typeof n?e?yo(n,t):n:void 0}),wp[t]}function wo(t){var e,n,i=[Ha];for(e=t.length;e--;)for(n=t[e].parent;n&&!n.isRoot;)-1===t.indexOf(n)&&j(i,n),n=n.parent;return i}function ko(t,e,n){var i;xo(t,e),n||(i=e.wildcardMatches(),i.forEach(function(n){Eo(t,n,e)}))}function Eo(t,e,n){var i,r,o;e=e.str||e,i=t.depsMap.patternObservers,r=i&&i[e],r&&r.forEach(function(e){o=n.join(e.lastKey),xo(t,o),Eo(t,e,o)})}function xo(t,e){t.patternObservers.forEach(function(t){t.regex.test(e.str)&&t.update(e)})}function _o(){function t(t){var i=t.key;t.viewmodel===s?(s.clearCache(i.str),t.invalidate(),n.push(i),e(i)):t.viewmodel.mark(i)}function e(n){var i,r;s.noCascade.hasOwnProperty(n.str)||((r=s.deps.computed[n.str])&&r.forEach(t),(i=s.depsMap.computed[n.str])&&i.forEach(e))}var n,i,r,o=this,s=this,a={};return n=this.changes,n.length?(n.slice().forEach(e),i=wo(n),i.forEach(function(e){var i;-1===n.indexOf(e)&&(i=s.deps.computed[e.str])&&i.forEach(t)}),this.changes=[],this.patternObservers.length&&(i.forEach(function(t){return ko(o,t,!0)}),n.forEach(function(t){return ko(o,t)})),this.deps.observers&&(i.forEach(function(t){return Ao(o,null,t,"observers")}),Oo(this,n,"observers")),this.deps["default"]&&(r=[],i.forEach(function(t){return Ao(o,r,t,"default")}),r.length&&Co(this,r,n),Oo(this,n,"default")),n.forEach(function(t){a[t.str]=o.get(t)}),this.implicitChanges={},this.noCascade={},a):void 0}function Ao(t,e,n,i){var r,o;(r=So(t,n,i))&&(o=t.get(n),r.forEach(function(t){e&&t.refineValue?e.push(t):t.setValue(o)}))}function Co(t,e,n){e.forEach(function(e){for(var i=!1,r=0,o=n.length,s=[];o>r;){var a=n[r];if(a===e.keypath){i=!0;break}a.slice(0,e.keypath.length)===e.keypath&&s.push(a),r++}i&&e.setValue(t.get(e.keypath)),s.length&&e.refineValue(s)})}function Oo(t,e,n){function i(t){t.forEach(r),t.forEach(o)}function r(e){var i=So(t,e,n);i&&a.push({keypath:e,deps:i})}function o(e){var r;(r=t.depsMap[n][e.str])&&i(r)}function s(e){var n=t.get(e.keypath);e.deps.forEach(function(t){return t.setValue(n)})}var a=[];i(e),a.forEach(s)}function So(t,e,n){var i=t.deps[n];return i?i[e.str]:null}function To(){this.captureGroups.push([])}function Fo(t,e){var n,i;if(e||(i=this.wrapped[t])&&i.teardown()!==!1&&(this.wrapped[t]=null),this.cache[t]=void 0,n=this.cacheMap[t])for(;n.length;)this.clearCache(n.pop())}function jo(t,e){var n=e.firstKey;return!(n in t.data||n in t.computations||n in t.mappings)}function Po(t,e){var n=new Ap(t,e);return this.ready&&n.init(this),this.computations[t.str]=n}function Ro(t,e){var n,i,r,o,s,a=this.cache,u=t.str;if(e=e||Tp,e.capture&&(o=L(this.captureGroups))&&(~o.indexOf(t)||o.push(t)),ja.call(this.mappings,t.firstKey))return this.mappings[t.firstKey].get(t,e);if(t.isSpecial)return t.value;if(void 0===a[u]?((i=this.computations[u])&&!i.bypass?(n=i.get(),this.adapt(u,n)):(r=this.wrapped[u])?n=r.value:t.isRoot?(this.adapt("",this.data),n=this.data):n=No(this,t),a[u]=n):n=a[u],!e.noUnwrap&&(r=this.wrapped[u])&&(n=r.get()),t.isRoot&&e.fullRootGet)for(s in this.mappings)n[s]=this.mappings[s].getValue();return n===Op?void 0:n}function No(t,e){var n,i,r,o;return n=t.get(e.parent),(o=t.wrapped[e.parent.str])&&(n=o.get()),null!==n&&void 0!==n?((i=t.cacheMap[e.parent.str])?-1===i.indexOf(e.str)&&i.push(e.str):t.cacheMap[e.parent.str]=[e.str],"object"!=typeof n||e.lastKey in n?(r=n[e.lastKey],t.adapt(e.str,r,!1),t.cache[e.str]=r,r):t.cache[e.str]=Op):void 0}function Lo(){var t;for(t in this.computations)this.computations[t].init(this)}function Vo(t,e){var n=this.mappings[t.str]=new Pp(t,e);return n.initViewmodel(this),n}function Io(t,e){var n,i=t.str;e&&(e.implicit&&(this.implicitChanges[i]=!0),e.noCascade&&(this.noCascade[i]=!0)),(n=this.computations[i])&&n.invalidate(),-1===this.changes.indexOf(t)&&this.changes.push(t);var r=e?e.keepExistingWrapper:!1;this.clearCache(i,r),this.ready&&this.onchange()}function Do(t,e,n,i){var r,o,s,a;if(this.mark(t),i&&i.compare){s=Uo(i.compare);try{r=e.map(s),o=n.map(s)}catch(u){m('merge(): "%s" comparison failed. Falling back to identity checking',t),r=e,o=n}}else r=e,o=n;a=Np(r,o),this.smartUpdate(t,n,a,e.length!==n.length)}function Mo(t){return JSON.stringify(t)}function Uo(t){if(t===!0)return Mo;if("string"==typeof t)return Vp[t]||(Vp[t]=function(e){return e[t]}),Vp[t];if("function"==typeof t)return t;throw new Error("The `compare` option must be a function, or a string representing an identifying field (or `true` to use JSON.stringify)")}function Bo(t,e){var n,i,r,o=void 0===arguments[2]?"default":arguments[2];e.isStatic||((n=this.mappings[t.firstKey])?n.register(t,e,o):(i=this.deps[o]||(this.deps[o]={}),r=i[t.str]||(i[t.str]=[]),r.push(e),t.isRoot||qo(this,t,o)))}function qo(t,e,n){for(var i,r,o;!e.isRoot;)i=t.depsMap[n]||(t.depsMap[n]={}),r=i[e.parent.str]||(i[e.parent.str]=[]),o=e.str,void 0===r["_"+o]&&(r["_"+o]=0,r.push(e)),r["_"+o]+=1,e=e.parent}function Wo(){return this.captureGroups.pop()}function Qo(t){this.data=t,this.clearCache("")}function zo(t,e){var n,i,r,o,s=void 0===arguments[2]?{}:arguments[2];if(!s.noMapping&&(n=this.mappings[t.firstKey]))return n.set(t,e);if(i=this.computations[t.str]){if(i.setting)return;i.set(e),e=i.get()}a(this.cache[t.str],e)||(r=this.wrapped[t.str],r&&r.reset&&(o=r.reset(e)!==!1,o&&(e=r.get())),i||o||Ho(this,t,e),s.silent?this.clearCache(t.str):this.mark(t))}function Ho(t,e,n){var i,r,o,s;o=function(){i.set?i.set(e.lastKey,n):(r=i.get(),s())},s=function(){r||(r=vp(e.lastKey),t.set(e.parent,r,{silent:!0})),r[e.lastKey]=n},i=t.wrapped[e.parent.str],i?o():(r=t.get(e.parent),(i=t.wrapped[e.parent.str])?o():s())}function Ko(t,e,n){var i,r,o,s=this;if(r=n.length,n.forEach(function(e,n){-1===e&&s.mark(t.join(n),Wp)}),this.set(t,e,{silent:!0}),(i=this.deps["default"][t.str])&&i.filter(Go).forEach(function(t){return t.shuffle(n,e)}),r!==e.length){for(this.mark(t.join("length"),qp),o=n.touchedFrom;o<e.length;o+=1)this.mark(t.join(o));for(o=e.length;r>o;o+=1)this.mark(t.join(o),Wp)}}function Go(t){return"function"==typeof t.shuffle}function $o(){var t,e=this;for(Object.keys(this.cache).forEach(function(t){return e.clearCache(t)});t=this.unresolvedImplicitDependencies.pop();)t.teardown()}function Yo(t,e){var n,i,r,o=void 0===arguments[2]?"default":arguments[2];if(!e.isStatic){if(n=this.mappings[t.firstKey])return n.unregister(t,e,o);if(i=this.deps[o][t.str],r=i.indexOf(e),-1===r)throw new Error("Attempted to remove a dependant that was no longer registered! This should not happen. If you are seeing this bug in development please raise an issue at https://github.com/RactiveJS/Ractive/issues - thanks");i.splice(r,1),t.isRoot||Jo(this,t,o)}}function Jo(t,e,n){for(var i,r;!e.isRoot;)i=t.depsMap[n],r=i[e.parent.str],r["_"+e.str]-=1,r["_"+e.str]||(V(r,e),r["_"+e.str]=void 0),e=e.parent}function Zo(t){this.hook=new F(t),this.inProcess={},this.queue={}}function Xo(t,e){return t[e._guid]||(t[e._guid]=[])}function ts(t,e){var n=Xo(t.queue,e);for(t.hook.fire(e);n.length;)ts(t,n.shift());delete t.queue[e._guid]}function es(t,e){var n,i={};for(n in e)i[n]=ns(t,n,e[n]);return i}function ns(t,e,n){var i,r;return"function"==typeof n&&(i=rs(n,t)),"string"==typeof n&&(i=is(t,n)),"object"==typeof n&&("string"==typeof n.get?i=is(t,n.get):"function"==typeof n.get?i=rs(n.get,t):l("`%s` computation must have a `get()` method",e),"function"==typeof n.set&&(r=rs(n.set,t))),{getter:i,setter:r}}function is(t,e){var n,i,r;return n="return ("+e.replace(Kp,function(t,e){return i=!0,'__ractive.get("'+e+'")'})+");",i&&(n="var __ractive = this; "+n),r=new Function(n),i?r.bind(t):r}function rs(t,e){return/this/.test(t.toString())?t.bind(e):t}function os(e){var n,r,o=void 0===arguments[1]?{}:arguments[1],s=void 0===arguments[2]?{}:arguments[2];if(km.DEBUG&&Fa(),us(e,s),_a(e,"data",{get:hs}),Gp.fire(e,o),Zp.forEach(function(t){e[t]=i(xa(e.constructor[t]||null),o[t])}),r=new Hp({adapt:ss(e,e.adapt,o),data:kh.init(e.constructor,e,o),computed:es(e,i(xa(e.constructor.prototype.computed),o.computed)),mappings:s.mappings,ractive:e,onchange:function(){return su.addRactive(e)}}),e.viewmodel=r,r.init(),Ch.init(e.constructor,e,o),$p.fire(e),Yp.begin(e),e.template){var a=void 0;(s.cssIds||e.cssId)&&(a=s.cssIds?s.cssIds.slice():[],e.cssId&&a.push(e.cssId)),e.fragment=new wm({template:e.template,root:e,owner:e,cssIds:a})}if(Yp.end(e),n=t(e.el)){var u=e.render(n,e.append);km.DEBUG_PROMISES&&u["catch"](function(t){throw v("Promise debugging is enabled, to help solve errors that happen asynchronously. Some browsers will log unhandled promise rejections, in which case you can safely disable promise debugging:\n  Ractive.DEBUG_PROMISES = false;"),m("An error happened during rendering",{ractive:e}),t.stack&&d(t.stack),t})}}function ss(t,e,n){function i(e){return"string"==typeof e&&(e=g("adaptors",t,e),e||l(Ia(e,"adaptor"))),e}var r,o,s;if(e=e.map(i),r=N(n.adapt).map(i),r=as(e,r),o="magic"in n?n.magic:t.magic,s="modifyArrays"in n?n.modifyArrays:t.modifyArrays,o){if(!ea)throw new Error("Getters and setters (magic mode) are not supported in this browser");s&&r.push(gp),r.push(fp)}return s&&r.push(hp),r}function as(t,e){for(var n=t.slice(),i=e.length;i--;)~n.indexOf(e[i])||n.push(e[i]);return n}function us(t,e){t._guid="r-"+Jp++,t._subs=xa(null),t._config={},t._twowayBindings=xa(null),t._animations=[],t.nodes={},t._liveQueries=[],t._liveComponentQueries=[],t._boundFunctions=[],e.component?(t.parent=e.parent,t.container=e.container||null,t.root=t.parent.root,t.component=e.component,e.component.instance=t,t._inlinePartials=e.inlinePartials):(t.root=t,t.parent=t.container=null)}function hs(){throw new Error("Using `ractive.data` is no longer supported - you must use the `ractive.get()` API instead")}function cs(t,e,n){this.parentFragment=t.parentFragment,this.callback=n,this.fragment=new wm({template:e,root:t.root,owner:this}),this.update()}function ls(t,e,n){var i;return e.r?i=Tn(t,e.r,n):e.x?i=new Hc(t,t.parentFragment,e.x,n):e.rx&&(i=new Yc(t,e.rx,n)),i}function ds(t){return 1===t.length&&t[0].t===Gh}function fs(t,e){var n;for(n in e)e.hasOwnProperty(n)&&ps(t.instance,t.root,n,e[n])}function ps(t,e,n,i){"string"!=typeof i&&l("Components currently only support simple events - you cannot include arguments. Sorry!"),t.on(n,function(){var t,n;return arguments.length&&arguments[0]&&arguments[0].node&&(t=Array.prototype.shift.call(arguments)),n=Array.prototype.slice.call(arguments),pe(e,i,{event:t,args:n}),!1})}function ms(t,e){var n,i;if(!e)throw new Error('Component "'+this.name+'" not found');n=this.parentFragment=t.parentFragment,i=n.root,this.root=i,this.type=ec,this.name=t.template.e,this.index=t.index,this.indexRefBindings={},this.yielders={},this.resolvers=[],tm(this,e,t.template.a,t.template.f,t.template.p),fs(this,t.template.v),(t.template.t1||t.template.t2||t.template.o)&&m('The "intro", "outro" and "decorator" directives have no effect on components',{ractive:this.instance}),em(this)}function vs(t,e){function n(n){n.rebind(t,e)}var i;this.resolvers.forEach(n);for(var r in this.yielders)this.yielders[r][0]&&n(this.yielders[r][0]);(i=this.root._liveComponentQueries["_"+this.name])&&i._makeDirty()}function gs(){var t=this.instance;return t.render(this.parentFragment.getNode()),this.rendered=!0,t.fragment.detach()}function ys(){return this.instance.fragment.toString()}function bs(){var t=this.instance;this.resolvers.forEach(K),ws(this),t.fragment.unbind(),t.viewmodel.teardown(),t.fragment.rendered&&t.el.__ractive_instances__&&V(t.el.__ractive_instances__,t),am.fire(t)}function ws(t){var e,n;e=t.root;do(n=e._liveComponentQueries["_"+t.name])&&n._remove(t);while(e=e.parent)}function ks(t){this.shouldDestroy=t,this.instance.unrender()}function Es(t){var e=this;this.owner=t.owner,this.parent=this.owner.parentFragment,this.root=t.root,this.pElement=t.pElement,this.context=t.context,this.index=t.index,this.key=t.key,this.registeredIndexRefs=[],this.cssIds="cssIds"in t?t.cssIds:this.parent?this.parent.cssIds:null,this.items=t.template.map(function(n,i){return xs({parentFragment:e,pElement:t.pElement,template:n,index:i})}),this.value=this.argsList=null,this.dirtyArgs=this.dirtyValue=!0,this.bound=!0}function xs(t){if("string"==typeof t.template)return new Mc(t);switch(t.template.t){case nc:return new dm(t);case Gh:return new el(t);case Yh:return new yl(t);case $h:return new Pl(t);case Jh:var e=void 0;return(e=ao(t.parentFragment.root,t.template.e))?new cm(t,e):new qf(t);case Zh:return new Gf(t);case Xh:return new lm(t);case ic:return new fm(t);default:throw new Error("Something very strange happened. Please file an issue at https://github.com/ractivejs/ractive/issues. Thanks!")}}function _s(t,e){(!this.owner||this.owner.hasContext)&&E(this,"context",t,e),this.items.forEach(function(n){n.rebind&&n.rebind(t,e)})}function As(){var t;return 1===this.items.length?t=this.items[0].render():(t=document.createDocumentFragment(),this.items.forEach(function(e){t.appendChild(e.render())})),this.rendered=!0,t}function Cs(t){return this.items?this.items.map(t?Ss:Os).join(""):""}function Os(t){return t.toString()}function Ss(t){return t.toString(!0)}function Ts(){this.bound&&(this.items.forEach(Fs),this.bound=!1)
}function Fs(t){t.unbind&&t.unbind()}function js(t){if(!this.rendered)throw new Error("Attempted to unrender a fragment that was not rendered");this.items.forEach(function(e){return e.unrender(t)}),this.rendered=!1}function Ps(t){var e,n,i,r,o;if(t=t||{},"object"!=typeof t)throw new Error("The reset method takes either no arguments, or an object containing new data");for((n=this.viewmodel.wrapped[""])&&n.reset?n.reset(t)===!1&&this.viewmodel.reset(t):this.viewmodel.reset(t),i=Ch.reset(this),r=i.length;r--;)if(_m.indexOf(i[r])>-1){o=!0;break}if(o){var s=void 0;this.viewmodel.mark(Ha),(s=this.component)&&(s.shouldDestroy=!0),this.unrender(),s&&(s.shouldDestroy=!1),this.fragment.template!==this.template&&(this.fragment.unbind(),this.fragment=new wm({template:this.template,root:this,owner:this})),e=this.render(this.el,this.anchor)}else e=su.start(this,!0),this.viewmodel.mark(Ha),su.end();return Am.fire(this,t),e}function Rs(t){var e,n;Ah.init(null,this,{template:t}),e=this.transitionsEnabled,this.transitionsEnabled=!1,(n=this.component)&&(n.shouldDestroy=!0),this.unrender(),n&&(n.shouldDestroy=!1),this.fragment.unbind(),this.fragment=new wm({template:this.template,root:this,owner:this}),this.render(this.el,this.anchor),this.transitionsEnabled=e}function Ns(t,e){var n,i;if(i=su.start(this,!0),h(t)){n=t;for(t in n)n.hasOwnProperty(t)&&(e=n[t],Ls(this,t,e))}else Ls(this,t,e);return su.end(),i}function Ls(t,e,n){e=_(O(e)),e.isPattern?A(t,e).forEach(function(e){t.viewmodel.set(e,n)}):t.viewmodel.set(e,n)}function Vs(t,e){return S(this,t,void 0===e?-1:-e)}function Is(){var t;return this.fragment.unbind(),this.viewmodel.teardown(),this.fragment.rendered&&this.el.__ractive_instances__&&V(this.el.__ractive_instances__,this),this.shouldDestroy=!0,t=this.fragment.rendered?this.unrender():nu.resolve(),Lm.fire(this),this._boundFunctions.forEach(Ds),t}function Ds(t){delete t.fn[t.prop]}function Ms(t){var e=this;if("string"!=typeof t)throw new TypeError(La);var n=void 0;return/\*/.test(t)?(n={},A(this,_(O(t))).forEach(function(t){n[t.str]=!e.viewmodel.get(t)}),this.set(n)):this.set(t,!this.get(t))}function Us(){return this.fragment.toString(!0)}function Bs(){var t,e;if(!this.fragment.rendered)return m("ractive.unrender() was called on a Ractive instance that was not rendered"),nu.resolve();for(t=su.start(this,!0),e=!this.component||this.component.shouldDestroy||this.shouldDestroy;this._animations[0];)this._animations[0].stop();return this.fragment.unrender(e),V(this.el.__ractive_instances__,this),Mm.fire(this),su.end(),t}function qs(t){var e;return t=_(t)||Ha,e=su.start(this,!0),this.viewmodel.mark(t),su.end(),qm.fire(this,t),e}function Ws(t,e){var n,i,r;if("string"!=typeof t||e){r=[];for(i in this._twowayBindings)(!t||_(i).equalsOrStartsWith(t))&&r.push.apply(r,this._twowayBindings[i])}else r=this._twowayBindings[t];return n=Qs(this,r),this.set(n)}function Qs(t,e){var n={},i=[];return e.forEach(function(t){var e,r;if(!t.radioName||t.element.node.checked){if(t.checkboxName)return void(i[t.keypath.str]||t.changed()||(i.push(t.keypath),i[t.keypath.str]=t));e=t.attribute.value,r=t.getValue(),R(e,r)||a(e,r)||(n[t.keypath.str]=r)}}),i.length&&i.forEach(function(t){var e,r,o;e=i[t.str],r=e.attribute.value,o=e.getValue(),R(r,o)||(n[t.str]=o)}),n}function zs(t,e){return"function"==typeof e&&/_super/.test(t)}function Hs(t){for(var e={};t;)Ks(t,e),$s(t,e),t=t._Parent!==km?t._Parent:!1;return e}function Ks(t,e){hh.forEach(function(n){Gs(n.useDefaults?t.prototype:t,e,n.name)})}function Gs(t,e,n){var i,r=Object.keys(t[n]);r.length&&((i=e[n])||(i=e[n]={}),r.filter(function(t){return!(t in i)}).forEach(function(e){return i[e]=t[n][e]}))}function $s(t,e){Object.keys(t.prototype).forEach(function(n){if("computed"!==n){var i=t.prototype[n];if(n in e){if("function"==typeof e[n]&&"function"==typeof i&&e[n]._method){var r=void 0,o=i._method;o&&(i=i._method),r=zm(e[n]._method,i),o&&(r._method=r),e[n]=r}}else e[n]=i._method?i._method:i}})}function Ys(){for(var t=arguments.length,e=Array(t),n=0;t>n;n++)e[n]=arguments[n];return e.length?e.reduce(Js,this):Js(this)}function Js(t){var e,n,r=void 0===arguments[1]?{}:arguments[1];return r.prototype instanceof km&&(r=Hm(r)),e=function(t){return this instanceof e?void Xp(this,t):new e(t)},n=xa(t.prototype),n.constructor=e,Aa(e,{defaults:{value:n},extend:{value:Ys,writable:!0,configurable:!0},_Parent:{value:t}}),Ch.extend(t,n,r),kh.extend(t,n,r),r.computed&&(n.computed=i(xa(t.prototype.computed),r.computed)),e.prototype=n,e}var Zs,Xs,ta,ea,na,ia,ra,oa=3,sa={el:void 0,append:!1,template:{v:oa,t:[]},preserveWhitespace:!1,sanitize:!1,stripComments:!0,delimiters:["{{","}}"],tripleDelimiters:["{{{","}}}"],interpolate:!1,data:{},computed:{},magic:!1,modifyArrays:!0,adapt:[],isolated:!1,twoway:!0,lazy:!1,noIntro:!1,transitionsEnabled:!0,complete:void 0,css:null,noCssTransform:!1},aa=sa,ua={linear:function(t){return t},easeIn:function(t){return Math.pow(t,3)},easeOut:function(t){return Math.pow(t-1,3)+1},easeInOut:function(t){return(t/=.5)<1?.5*Math.pow(t,3):.5*(Math.pow(t-2,3)+2)}};Zs="object"==typeof document,Xs="undefined"!=typeof navigator&&/jsDom/.test(navigator.appName),ta="undefined"!=typeof console&&"function"==typeof console.warn&&"function"==typeof console.warn.apply;try{Object.defineProperty({},"test",{value:0}),ea=!0}catch(ha){ea=!1}na={html:"http://www.w3.org/1999/xhtml",mathml:"http://www.w3.org/1998/Math/MathML",svg:"http://www.w3.org/2000/svg",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},ia="undefined"==typeof document?!1:document&&document.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#BasicStructure","1.1"),ra=["o","ms","moz","webkit"];var ca,la,da,fa,pa,ma,va,ga,ya;if(ca=ia?function(t,e){return e&&e!==na.html?document.createElementNS(e,t):document.createElement(t)}:function(t,e){if(e&&e!==na.html)throw"This browser does not support namespaces other than http://www.w3.org/1999/xhtml. The most likely cause of this error is that you're trying to render SVG in an older browser. See http://docs.ractivejs.org/latest/svg-and-older-browsers for more information";return document.createElement(t)},Zs){for(da=ca("div"),fa=["matches","matchesSelector"],ya=function(t){return function(e,n){return e[t](n)}},va=fa.length;va--&&!la;)if(pa=fa[va],da[pa])la=ya(pa);else for(ga=ra.length;ga--;)if(ma=ra[va]+pa.substr(0,1).toUpperCase()+pa.substring(1),da[ma]){la=ya(ma);break}la||(la=function(t,e){var n,i,r;for(i=t.parentNode,i||(da.innerHTML="",i=da,t=t.cloneNode(),da.appendChild(t)),n=i.querySelectorAll(e),r=n.length;r--;)if(n[r]===t)return!0;return!1})}else la=null;var ba,wa,ka,Ea=function(){};"undefined"==typeof window?ka=null:(ba=window,wa=ba.document,ka={},wa||(ka=null),Date.now||(Date.now=function(){return+new Date}),String.prototype.trim||(String.prototype.trim=function(){return this.replace(/^\s+/,"").replace(/\s+$/,"")}),Object.keys||(Object.keys=function(){var t=Object.prototype.hasOwnProperty,e=!{toString:null}.propertyIsEnumerable("toString"),n=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],i=n.length;return function(r){if("object"!=typeof r&&"function"!=typeof r||null===r)throw new TypeError("Object.keys called on non-object");var o=[];for(var s in r)t.call(r,s)&&o.push(s);if(e)for(var a=0;i>a;a++)t.call(r,n[a])&&o.push(n[a]);return o}}()),Array.prototype.indexOf||(Array.prototype.indexOf=function(t,e){var n;for(void 0===e&&(e=0),0>e&&(e+=this.length),0>e&&(e=0),n=this.length;n>e;e++)if(this.hasOwnProperty(e)&&this[e]===t)return e;return-1}),Array.prototype.forEach||(Array.prototype.forEach=function(t,e){var n,i;for(n=0,i=this.length;i>n;n+=1)this.hasOwnProperty(n)&&t.call(e,this[n],n,this)}),Array.prototype.map||(Array.prototype.map=function(t,e){var n,i,r,o=this,s=[];for(o instanceof String&&(o=o.toString(),r=!0),n=0,i=o.length;i>n;n+=1)(o.hasOwnProperty(n)||r)&&(s[n]=t.call(e,o[n],n,o));return s}),"function"!=typeof Array.prototype.reduce&&(Array.prototype.reduce=function(t,e){var n,i,r,o;if("function"!=typeof t)throw new TypeError(t+" is not a function");for(r=this.length,o=!1,arguments.length>1&&(i=e,o=!0),n=0;r>n;n+=1)this.hasOwnProperty(n)?o&&(i=t(i,this[n],n,this)):(i=this[n],o=!0);if(!o)throw new TypeError("Reduce of empty array with no initial value");return i}),Array.prototype.filter||(Array.prototype.filter=function(t,e){var n,i,r=[];for(n=0,i=this.length;i>n;n+=1)this.hasOwnProperty(n)&&t.call(e,this[n],n,this)&&(r[r.length]=this[n]);return r}),Array.prototype.every||(Array.prototype.every=function(t,e){var n,i,r;if(null==this)throw new TypeError;if(n=Object(this),i=n.length>>>0,"function"!=typeof t)throw new TypeError;for(r=0;i>r;r+=1)if(r in n&&!t.call(e,n[r],r,n))return!1;return!0}),"function"!=typeof Function.prototype.bind&&(Function.prototype.bind=function(t){var e,n,i,r,o=[].slice;if("function"!=typeof this)throw new TypeError("Function.prototype.bind called on non-function");return e=o.call(arguments,1),n=this,i=function(){},r=function(){var r=this instanceof i&&t?this:t;return n.apply(r,e.concat(o.call(arguments)))},i.prototype=this.prototype,r.prototype=new i,r}),ba.addEventListener||!function(t,e){var n,i,r,o,s,a;t.appearsToBeIELessEqual8=!0,n=function(t,e){var n,i=this;for(n in t)i[n]=t[n];i.currentTarget=e,i.target=t.srcElement||e,i.timeStamp=+new Date,i.preventDefault=function(){t.returnValue=!1},i.stopPropagation=function(){t.cancelBubble=!0}},i=function(t,e){var i,r,o=this;i=o.listeners||(o.listeners=[]),r=i.length,i[r]=[e,function(t){e.call(o,new n(t,o))}],o.attachEvent("on"+t,i[r][1])},r=function(t,e){var n,i,r=this;if(r.listeners)for(n=r.listeners,i=n.length;i--;)n[i][0]===e&&r.detachEvent("on"+t,n[i][1])},t.addEventListener=e.addEventListener=i,t.removeEventListener=e.removeEventListener=r,"Element"in t?(t.Element.prototype.addEventListener=i,t.Element.prototype.removeEventListener=r):(a=e.createElement,e.createElement=function(t){var e=a(t);return e.addEventListener=i,e.removeEventListener=r,e},o=e.getElementsByTagName("head")[0],s=e.createElement("style"),o.insertBefore(s,o.firstChild))}(ba,wa),ba.getComputedStyle||(ka.getComputedStyle=function(){function t(n,i,r,o){var s,a=i[r],u=parseFloat(a),h=a.split(/\d/)[0];return isNaN(u)&&/^thin|medium|thick$/.test(a)&&(u=e(a),h=""),o=null!=o?o:/%|em/.test(h)&&n.parentElement?t(n.parentElement,n.parentElement.currentStyle,"fontSize",null):16,s="fontSize"==r?o:/width/i.test(r)?n.clientWidth:n.clientHeight,"em"==h?u*o:"in"==h?96*u:"pt"==h?96*u/72:"%"==h?u/100*s:u}function e(t){var e,n;return o[t]||(e=document.createElement("div"),e.style.display="block",e.style.position="fixed",e.style.width=e.style.height="0",e.style.borderRight=t+" solid black",document.getElementsByTagName("body")[0].appendChild(e),n=e.getBoundingClientRect(),o[t]=n.right-n.left),o[t]}function n(t,e){var n="border"==e?"Width":"",i=e+"Top"+n,r=e+"Right"+n,o=e+"Bottom"+n,s=e+"Left"+n;t[e]=(t[i]==t[r]==t[o]==t[s]?[t[i]]:t[i]==t[o]&&t[s]==t[r]?[t[i],t[r]]:t[s]==t[r]?[t[i],t[r],t[o]]:[t[i],t[r],t[o],t[s]]).join(" ")}function i(e){var i,r,o,a;i=e.currentStyle,r=this,o=t(e,i,"fontSize",null);for(a in i)"normal"===i[a]&&s.hasOwnProperty(a)?r[a]=s[a]:/width|height|margin.|padding.|border.+W/.test(a)?"auto"===i[a]?/^width|height/.test(a)?r[a]=("width"===a?e.clientWidth:e.clientHeight)+"px":/(?:padding)?Top|Bottom$/.test(a)&&(r[a]="0px"):r[a]=t(e,i,a,o)+"px":"styleFloat"===a?r["float"]=i[a]:r[a]=i[a];return n(r,"margin"),n(r,"padding"),n(r,"border"),r.fontSize=o+"px",r}function r(t){return new i(t)}var o={},s={fontWeight:400,lineHeight:1.2,letterSpacing:0};return i.prototype={constructor:i,getPropertyPriority:Ea,getPropertyValue:function(t){return this[t]||""},item:Ea,removeProperty:Ea,setProperty:Ea,getPropertyCSSValue:Ea},r}()));var xa,_a,Aa,Ca=ka;try{Object.defineProperty({},"test",{value:0}),Zs&&Object.defineProperty(document.createElement("div"),"test",{value:0}),_a=Object.defineProperty}catch(Oa){_a=function(t,e,n){t[e]=n.value}}try{try{Object.defineProperties({},{test:{value:0}})}catch(Oa){throw Oa}Zs&&Object.defineProperties(ca("div"),{test:{value:0}}),Aa=Object.defineProperties}catch(Oa){Aa=function(t,e){var n;for(n in e)e.hasOwnProperty(n)&&_a(t,n,e[n])}}try{Object.create(null),xa=Object.create}catch(Oa){xa=function(){var t=function(){};return function(e,n){var i;return null===e?{}:(t.prototype=e,i=new t,n&&Object.defineProperties(i,n),i)}}()}var Sa,Ta,Fa,ja=Object.prototype.hasOwnProperty,Pa=Object.prototype.toString,Ra=/^\[object (?:Array|FileList)\]$/,Na={};ta?!function(){var t=["%cRactive.js %c0.7.1 %cin debug mode, %cmore...","color: rgb(114, 157, 52); font-weight: normal;","color: rgb(85, 85, 85); font-weight: normal;","color: rgb(85, 85, 85); font-weight: normal;","color: rgb(82, 140, 224); font-weight: normal; text-decoration: underline;"],e="You're running Ractive <@version@> in debug mode - messages will be printed to the console to help you fix problems and optimise your application.\n\nTo disable debug mode, add this line at the start of your app:\n  Ractive.DEBUG = false;\n\nTo disable debug mode when your app is minified, add this snippet:\n  Ractive.DEBUG = /unminified/.test(function(){/*unminified*/});\n\nGet help and support:\n  http://docs.ractivejs.org\n  http://stackoverflow.com/questions/tagged/ractivejs\n  http://groups.google.com/forum/#!forum/ractive-js\n  http://twitter.com/ractivejs\n\nFound a bug? Raise an issue:\n  https://github.com/ractivejs/ractive/issues\n\n";Fa=function(){var n=!!console.groupCollapsed;console[n?"groupCollapsed":"log"].apply(console,t),console.log(e),n&&console.groupEnd(t),Fa=Ea},Ta=function(t,e){if(Fa(),"object"==typeof e[e.length-1]){var n=e.pop(),i=n.ractive;if(i){var r=void 0;i.component&&(r=i.component.name)&&(t="<"+r+"> "+t);var o=void 0;(o=n.node||i.fragment&&i.fragment.rendered&&i.find("*"))&&e.push(o)}}console.warn.apply(console,["%cRactive.js: %c"+t,"color: rgb(114, 157, 52);","color: rgb(85, 85, 85);"].concat(e))},Sa=function(){console.log.apply(console,arguments)}}():Ta=Sa=Fa=Ea;var La="Bad arguments",Va='A function was specified for "%s" %s, but no %s was returned',Ia=function(t,e){return'Missing "'+t+'" '+e+" plugin. You may need to download a plugin via http://docs.ractivejs.org/latest/plugins#"+e+"s"},Da=function(t,e,n,i){if(t===e)return b(e);if(i){var r=g("interpolators",n,i);if(r)return r(t,e)||b(e);l(Ia(i,"interpolator"))}return Ma.number(t,e)||Ma.array(t,e)||Ma.object(t,e)||b(e)},Ma={number:function(t,e){var n;return u(t)&&u(e)?(t=+t,e=+e,n=e-t,n?function(e){return t+e*n}:function(){return t}):null},array:function(t,e){var n,i,r,s;if(!o(t)||!o(e))return null;for(n=[],i=[],s=r=Math.min(t.length,e.length);s--;)i[s]=Da(t[s],e[s]);for(s=r;s<t.length;s+=1)n[s]=t[s];for(s=r;s<e.length;s+=1)n[s]=e[s];return function(t){for(var e=r;e--;)n[e]=i[e](t);return n}},object:function(t,e){var n,i,r,o,s;if(!h(t)||!h(e))return null;n=[],o={},r={};for(s in t)ja.call(t,s)&&(ja.call(e,s)?(n.push(s),r[s]=Da(t[s],e[s])):o[s]=t[s]);for(s in e)ja.call(e,s)&&!ja.call(t,s)&&(o[s]=e[s]);return i=n.length,function(t){for(var e,s=i;s--;)e=n[s],o[e]=r[e](t);return o}}},Ua={},Ba=/\[\s*(\*|[0-9]|[1-9][0-9]+)\s*\]/g,qa=/\*/,Wa={},Qa=function(t){var e=t.split(".");this.str=t,"@"===t[0]&&(this.isSpecial=!0,this.value=x(t)),this.firstKey=e[0],this.lastKey=e.pop(),this.isPattern=qa.test(t),this.parent=""===t?null:_(e.join(".")),this.isRoot=!t};Qa.prototype={equalsOrStartsWith:function(t){return t===this||this.startsWith(t)},join:function(t){return _(this.isRoot?String(t):this.str+"."+t)},replace:function(t,e){return this===t?e:this.startsWith(t)?null===e?e:_(this.str.replace(t.str+".",e.str+".")):void 0},startsWith:function(t){return t?t&&this.str.substr(0,t.str.length+1)===t.str+".":!1},toString:function(){throw new Error("Bad coercion")},valueOf:function(){throw new Error("Bad coercion")},wildcardMatches:function(){return this._wildcardMatches||(this._wildcardMatches=w(this.str))}};var za,Ha=_(""),Ka="Cannot add to a non-numeric value",Ga=T;"undefined"==typeof window?za=null:(!function(t,e,n){var i,r;if(!n.requestAnimationFrame){for(i=0;i<t.length&&!n.requestAnimationFrame;++i)n.requestAnimationFrame=n[t[i]+"RequestAnimationFrame"];n.requestAnimationFrame||(r=n.setTimeout,n.requestAnimationFrame=function(t){var n,i,o;return n=Date.now(),i=Math.max(0,16-(n-e)),o=r(function(){t(n+i)},i),e=n+i,o})}}(ra,0,window),za=window.requestAnimationFrame);var $a,Ya=za;$a="undefined"!=typeof window&&window.performance&&"function"==typeof window.performance.now?function(){return window.performance.now()}:function(){return Date.now()};var Ja={construct:{deprecated:"beforeInit",replacement:"onconstruct"},render:{deprecated:"init",message:'The "init" method has been deprecated and will likely be removed in a future release. You can either use the "oninit" method which will fire only once prior to, and regardless of, any eventual ractive instance being rendered, or if you need to access the rendered DOM, use "onrender" instead. See http://docs.ractivejs.org/latest/migrating for more information.'},complete:{deprecated:"complete",replacement:"oncomplete"}};F.prototype.fire=function(t,e){function n(n){return t[n]?(e?t[n](e):t[n](),!0):void 0}n(this.method),!t[this.method]&&this.deprecate&&n(this.deprecate.deprecated)&&(this.deprecate.message?m(this.deprecate.message):m('The method "%s" has been deprecated in favor of "%s" and will likely be removed in a future release. See http://docs.ractivejs.org/latest/migrating for more information.',this.deprecate.deprecated,this.deprecate.replacement)),e?t.fire(this.event,e):t.fire(this.event)};var Za,Xa={},tu={},eu={};"function"==typeof Promise?Za=Promise:(Za=function(t){var e,n,i,r,o,s,a=[],u=[],h=Xa;i=function(t){return function(i){h===Xa&&(e=i,h=t,n=M(h===tu?a:u,e),D(n))}},r=i(tu),o=i(eu);try{t(r,o)}catch(c){o(c)}return s={then:function(t,e){var i=new Za(function(r,o){var s=function(t,e,n){e.push("function"==typeof t?function(e){var n;try{n=t(e),U(i,n,r,o)}catch(s){o(s)}}:n)};s(t,a,r),s(e,u,o),h!==Xa&&D(n)});return i}},s["catch"]=function(t){return this.then(null,t)},s},Za.all=function(t){return new Za(function(e,n){var i,r,o,s=[];if(!t.length)return void e(s);for(o=function(t,r){t&&"function"==typeof t.then?t.then(function(t){s[r]=t,--i||e(s)},n):(s[r]=t,--i||e(s))},i=r=t.length;r--;)o(t[r],r)})},Za.resolve=function(t){return new Za(function(e){e(t)})},Za.reject=function(t){return new Za(function(e,n){n(t)})});var nu=Za,iu=function(t){do if(void 0!==t.context)return t.context;while(t=t.parent);return Ha},ru=function(t,e){this.callback=t,this.parent=e,this.intros=[],this.outros=[],this.children=[],this.totalChildren=this.outroChildren=0,this.detachQueue=[],this.decoratorQueue=[],this.outrosComplete=!1,e&&e.addChild(this)};ru.prototype={addChild:function(t){this.children.push(t),this.totalChildren+=1,this.outroChildren+=1},decrementOutros:function(){this.outroChildren-=1,J(this)},decrementTotal:function(){this.totalChildren-=1,J(this)},add:function(t){var e=t.isIntro?this.intros:this.outros;e.push(t)},addDecorator:function(t){this.decoratorQueue.push(t)},remove:function(t){var e=t.isIntro?this.intros:this.outros;V(e,t),J(this)},init:function(){this.ready=!0,J(this)},detachNodes:function(){this.decoratorQueue.forEach(H),this.detachQueue.forEach($),this.children.forEach(Y)}};var ou,su,au=[],uu=new F("change");su={start:function(t,e){var n,i;return e&&(n=new nu(function(t){return i=t})),ou={previousBatch:ou,transitionManager:new ru(i,ou&&ou.transitionManager),views:[],tasks:[],ractives:[],instance:t},t&&ou.ractives.push(t),n},end:function(){Z(),ou.transitionManager.init(),!ou.previousBatch&&ou.instance&&(ou.instance.viewmodel.changes=[]),ou=ou.previousBatch},addRactive:function(t){ou&&j(ou.ractives,t)},registerTransition:function(t){t._manager=ou.transitionManager,ou.transitionManager.add(t)},registerDecorator:function(t){ou.transitionManager.addDecorator(t)},addView:function(t){ou.views.push(t)},addUnresolved:function(t){au.push(t)},removeUnresolved:function(t){V(au,t)},detachWhenReady:function(t){ou.transitionManager.detachQueue.push(t)},scheduleTask:function(t,e){var n;if(ou){for(n=ou;e&&n.previousBatch;)n=n.previousBatch;n.tasks.push(t)}else t()}};var hu=[],cu={tick:function(){var t,e,n;for(n=$a(),su.start(),t=0;t<hu.length;t+=1)e=hu[t],e.tick(n)||hu.splice(t--,1);su.end(),hu.length?Ya(cu.tick):cu.running=!1},add:function(t){hu.push(t),cu.running||(cu.running=!0,Ya(cu.tick))},abort:function(t,e){for(var n,i=hu.length;i--;)n=hu[i],n.root===e&&n.keypath===t&&n.stop()}},lu=cu,du=function(t){var e;this.startTime=Date.now();for(e in t)t.hasOwnProperty(e)&&(this[e]=t[e]);this.interpolator=Da(this.from,this.to,this.root,this.interpolator),this.running=!0,this.tick()};du.prototype={tick:function(){var t,e,n,i,r,o;return o=this.keypath,this.running?(i=Date.now(),t=i-this.startTime,t>=this.duration?(null!==o&&(su.start(this.root),this.root.viewmodel.set(o,this.to),su.end()),this.step&&this.step(1,this.to),this.complete(this.to),r=this.root._animations.indexOf(this),-1===r&&m("Animation was not found"),this.root._animations.splice(r,1),this.running=!1,!1):(e=this.easing?this.easing(t/this.duration):t/this.duration,null!==o&&(n=this.interpolator(e),su.start(this.root),this.root.viewmodel.set(o,n),su.end()),this.step&&this.step(e,n),!0)):!1},stop:function(){var t;this.running=!1,t=this.root._animations.indexOf(this),-1===t&&m("Animation was not found"),this.root._animations.splice(t,1)}};var fu=ee,pu={stop:Ea},mu=ie,vu=new F("detach"),gu=re,yu=oe,bu=function(){var t,e,n;t=this._root[this._isComponentQuery?"liveComponentQueries":"liveQueries"],e=this.selector,n=t.indexOf(e),-1!==n&&(t.splice(n,1),t[e]=null)},wu=function(t,e){var n,i,r,o,s,a,u,h,c,l;for(n=ae(t.component||t._ractive.proxy),i=ae(e.component||e._ractive.proxy),r=L(n),o=L(i);r&&r===o;)n.pop(),i.pop(),s=r,r=L(n),o=L(i);if(r=r.component||r,o=o.component||o,c=r.parentFragment,l=o.parentFragment,c===l)return a=c.items.indexOf(r),u=l.items.indexOf(o),a-u||n.length-i.length;if(h=s.fragments)return a=h.indexOf(c),u=h.indexOf(l),a-u||n.length-i.length;throw new Error("An unexpected condition was met while comparing the position of two components. Please file an issue at https://github.com/RactiveJS/Ractive/issues - thanks!")},ku=function(t,e){var n;return t.compareDocumentPosition?(n=t.compareDocumentPosition(e),2&n?1:-1):wu(t,e)},Eu=function(){this.sort(this._isComponentQuery?wu:ku),this._dirty=!1},xu=function(){var t=this;this._dirty||(this._dirty=!0,su.scheduleTask(function(){t._sort()}))},_u=function(t){var e=this.indexOf(this._isComponentQuery?t.instance:t);-1!==e&&this.splice(e,1)},Au=he,Cu=ce,Ou=le,Su=de,Tu=fe,Fu={enqueue:function(t,e){t.event&&(t._eventQueue=t._eventQueue||[],t._eventQueue.push(t.event)),t.event=e},dequeue:function(t){t._eventQueue&&t._eventQueue.length?t.event=t._eventQueue.pop():delete t.event}},ju=ge,Pu=ye,Ru={capture:!0,noUnwrap:!0,fullRootGet:!0},Nu=be,Lu=new F("insert"),Vu=ke,Iu=function(t,e,n,i){this.root=t,this.keypath=e,this.callback=n,this.defer=i.defer,this.context=i&&i.context?i.context:t};Iu.prototype={init:function(t){this.value=this.root.get(this.keypath.str),t!==!1?this.update():this.oldValue=this.value},setValue:function(t){var e=this;a(t,this.value)||(this.value=t,this.defer&&this.ready?su.scheduleTask(function(){return e.update()}):this.update())},update:function(){this.updating||(this.updating=!0,this.callback.call(this.context,this.value,this.oldValue,this.keypath.str),this.oldValue=this.value,this.updating=!1)}};var Du,Mu=Array.prototype.slice;Du=function(t,e,n,i){this.root=t,this.callback=n,this.defer=i.defer,this.keypath=e,this.regex=new RegExp("^"+e.str.replace(/\./g,"\\.").replace(/\*/g,"([^\\.]+)")+"$"),this.values={},this.defer&&(this.proxies=[]),this.context=i&&i.context?i.context:t},Du.prototype={init:function(t){var e,n;if(e=Ee(this.root,this.keypath),t!==!1)for(n in e)e.hasOwnProperty(n)&&this.update(_(n));else this.values=e},update:function(t){var e,n=this;if(t.isPattern){e=Ee(this.root,t);for(t in e)e.hasOwnProperty(t)&&this.update(_(t))}else if(!this.root.viewmodel.implicitChanges[t.str])return this.defer&&this.ready?void su.scheduleTask(function(){return n.getProxy(t).update()}):void this.reallyUpdate(t)},reallyUpdate:function(t){var e,n,i,r;return e=t.str,n=this.root.viewmodel.get(t),this.updating?void(this.values[e]=n):(this.updating=!0,a(n,this.values[e])&&this.ready||(i=Mu.call(this.regex.exec(e),1),r=[n,this.values[e],e].concat(i),this.values[e]=n,this.callback.apply(this.context,r)),void(this.updating=!1))},getProxy:function(t){var e=this;return this.proxies[t.str]||(this.proxies[t.str]={update:function(){return e.reallyUpdate(t)}}),this.proxies[t.str]}};var Uu,Bu,qu,Wu,Qu,zu,Hu={},Ku=_e,Gu=Ae,$u=function(t){return t.trim()},Yu=function(t){return""!==t},Ju=Ce,Zu=Oe,Xu=Se,th=Array.prototype,eh=function(t){return function(e){for(var n=arguments.length,i=Array(n>1?n-1:0),r=1;n>r;r++)i[r-1]=arguments[r];var s,a,u,h,c=[];if(e=_(O(e)),s=this.viewmodel.get(e),a=s.length,!o(s))throw new Error("Called ractive."+t+"('"+e.str+"'), but '"+e.str+"' does not refer to an array");return c=Te(s,t,i),h=th[t].apply(s,i),u=su.start(this,!0).then(function(){return h}),c?this.viewmodel.smartUpdate(e,s,c):this.viewmodel.mark(e),su.end(),u}},nh=eh("pop"),ih=eh("push"),rh="/* Ractive.js component styles */\n",oh=[],sh=!1;Zs?(qu=document.createElement("style"),qu.type="text/css",Wu=document.getElementsByTagName("head")[0],zu=!1,Qu=qu.styleSheet,Bu=function(){var t=rh+oh.map(function(t){return"\n/* {"+t.id+"} */\n"+t.styles}).join("\n");Qu?Qu.cssText=t:qu.innerHTML=t,zu||(Wu.appendChild(qu),zu=!0)},Uu={add:function(t){oh.push(t),sh=!0},apply:function(){sh&&(Bu(),sh=!1)}}):Uu=null;var ah,uh,hh,ch=je,lh=new F("render"),dh=new F("complete"),fh={extend:function(t,e,n){e.adapt=Re(e.adapt,N(n.adapt))},init:function(){}},ph=/(?:^|\})?\s*([^\{\}]+)\s*\{/g,mh=/\/\*.*?\*\//g,vh=/((?:(?:\[[^\]+]\])|(?:[^\s\+\>\~:]))+)((?::[^\s\+\>\~\(]+(?:\([^\)]+\))?)?\s*[\s\+\>\~]?)\s*/g,gh=/^@media/,yh=/\[data-ractive-css~="\{[a-z0-9-]+\}"]/g,bh=1,wh={name:"css",extend:function(t,e,n){if(n.css){var i=bh++,r=n.noCssTransform?n.css:Ne(n.css,i);e.cssId=i,Uu.add({id:i,styles:r})}},init:function(){}},kh={name:"data",extend:function(t,e,n){var i=void 0,r=void 0;if(n.data&&h(n.data))for(i in n.data)r=n.data[i],r&&"object"==typeof r&&(h(r)||o(r))&&m("Passing a `data` option with object and array properties to Ractive.extend() is discouraged, as mutating them is likely to cause bugs. Consider using a data function instead:\n\n  // this...\n  data: function () {\n    return {\n      myObject: {}\n    };\n  })\n\n  // instead of this:\n  data: {\n    myObject: {}\n  }");e.data=De(e.data,n.data)},init:function(t,e,n){var i=De(t.prototype.data,n.data);return"function"==typeof i&&(i=i.call(e)),i||{}},reset:function(t){var e=this.init(t.constructor,t,t.viewmodel);return t.viewmodel.reset(e),!0}},Eh=["preserveWhitespace","sanitize","stripComments","delimiters","tripleDelimiters","interpolate"],xh={parse:qe,fromId:We,isHashedId:Qe,isParsed:ze,getParseOptions:He,createHelper:Be},_h=xh,Ah={name:"template",extend:function(t,e,n){var i;"template"in n&&(i=n.template,e.template="function"==typeof i?i:Ye(i,e))},init:function(t,e,n){var i,r;i="template"in n?n.template:t.prototype.template,"function"==typeof i&&(r=i,i=Ge(e,r),e._config.template={fn:r,result:i}),i=Ye(i,e),e.template=i.t,i.p&&Je(e.partials,i.p)},reset:function(t){var e,n=Ke(t);return n?(e=Ye(n,t),t.template=e.t,Je(t.partials,e.p,!0),!0):void 0}};ah=["adaptors","components","computed","decorators","easing","events","interpolators","partials","transitions"],uh=function(t,e){this.name=t,this.useDefaults=e},uh.prototype={constructor:uh,extend:function(t,e,n){this.configure(this.useDefaults?t.defaults:t,this.useDefaults?e:e.constructor,n)},init:function(){},configure:function(t,e,n){var i,r=this.name,o=n[r];i=xa(t[r]);for(var s in o)i[s]=o[s];e[r]=i},reset:function(t){var e=t[this.name],n=!1;return Object.keys(e).forEach(function(t){var i=e[t];i._fn&&(i._fn.isOwner?e[t]=i._fn:delete e[t],n=!0)}),n}},hh=ah.map(function(t){return new uh(t,"computed"===t)});var Ch,Oh,Sh,Th,Fh,jh,Ph=Ze;Th={adapt:fh,css:wh,data:kh,template:Ah},Sh=Object.keys(aa),jh=sn(Sh.filter(function(t){return!Th[t]})),Fh=sn(Sh.concat(hh.map(function(t){return t.name}))),Oh=[].concat(Sh.filter(function(t){return!hh[t]&&!Th[t]}),hh,Th.data,Th.template,Th.css),Ch={extend:function(t,e,n){return rn("extend",t,e,n)},init:function(t,e,n){return rn("init",t,e,n)},reset:function(t){return Oh.filter(function(e){return e.reset&&e.reset(t)}).map(function(t){return t.name})},order:Oh};var Rh,Nh,Lh=an,Vh=un,Ih=hn,Dh=cn,Mh=ln,Uh=dn,Bh=fn,qh=pn,Wh=/^\s+/;Nh=function(t){this.name="ParseError",this.message=t;try{throw new Error(t)}catch(e){this.stack=e.stack}},Nh.prototype=Error.prototype,Rh=function(t,e){var n,i,r=0;for(this.str=t,this.options=e||{},this.pos=0,this.lines=this.str.split("\n"),this.lineEnds=this.lines.map(function(t){var e=r+t.length+1;return r=e,e},0),this.init&&this.init(t,e),n=[];this.pos<this.str.length&&(i=this.read());)n.push(i);this.leftover=this.remaining(),this.result=this.postProcess?this.postProcess(n,e):n},Rh.prototype={read:function(t){var e,n,i,r;for(t||(t=this.converters),e=this.pos,i=t.length,n=0;i>n;n+=1)if(this.pos=e,r=t[n](this))return r;return null},getLinePos:function(t){for(var e,n=0,i=0;t>=this.lineEnds[n];)i=this.lineEnds[n],n+=1;return e=t-i,[n+1,e+1,t]},error:function(t){var e=this.getLinePos(this.pos),n=e[0],i=e[1],r=this.lines[e[0]-1],o=0,s=r.replace(/\t/g,function(t,n){return n<e[1]&&(o+=1),"  "})+"\n"+new Array(e[1]+o).join(" ")+"^----",a=new Nh(""+t+" at line "+n+" character "+i+":\n"+s);throw a.line=e[0],a.character=e[1],a.shortMessage=t,a},matchString:function(t){return this.str.substr(this.pos,t.length)===t?(this.pos+=t.length,t):void 0},matchPattern:function(t){var e;return(e=t.exec(this.remaining()))?(this.pos+=e[0].length,e[1]||e[0]):void 0},allowWhitespace:function(){this.matchPattern(Wh)},remaining:function(){return this.str.substring(this.pos)},nextChar:function(){return this.str.charAt(this.pos)}},Rh.extend=function(t){var e,n,i=this;e=function(t,e){Rh.call(this,t,e)},e.prototype=xa(i.prototype);for(n in t)ja.call(t,n)&&(e.prototype[n]=t[n]);return e.extend=Rh.extend,e};var Qh,zh,Hh,Kh=1,Gh=2,$h=3,Yh=4,Jh=7,Zh=8,Xh=9,tc=13,ec=15,nc=16,ic=18,rc=20,oc=21,sc=30,ac=50,uc=51,hc=52,cc=53,lc=54;Qh=/^(?=.)[^"'\\]+?(?:(?!.)|(?=["'\\]))/,zh=/^\\(?:['"\\bfnrt]|0(?![0-9])|x[0-9a-fA-F]{2}|u[0-9a-fA-F]{4}|(?=.)[^ux0-9])/,Hh=/^\\(?:\r\n|[\u000A\u000D\u2028\u2029])/;var dc,fc,pc,mc,vc,gc,yc,bc=function(t){return function(e){var n,i,r,o;for(n=e.pos,i='"',r=!1;!r;)o=e.matchPattern(Qh)||e.matchPattern(zh)||e.matchString(t),o?i+='"'===o?'\\"':"\\'"===o?"'":o:(o=e.matchPattern(Hh),o?i+="\\u"+("000"+o.charCodeAt(1).toString(16)).slice(-4):r=!0);return i+='"',JSON.parse(i)}},wc=bc('"'),kc=bc("'"),Ec=function(t){var e,n;return e=t.pos,t.matchString('"')?(n=kc(t),t.matchString('"')?{t:oc,v:n}:(t.pos=e,null)):t.matchString("'")?(n=wc(t),t.matchString("'")?{t:oc,v:n}:(t.pos=e,null)):null},xc=/^(?:[+-]?)0*(?:(?:(?:[1-9]\d*)?\.\d+)|(?:(?:0|[1-9]\d*)\.)|(?:0|[1-9]\d*))(?:[eE][+-]?\d+)?/,_c=/^[a-zA-Z_$][a-zA-Z_$0-9]*/,Ac=/^[a-zA-Z_$][a-zA-Z_$0-9]*$/;fc={"true":!0,"false":!1,undefined:void 0,"null":null},pc=new RegExp("^(?:"+Object.keys(fc).join("|")+")"),mc=/^(?:[+-]?)(?:(?:(?:0|[1-9]\d*)?\.\d+)|(?:(?:0|[1-9]\d*)\.)|(?:0|[1-9]\d*))(?:[eE][+-]?\d+)?/,vc=/\$\{([^\}]+)\}/g,gc=/^\$\{([^\}]+)\}/,yc=/^\s*$/,dc=Rh.extend({init:function(t,e){this.values=e.values,this.allowWhitespace()},postProcess:function(t){return 1===t.length&&yc.test(this.leftover)?{value:t[0].v}:null},converters:[function(t){var e;return t.values?(e=t.matchPattern(gc),e&&t.values.hasOwnProperty(e)?{v:t.values[e]}:void 0):null},function(t){var e;return(e=t.matchPattern(pc))?{v:fc[e]}:void 0},function(t){var e;
return(e=t.matchPattern(mc))?{v:+e}:void 0},function(t){var e,n=Ec(t);return n&&(e=t.values)?{v:n.v.replace(vc,function(t,n){return n in e?e[n]:n})}:n},function(t){var e,n;if(!t.matchString("{"))return null;if(e={},t.allowWhitespace(),t.matchString("}"))return{v:e};for(;n=gn(t);){if(e[n.key]=n.value,t.allowWhitespace(),t.matchString("}"))return{v:e};if(!t.matchString(","))return null}return null},function(t){var e,n;if(!t.matchString("["))return null;if(e=[],t.allowWhitespace(),t.matchString("]"))return{v:e};for(;n=t.read();){if(e.push(n.v),t.allowWhitespace(),t.matchString("]"))return{v:e};if(!t.matchString(","))return null;t.allowWhitespace()}return null}]});var Cc,Oc,Sc,Tc,Fc,jc,Pc,Rc,Nc=function(t,e){var n=new dc(t,{values:e});return n.result},Lc=bn,Vc=wn,Ic=kn;Cc=/^(allowFullscreen|async|autofocus|autoplay|checked|compact|controls|declare|default|defaultChecked|defaultMuted|defaultSelected|defer|disabled|enabled|formNoValidate|hidden|indeterminate|inert|isMap|itemScope|loop|multiple|muted|noHref|noResize|noShade|noValidate|noWrap|open|pauseOnExit|readOnly|required|reversed|scoped|seamless|selected|sortable|translate|trueSpeed|typeMustMatch|visible)$/i,Oc=/^(?:area|base|br|col|command|doctype|embed|hr|img|input|keygen|link|meta|param|source|track|wbr)$/i,Sc={quot:34,amp:38,apos:39,lt:60,gt:62,nbsp:160,iexcl:161,cent:162,pound:163,curren:164,yen:165,brvbar:166,sect:167,uml:168,copy:169,ordf:170,laquo:171,not:172,shy:173,reg:174,macr:175,deg:176,plusmn:177,sup2:178,sup3:179,acute:180,micro:181,para:182,middot:183,cedil:184,sup1:185,ordm:186,raquo:187,frac14:188,frac12:189,frac34:190,iquest:191,Agrave:192,Aacute:193,Acirc:194,Atilde:195,Auml:196,Aring:197,AElig:198,Ccedil:199,Egrave:200,Eacute:201,Ecirc:202,Euml:203,Igrave:204,Iacute:205,Icirc:206,Iuml:207,ETH:208,Ntilde:209,Ograve:210,Oacute:211,Ocirc:212,Otilde:213,Ouml:214,times:215,Oslash:216,Ugrave:217,Uacute:218,Ucirc:219,Uuml:220,Yacute:221,THORN:222,szlig:223,agrave:224,aacute:225,acirc:226,atilde:227,auml:228,aring:229,aelig:230,ccedil:231,egrave:232,eacute:233,ecirc:234,euml:235,igrave:236,iacute:237,icirc:238,iuml:239,eth:240,ntilde:241,ograve:242,oacute:243,ocirc:244,otilde:245,ouml:246,divide:247,oslash:248,ugrave:249,uacute:250,ucirc:251,uuml:252,yacute:253,thorn:254,yuml:255,OElig:338,oelig:339,Scaron:352,scaron:353,Yuml:376,fnof:402,circ:710,tilde:732,Alpha:913,Beta:914,Gamma:915,Delta:916,Epsilon:917,Zeta:918,Eta:919,Theta:920,Iota:921,Kappa:922,Lambda:923,Mu:924,Nu:925,Xi:926,Omicron:927,Pi:928,Rho:929,Sigma:931,Tau:932,Upsilon:933,Phi:934,Chi:935,Psi:936,Omega:937,alpha:945,beta:946,gamma:947,delta:948,epsilon:949,zeta:950,eta:951,theta:952,iota:953,kappa:954,lambda:955,mu:956,nu:957,xi:958,omicron:959,pi:960,rho:961,sigmaf:962,sigma:963,tau:964,upsilon:965,phi:966,chi:967,psi:968,omega:969,thetasym:977,upsih:978,piv:982,ensp:8194,emsp:8195,thinsp:8201,zwnj:8204,zwj:8205,lrm:8206,rlm:8207,ndash:8211,mdash:8212,lsquo:8216,rsquo:8217,sbquo:8218,ldquo:8220,rdquo:8221,bdquo:8222,dagger:8224,Dagger:8225,bull:8226,hellip:8230,permil:8240,prime:8242,Prime:8243,lsaquo:8249,rsaquo:8250,oline:8254,frasl:8260,euro:8364,image:8465,weierp:8472,real:8476,trade:8482,alefsym:8501,larr:8592,uarr:8593,rarr:8594,darr:8595,harr:8596,crarr:8629,lArr:8656,uArr:8657,rArr:8658,dArr:8659,hArr:8660,forall:8704,part:8706,exist:8707,empty:8709,nabla:8711,isin:8712,notin:8713,ni:8715,prod:8719,sum:8721,minus:8722,lowast:8727,radic:8730,prop:8733,infin:8734,ang:8736,and:8743,or:8744,cap:8745,cup:8746,"int":8747,there4:8756,sim:8764,cong:8773,asymp:8776,ne:8800,equiv:8801,le:8804,ge:8805,sub:8834,sup:8835,nsub:8836,sube:8838,supe:8839,oplus:8853,otimes:8855,perp:8869,sdot:8901,lceil:8968,rceil:8969,lfloor:8970,rfloor:8971,lang:9001,rang:9002,loz:9674,spades:9824,clubs:9827,hearts:9829,diams:9830},Tc=[8364,129,8218,402,8222,8230,8224,8225,710,8240,352,8249,338,141,381,143,144,8216,8217,8220,8221,8226,8211,8212,732,8482,353,8250,339,157,382,376],Fc=new RegExp("&(#?(?:x[\\w\\d]+|\\d+|"+Object.keys(Sc).join("|")+"));?","g"),jc=/</g,Pc=/>/g,Rc=/&/g;var Dc=function(){return e(this.node)},Mc=function(t){this.type=Kh,this.text=t.template};Mc.prototype={detach:Dc,firstNode:function(){return this.node},render:function(){return this.node||(this.node=document.createTextNode(this.text)),this.node},toString:function(t){return t?_n(this.text):this.text},unrender:function(t){return t?this.detach():void 0}};var Uc=An,Bc=Cn,qc=function(t,e,n){var i;this.ref=e,this.resolved=!1,this.root=t.root,this.parentFragment=t.parentFragment,this.callback=n,i=B(t.root,e,t.parentFragment),void 0!=i?this.resolve(i):su.addUnresolved(this)};qc.prototype={resolve:function(t){this.keypath&&!t&&su.addUnresolved(this),this.resolved=!0,this.keypath=t,this.callback(t)},forceResolution:function(){this.resolve(_(this.ref))},rebind:function(t,e){var n;void 0!=this.keypath&&(n=this.keypath.replace(t,e),void 0!==n&&this.resolve(n))},unbind:function(){this.resolved||su.removeUnresolved(this)}};var Wc=function(t,e,n){this.parentFragment=t.parentFragment,this.ref=e,this.callback=n,this.rebind()},Qc={"@keypath":{prefix:"c",prop:["context"]},"@index":{prefix:"i",prop:["index"]},"@key":{prefix:"k",prop:["key","index"]}};Wc.prototype={rebind:function(){var t,e=this.ref,n=this.parentFragment,i=Qc[e];if(!i)throw new Error('Unknown special reference "'+e+'" - valid references are @index, @key and @keypath');if(this.cached)return this.callback(_("@"+i.prefix+On(this.cached,i)));if(-1!==i.prop.indexOf("index")||-1!==i.prop.indexOf("key"))for(;n;){if(n.owner.currentSubtype===hc&&void 0!==(t=On(n,i)))return this.cached=n,n.registerIndexRef(this),this.callback(_("@"+i.prefix+t));n=!n.parent&&n.owner&&n.owner.component&&n.owner.component.parentFragment&&!n.owner.component.instance.isolated?n.owner.component.parentFragment:n.parent}else for(;n;){if(void 0!==(t=On(n,i)))return this.callback(_("@"+i.prefix+t.str));n=n.parent}},unbind:function(){this.cached&&this.cached.unregisterIndexRef(this)}};var zc=function(t,e,n){this.parentFragment=t.parentFragment,this.ref=e,this.callback=n,e.ref.fragment.registerIndexRef(this),this.rebind()};zc.prototype={rebind:function(){var t,e=this.ref.ref;t="k"===e.ref.t?"k"+e.fragment.key:"i"+e.fragment.index,void 0!==t&&this.callback(_("@"+t))},unbind:function(){this.ref.ref.fragment.unregisterIndexRef(this)}},Sn.resolve=function(t){var e,n,i={};for(e in t.refs)n=t.refs[e],i[n.ref.n]="k"===n.ref.t?n.fragment.key:n.fragment.index;return i};var Hc,Kc={},Gc=Function.prototype.bind;Hc=function(t,e,n,i){var r,o=this;r=t.root,this.root=r,this.parentFragment=e,this.callback=i,this.owner=t,this.str=n.s,this.keypaths=[],this.pending=n.r.length,this.refResolvers=n.r.map(function(t,e){return Tn(o,t,function(t){o.resolve(e,t)})}),this.ready=!0,this.bubble()},Hc.prototype={bubble:function(){this.ready&&(this.uniqueString=Pn(this.str,this.keypaths),this.keypath=Rn(this.uniqueString),this.createEvaluator(),this.callback(this.keypath))},unbind:function(){for(var t;t=this.refResolvers.pop();)t.unbind()},resolve:function(t,e){this.keypaths[t]=e,this.bubble()},createEvaluator:function(){var t,e,n,i,r,o=this;i=this.keypath,t=this.root.viewmodel.computations[i.str],t?this.root.viewmodel.mark(i):(r=Fn(this.str,this.refResolvers.length),e=this.keypaths.map(function(t){var e;return"undefined"===t?function(){return void 0}:t.isSpecial?(e=t.value,function(){return e}):function(){var e=o.root.viewmodel.get(t,{noUnwrap:!0,fullRootGet:!0});return"function"==typeof e&&(e=Ln(e,o.root)),e}}),n={deps:this.keypaths.filter(Nn),getter:function(){var t=e.map(jn);return r.apply(null,t)}},t=this.root.viewmodel.compute(i,n))},rebind:function(t,e){this.refResolvers.forEach(function(n){return n.rebind(t,e)})}};var $c=function(t,e,n){var i=this;this.resolver=e,this.root=e.root,this.parentFragment=n,this.viewmodel=e.root.viewmodel,"string"==typeof t?this.value=t:t.t===sc?this.refResolver=Tn(this,t.n,function(t){i.resolve(t)}):new Hc(e,n,t,function(t){i.resolve(t)})};$c.prototype={resolve:function(t){this.keypath&&this.viewmodel.unregister(this.keypath,this),this.keypath=t,this.value=this.viewmodel.get(t),this.bind(),this.resolver.bubble()},bind:function(){this.viewmodel.register(this.keypath,this)},rebind:function(t,e){this.refResolver&&this.refResolver.rebind(t,e)},setValue:function(t){this.value=t,this.resolver.bubble()},unbind:function(){this.keypath&&this.viewmodel.unregister(this.keypath,this),this.refResolver&&this.refResolver.unbind()},forceResolution:function(){this.refResolver&&this.refResolver.forceResolution()}};var Yc=function(t,e,n){var i,r,o,s,a=this;this.parentFragment=s=t.parentFragment,this.root=i=t.root,this.mustache=t,this.ref=r=e.r,this.callback=n,this.unresolved=[],(o=B(i,r,s))?this.base=o:this.baseResolver=new qc(this,r,function(t){a.base=t,a.baseResolver=null,a.bubble()}),this.members=e.m.map(function(t){return new $c(t,a,s)}),this.ready=!0,this.bubble()};Yc.prototype={getKeypath:function(){var t=this.members.map(Vn);return!t.every(In)||this.baseResolver?null:this.base.join(t.join("."))},bubble:function(){this.ready&&!this.baseResolver&&this.callback(this.getKeypath())},unbind:function(){this.members.forEach(K)},rebind:function(t,e){var n;if(this.base){var i=this.base.replace(t,e);i&&i!==this.base&&(this.base=i,n=!0)}this.members.forEach(function(i){i.rebind(t,e)&&(n=!0)}),n&&this.bubble()},forceResolution:function(){this.baseResolver&&(this.base=_(this.ref),this.baseResolver.unbind(),this.baseResolver=null),this.members.forEach(Dn),this.bubble()}};var Jc=Mn,Zc=Un,Xc=Bn,tl={getValue:Bc,init:Jc,resolve:Zc,rebind:Xc},el=function(t){this.type=Gh,tl.init(this,t)};el.prototype={update:function(){this.node.data=void 0==this.value?"":this.value},resolve:tl.resolve,rebind:tl.rebind,detach:Dc,unbind:Uc,render:function(){return this.node||(this.node=document.createTextNode(n(this.value))),this.node},unrender:function(t){t&&e(this.node)},getValue:tl.getValue,setValue:function(t){var e;this.keypath&&(e=this.root.viewmodel.wrapped[this.keypath.str])&&(t=e.get()),a(t,this.value)||(this.value=t,this.parentFragment.bubble(),this.node&&su.addView(this))},firstNode:function(){return this.node},toString:function(t){var e=""+n(this.value);return t?_n(e):e}};var nl=qn,il=Wn,rl=Qn,ol=zn,sl=Hn,al=Kn,ul=Gn,hl=$n,cl=Yn,ll=function(t,e){tl.rebind.call(this,t,e)},dl=Zn,fl=Xn,pl=ci,ml=li,vl=di,gl=mi,yl=function(t){this.type=Yh,this.subtype=this.currentSubtype=t.template.n,this.inverted=this.subtype===uc,this.pElement=t.pElement,this.fragments=[],this.fragmentsToCreate=[],this.fragmentsToRender=[],this.fragmentsToUnrender=[],t.template.i&&(this.indexRefs=t.template.i.split(",").map(function(t,e){return{n:t,t:0===e?"k":"i"}})),this.renderedFragments=[],this.length=0,tl.init(this,t)};yl.prototype={bubble:nl,detach:il,find:rl,findAll:ol,findAllComponents:sl,findComponent:al,findNextNode:ul,firstNode:hl,getIndexRef:function(t){if(this.indexRefs)for(var e=this.indexRefs.length;e--;){var n=this.indexRefs[e];if(n.n===t)return n}},getValue:tl.getValue,shuffle:cl,rebind:ll,render:dl,resolve:tl.resolve,setValue:fl,toString:pl,unbind:ml,unrender:vl,update:gl};var bl,wl,kl=vi,El=gi,xl=yi,_l=bi,Al={};try{ca("table").innerHTML="foo"}catch(Oa){bl=!0,wl={TABLE:['<table class="x">',"</table>"],THEAD:['<table><thead class="x">',"</thead></table>"],TBODY:['<table><tbody class="x">',"</tbody></table>"],TR:['<table><tr class="x">',"</tr></table>"],SELECT:['<select class="x">',"</select>"]}}var Cl=function(t,e,n){var i,r,o,s,a,u=[];if(null!=t&&""!==t){for(bl&&(r=wl[e.tagName])?(i=wi("DIV"),i.innerHTML=r[0]+t+r[1],i=i.querySelector(".x"),"SELECT"===i.tagName&&(o=i.options[i.selectedIndex])):e.namespaceURI===na.svg?(i=wi("DIV"),i.innerHTML='<svg class="x">'+t+"</svg>",i=i.querySelector(".x")):(i=wi(e.tagName),i.innerHTML=t,"SELECT"===i.tagName&&(o=i.options[i.selectedIndex]));s=i.firstChild;)u.push(s),n.appendChild(s);if("SELECT"===e.tagName)for(a=u.length;a--;)u[a]!==o&&(u[a].selected=!1)}return u},Ol=xi,Sl=_i,Tl=Ai,Fl=Ci,jl=Oi,Pl=function(t){this.type=$h,tl.init(this,t)};Pl.prototype={detach:kl,find:El,findAll:xl,firstNode:_l,getValue:tl.getValue,rebind:tl.rebind,render:Ol,resolve:tl.resolve,setValue:Sl,toString:Tl,unbind:Uc,unrender:Fl,update:jl};var Rl,Nl,Ll,Vl,Il=function(){this.parentFragment.bubble()},Dl=Si,Ml=function(t){return this.node?la(this.node,t)?this.node:this.fragment&&this.fragment.find?this.fragment.find(t):void 0:null},Ul=function(t,e){e._test(this,!0)&&e.live&&(this.liveQueries||(this.liveQueries=[])).push(e),this.fragment&&this.fragment.findAll(t,e)},Bl=function(t,e){this.fragment&&this.fragment.findAllComponents(t,e)},ql=function(t){return this.fragment?this.fragment.findComponent(t):void 0},Wl=Ti,Ql=Fi,zl=ji,Hl=/^true|on|yes|1$/i,Kl=/^[0-9]+$/,Gl=function(t,e){var n,i,r;return r=e.a||{},i={},n=r.twoway,void 0!==n&&(i.twoway=0===n||Hl.test(n)),n=r.lazy,void 0!==n&&(i.lazy=0!==n&&Kl.test(n)?parseInt(n):0===n||Hl.test(n)),i},$l=Pi;Rl="altGlyph altGlyphDef altGlyphItem animateColor animateMotion animateTransform clipPath feBlend feColorMatrix feComponentTransfer feComposite feConvolveMatrix feDiffuseLighting feDisplacementMap feDistantLight feFlood feFuncA feFuncB feFuncG feFuncR feGaussianBlur feImage feMerge feMergeNode feMorphology feOffset fePointLight feSpecularLighting feSpotLight feTile feTurbulence foreignObject glyphRef linearGradient radialGradient textPath vkern".split(" "),Nl="attributeName attributeType baseFrequency baseProfile calcMode clipPathUnits contentScriptType contentStyleType diffuseConstant edgeMode externalResourcesRequired filterRes filterUnits glyphRef gradientTransform gradientUnits kernelMatrix kernelUnitLength keyPoints keySplines keyTimes lengthAdjust limitingConeAngle markerHeight markerUnits markerWidth maskContentUnits maskUnits numOctaves pathLength patternContentUnits patternTransform patternUnits pointsAtX pointsAtY pointsAtZ preserveAlpha preserveAspectRatio primitiveUnits refX refY repeatCount repeatDur requiredExtensions requiredFeatures specularConstant specularExponent spreadMethod startOffset stdDeviation stitchTiles surfaceScale systemLanguage tableValues targetX targetY textLength viewBox viewTarget xChannelSelector yChannelSelector zoomAndPan".split(" "),Ll=function(t){for(var e={},n=t.length;n--;)e[t[n].toLowerCase()]=t[n];return e},Vl=Ll(Rl.concat(Nl));var Yl=function(t){var e=t.toLowerCase();return Vl[e]||e},Jl=function(t,e){var n,i;if(n=e.indexOf(":"),-1===n||(i=e.substr(0,n),"xmlns"===i))t.name=t.element.namespace!==na.html?Yl(e):e;else if(e=e.substring(n+1),t.name=Yl(e),t.namespace=na[i.toLowerCase()],t.namespacePrefix=i,!t.namespace)throw'Unknown namespace ("'+i+'")'},Zl=Ni,Xl=Li,td=Vi,ed={"accept-charset":"acceptCharset",accesskey:"accessKey",bgcolor:"bgColor","class":"className",codebase:"codeBase",colspan:"colSpan",contenteditable:"contentEditable",datetime:"dateTime",dirname:"dirName","for":"htmlFor","http-equiv":"httpEquiv",ismap:"isMap",maxlength:"maxLength",novalidate:"noValidate",pubdate:"pubDate",readonly:"readOnly",rowspan:"rowSpan",tabindex:"tabIndex",usemap:"useMap"},nd=Ii,id=Mi,rd=Ui,od=Bi,sd=qi,ad=Wi,ud=Qi,hd=zi,cd=Hi,ld=Ki,dd=Gi,fd=$i,pd=Yi,md=Ji,vd=Zi,gd=function(t){this.init(t)};gd.prototype={bubble:$l,init:Zl,rebind:Xl,render:td,toString:nd,unbind:id,update:vd};var yd,bd=function(t,e){var n,i,r=[];for(n in e)"twoway"!==n&&"lazy"!==n&&e.hasOwnProperty(n)&&(i=new gd({element:t,name:n,value:e[n],root:t.root}),r[n]=i,"value"!==n&&r.push(i));return(i=r.value)&&r.push(i),r};"undefined"!=typeof document&&(yd=ca("div"));var wd=function(t,e){this.element=t,this.root=t.root,this.parentFragment=t.parentFragment,this.attributes=[],this.fragment=new wm({root:t.root,owner:this,template:[e]})};wd.prototype={bubble:function(){this.node&&this.update(),this.element.bubble()},rebind:function(t,e){this.fragment.rebind(t,e)},render:function(t){this.node=t,this.isSvg=t.namespaceURI===na.svg,this.update()},unbind:function(){this.fragment.unbind()},update:function(){var t,e,n=this;t=this.fragment.toString(),e=Xi(t,this.isSvg),this.attributes.filter(function(t){return tr(e,t)}).forEach(function(t){n.node.removeAttribute(t.name)}),e.forEach(function(t){n.node.setAttribute(t.name,t.value)}),this.attributes=e},toString:function(){return this.fragment.toString()}};var kd=function(t,e){return e?e.map(function(e){return new wd(t,e)}):[]},Ed=function(t){var e,n,i,r;if(this.element=t,this.root=t.root,this.attribute=t.attributes[this.name||"value"],e=this.attribute.interpolator,e.twowayBinding=this,n=e.keypath){if("}"===n.str.slice(-1))return v("Two-way binding does not work with expressions (`%s` on <%s>)",e.resolver.uniqueString,t.name,{ractive:this.root}),!1;if(n.isSpecial)return v("Two-way binding does not work with %s",e.resolver.ref,{ractive:this.root}),!1}else{var o=e.template.r?"'"+e.template.r+"' reference":"expression";m("The %s being used for two-way binding is ambiguous, and may cause unexpected results. Consider initialising your data to eliminate the ambiguity",o,{ractive:this.root}),e.resolver.forceResolution(),n=e.keypath}this.attribute.isTwoway=!0,this.keypath=n,i=this.root.viewmodel.get(n),void 0===i&&this.getInitialValue&&(i=this.getInitialValue(),void 0!==i&&this.root.viewmodel.set(n,i)),(r=er(t))&&(this.resetValue=i,r.formBindings.push(this))};Ed.prototype={handleChange:function(){var t=this;su.start(this.root),this.attribute.locked=!0,this.root.viewmodel.set(this.keypath,this.getValue()),su.scheduleTask(function(){return t.attribute.locked=!1}),su.end()},rebound:function(){var t,e,n;e=this.keypath,n=this.attribute.interpolator.keypath,e!==n&&(V(this.root._twowayBindings[e.str],this),this.keypath=n,t=this.root._twowayBindings[n.str]||(this.root._twowayBindings[n.str]=[]),t.push(this))},unbind:function(){}},Ed.extend=function(t){var e,n=this;return e=function(t){Ed.call(this,t),this.init&&this.init()},e.prototype=xa(n.prototype),i(e.prototype,t),e.extend=Ed.extend,e};var xd,_d=Ed,Ad=nr,Cd=_d.extend({getInitialValue:function(){return this.element.fragment?this.element.fragment.toString():""},render:function(){var t=this.element.node;t.addEventListener("change",Ad,!1),this.root.lazy||(t.addEventListener("input",Ad,!1),t.attachEvent&&t.addEventListener("keyup",Ad,!1))},unrender:function(){var t=this.element.node;t.removeEventListener("change",Ad,!1),t.removeEventListener("input",Ad,!1),t.removeEventListener("keyup",Ad,!1)},getValue:function(){return this.element.node.innerHTML}}),Od={},Sd=_d.extend({name:"checked",init:function(){this.siblings=ir(this.root._guid,"radio",this.element.getAttribute("name")),this.siblings.push(this)},render:function(){var t=this.element.node;t.addEventListener("change",Ad,!1),t.attachEvent&&t.addEventListener("click",Ad,!1)},unrender:function(){var t=this.element.node;t.removeEventListener("change",Ad,!1),t.removeEventListener("click",Ad,!1)},handleChange:function(){su.start(this.root),this.siblings.forEach(function(t){t.root.viewmodel.set(t.keypath,t.getValue())}),su.end()},getValue:function(){return this.element.node.checked},unbind:function(){V(this.siblings,this)}}),Td=_d.extend({name:"name",init:function(){this.siblings=ir(this.root._guid,"radioname",this.keypath.str),this.siblings.push(this),this.radioName=!0},getInitialValue:function(){return this.element.getAttribute("checked")?this.element.getAttribute("value"):void 0},render:function(){var t=this.element.node;t.name="{{"+this.keypath.str+"}}",t.checked=this.root.viewmodel.get(this.keypath)==this.element.getAttribute("value"),t.addEventListener("change",Ad,!1),t.attachEvent&&t.addEventListener("click",Ad,!1)},unrender:function(){var t=this.element.node;t.removeEventListener("change",Ad,!1),t.removeEventListener("click",Ad,!1)},getValue:function(){var t=this.element.node;return t._ractive?t._ractive.value:t.value},handleChange:function(){this.element.node.checked&&_d.prototype.handleChange.call(this)},rebound:function(t,e){var n;_d.prototype.rebound.call(this,t,e),(n=this.element.node)&&(n.name="{{"+this.keypath.str+"}}")},unbind:function(){V(this.siblings,this)}}),Fd=_d.extend({name:"name",getInitialValue:function(){return this.noInitialValue=!0,[]},init:function(){var t,e;this.checkboxName=!0,this.siblings=ir(this.root._guid,"checkboxes",this.keypath.str),this.siblings.push(this),this.noInitialValue&&(this.siblings.noInitialValue=!0),this.siblings.noInitialValue&&this.element.getAttribute("checked")&&(t=this.root.viewmodel.get(this.keypath),e=this.element.getAttribute("value"),t.push(e))},unbind:function(){V(this.siblings,this)},render:function(){var t,e,n=this.element.node;t=this.root.viewmodel.get(this.keypath),e=this.element.getAttribute("value"),this.isChecked=o(t)?P(t,e):t==e,n.name="{{"+this.keypath.str+"}}",n.checked=this.isChecked,n.addEventListener("change",Ad,!1),n.attachEvent&&n.addEventListener("click",Ad,!1)},unrender:function(){var t=this.element.node;t.removeEventListener("change",Ad,!1),t.removeEventListener("click",Ad,!1)},changed:function(){var t=!!this.isChecked;return this.isChecked=this.element.node.checked,this.isChecked===t},handleChange:function(){this.isChecked=this.element.node.checked,_d.prototype.handleChange.call(this)},getValue:function(){return this.siblings.filter(rr).map(or)}}),jd=_d.extend({name:"checked",render:function(){var t=this.element.node;t.addEventListener("change",Ad,!1),t.attachEvent&&t.addEventListener("click",Ad,!1)},unrender:function(){var t=this.element.node;t.removeEventListener("change",Ad,!1),t.removeEventListener("click",Ad,!1)},getValue:function(){return this.element.node.checked}}),Pd=_d.extend({getInitialValue:function(){var t,e,n,i,r=this.element.options;if(void 0===this.element.getAttribute("value")&&(e=t=r.length,t)){for(;e--;)if(r[e].getAttribute("selected")){n=r[e].getAttribute("value"),i=!0;break}if(!i)for(;++e<t;)if(!r[e].getAttribute("disabled")){n=r[e].getAttribute("value");break}return void 0!==n&&(this.element.attributes.value.value=n),n}},render:function(){this.element.node.addEventListener("change",Ad,!1)},unrender:function(){this.element.node.removeEventListener("change",Ad,!1)},setValue:function(t){this.root.viewmodel.set(this.keypath,t)},getValue:function(){var t,e,n,i,r;for(t=this.element.node.options,n=t.length,e=0;n>e;e+=1)if(i=t[e],t[e].selected)return r=i._ractive?i._ractive.value:i.value},forceUpdate:function(){var t=this,e=this.getValue();void 0!==e&&(this.attribute.locked=!0,su.scheduleTask(function(){return t.attribute.locked=!1}),this.root.viewmodel.set(this.keypath,e))}}),Rd=Pd.extend({getInitialValue:function(){return this.element.options.filter(function(t){return t.getAttribute("selected")}).map(function(t){return t.getAttribute("value")})},render:function(){var t;this.element.node.addEventListener("change",Ad,!1),t=this.root.viewmodel.get(this.keypath),void 0===t&&this.handleChange()},unrender:function(){this.element.node.removeEventListener("change",Ad,!1)},setValue:function(){throw new Error("TODO not implemented yet")},getValue:function(){var t,e,n,i,r,o;for(t=[],e=this.element.node.options,i=e.length,n=0;i>n;n+=1)r=e[n],r.selected&&(o=r._ractive?r._ractive.value:r.value,t.push(o));return t},handleChange:function(){var t,e,n;return t=this.attribute,e=t.value,n=this.getValue(),void 0!==e&&R(n,e)||Pd.prototype.handleChange.call(this),this},forceUpdate:function(){var t=this,e=this.getValue();void 0!==e&&(this.attribute.locked=!0,su.scheduleTask(function(){return t.attribute.locked=!1}),this.root.viewmodel.set(this.keypath,e))},updateModel:function(){void 0!==this.attribute.value&&this.attribute.value.length||this.root.viewmodel.set(this.keypath,this.initialValue)}}),Nd=_d.extend({render:function(){this.element.node.addEventListener("change",Ad,!1)},unrender:function(){this.element.node.removeEventListener("change",Ad,!1)},getValue:function(){return this.element.node.files}});xd=_d.extend({getInitialValue:function(){return""},getValue:function(){return this.element.node.value},render:function(){var t,e=this.element.node,n=!1;this.rendered=!0,t=this.root.lazy,this.element.lazy===!0?t=!0:this.element.lazy===!1?t=!1:u(this.element.lazy)?(t=!1,n=+this.element.lazy):u(t||"")&&(n=+t,t=!1,this.element.lazy=n),this.handler=n?ar:Ad,e.addEventListener("change",Ad,!1),t||(e.addEventListener("input",this.handler,!1),e.attachEvent&&e.addEventListener("keyup",this.handler,!1)),e.addEventListener("blur",sr,!1)},unrender:function(){var t=this.element.node;this.rendered=!1,t.removeEventListener("change",Ad,!1),t.removeEventListener("input",this.handler,!1),t.removeEventListener("keyup",this.handler,!1),t.removeEventListener("blur",sr,!1)}});var Ld=xd.extend({getInitialValue:function(){return void 0},getValue:function(){var t=parseFloat(this.element.node.value);return isNaN(t)?void 0:t}}),Vd=cr,Id=lr,Dd=dr,Md=fr,Ud=/^event(?:\.(.+))?/,Bd=yr,qd={},Wd={touchstart:!0,touchmove:!0,touchend:!0,touchcancel:!0,touchleave:!0},Qd=wr,zd=kr,Hd=Er,Kd=xr,Gd=_r,$d=function(t,e,n){this.init(t,e,n)};$d.prototype={bubble:Vd,fire:Id,getAction:Dd,init:Md,listen:Bd,rebind:Qd,render:zd,resolve:Hd,unbind:Kd,unrender:Gd};var Yd=function(t,e){var n,i,r,o,s=[];for(i in e)if(e.hasOwnProperty(i))for(r=i.split("-"),n=r.length;n--;)o=new $d(t,r[n],e[i]),s.push(o);return s},Jd=function(t,e){var n,i,r,o=this;this.element=t,this.root=n=t.root,i=e.n||e,("string"==typeof i||(r=new wm({template:i,root:n,owner:t}),i=r.toString(),r.unbind(),""!==i))&&(e.a?this.params=e.a:e.d&&(this.fragment=new wm({template:e.d,root:n,owner:t}),this.params=this.fragment.getArgsList(),this.fragment.bubble=function(){this.dirtyArgs=this.dirtyValue=!0,o.params=this.getArgsList(),o.ready&&o.update()}),this.fn=g("decorators",n,i),this.fn||l(Ia(i,"decorator")))};Jd.prototype={init:function(){var t,e,n;if(t=this.element.node,this.params?(n=[t].concat(this.params),e=this.fn.apply(this.root,n)):e=this.fn.call(this.root,t),!e||!e.teardown)throw new Error("Decorator definition must return an object with a teardown method");this.actual=e,this.ready=!0},update:function(){this.actual.update?this.actual.update.apply(this.root,this.params):(this.actual.teardown(!0),this.init())},rebind:function(t,e){this.fragment&&this.fragment.rebind(t,e)},teardown:function(t){this.torndown=!0,this.ready&&this.actual.teardown(),!t&&this.fragment&&this.fragment.unbind()}};var Zd,Xd,tf,ef=jr,nf=Pr,rf=Dr,of=function(t){return t.replace(/-([a-zA-Z])/g,function(t,e){return e.toUpperCase()})};Zs?(Xd={},tf=ca("div").style,Zd=function(t){var e,n,i;if(t=of(t),!Xd[t])if(void 0!==tf[t])Xd[t]=t;else for(i=t.charAt(0).toUpperCase()+t.substring(1),e=ra.length;e--;)if(n=ra[e],void 0!==tf[n+i]){Xd[t]=n+i;break}return Xd[t]}):Zd=null;var sf,af,uf=Zd;Zs?(af=window.getComputedStyle||Ca.getComputedStyle,sf=function(t){var e,n,i,r,s;if(e=af(this.node),"string"==typeof t)return s=e[uf(t)],"0px"===s&&(s=0),s;if(!o(t))throw new Error("Transition$getStyle must be passed a string, or an array of strings representing CSS properties");for(n={},i=t.length;i--;)r=t[i],s=e[uf(r)],"0px"===s&&(s=0),n[r]=s;return n}):sf=null;var hf=function(t,e){var n;if("string"==typeof t)this.node.style[uf(t)]=e;else for(n in t)t.hasOwnProperty(n)&&(this.node.style[uf(n)]=t[n]);return this},cf=function(t){var e;this.duration=t.duration,this.step=t.step,this.complete=t.complete,"string"==typeof t.easing?(e=t.root.easing[t.easing],e||(v(Ia(t.easing,"easing")),e=Mr)):e="function"==typeof t.easing?t.easing:Mr,this.easing=e,this.start=$a(),this.end=this.start+this.duration,this.running=!0,lu.add(this)};cf.prototype={tick:function(t){var e,n;return this.running?t>this.end?(this.step&&this.step(1),this.complete&&this.complete(1),!1):(e=t-this.start,n=this.easing(e/this.duration),this.step&&this.step(n),!0):!1},stop:function(){this.abort&&this.abort(),this.running=!1}};var lf,df,ff,pf,mf,vf,gf,yf,bf=new RegExp("^-(?:"+ra.join("|")+")-"),wf=function(t){return t.replace(bf,"")},kf=new RegExp("^(?:"+ra.join("|")+")([A-Z])"),Ef=function(t){var e;return t?(kf.test(t)&&(t="-"+t),e=t.replace(/[A-Z]/g,function(t){return"-"+t.toLowerCase()})):""},xf={},_f={};Zs?(df=ca("div").style,function(){void 0!==df.transition?(ff="transition",pf="transitionend",mf=!0):void 0!==df.webkitTransition?(ff="webkitTransition",pf="webkitTransitionEnd",mf=!0):mf=!1}(),ff&&(vf=ff+"Duration",gf=ff+"Property",yf=ff+"TimingFunction"),lf=function(t,e,n,i,r){setTimeout(function(){var o,s,a,u,h;u=function(){s&&a&&(t.root.fire(t.name+":end",t.node,t.isIntro),r())},o=(t.node.namespaceURI||"")+t.node.tagName,t.node.style[gf]=i.map(uf).map(Ef).join(","),t.node.style[yf]=Ef(n.easing||"linear"),t.node.style[vf]=n.duration/1e3+"s",h=function(e){var n;n=i.indexOf(of(wf(e.propertyName))),-1!==n&&i.splice(n,1),i.length||(t.node.removeEventListener(pf,h,!1),a=!0,u())},t.node.addEventListener(pf,h,!1),setTimeout(function(){for(var r,c,l,d,f,p=i.length,v=[];p--;)d=i[p],r=o+d,mf&&!_f[r]&&(t.node.style[uf(d)]=e[d],xf[r]||(c=t.getStyle(d),xf[r]=t.getStyle(d)!=e[d],_f[r]=!xf[r],_f[r]&&(t.node.style[uf(d)]=c))),(!mf||_f[r])&&(void 0===c&&(c=t.getStyle(d)),l=i.indexOf(d),-1===l?m("Something very strange happened with transitions. Please raise an issue at https://github.com/ractivejs/ractive/issues - thanks!",{node:t.node}):i.splice(l,1),f=/[^\d]*$/.exec(e[d])[0],v.push({name:uf(d),interpolator:Da(parseFloat(c),parseFloat(e[d])),suffix:f}));v.length?new cf({root:t.root,duration:n.duration,easing:of(n.easing||""),step:function(e){var n,i;for(i=v.length;i--;)n=v[i],t.node.style[n.name]=n.interpolator(e)+n.suffix},complete:function(){s=!0,u()}}):s=!0,i.length||(t.node.removeEventListener(pf,h,!1),a=!0,u())},0)},n.delay||0)}):lf=null;var Af,Cf,Of,Sf,Tf;if("undefined"!=typeof document){if(Af="hidden",Tf={},Af in document)Of="";else for(Sf=ra.length;Sf--;)Cf=ra[Sf],Af=Cf+"Hidden",Af in document&&(Of=Cf);void 0!==Of?(document.addEventListener(Of+"visibilitychange",Ur),Ur()):("onfocusout"in document?(document.addEventListener("focusout",Br),document.addEventListener("focusin",qr)):(window.addEventListener("pagehide",Br),window.addEventListener("blur",Br),window.addEventListener("pageshow",qr),window.addEventListener("focus",qr)),Tf.hidden=!1)}var Ff,jf,Pf;Zs?(jf=window.getComputedStyle||Ca.getComputedStyle,Ff=function(t,e,n){var i,r=this;if(4===arguments.length)throw new Error("t.animateStyle() returns a promise - use .then() instead of passing a callback");if(Tf.hidden)return this.setStyle(t,e),Pf||(Pf=nu.resolve());"string"==typeof t?(i={},i[t]=e):(i=t,n=e),n||(v('The "%s" transition does not supply an options object to `t.animateStyle()`. This will break in a future version of Ractive. For more info see https://github.com/RactiveJS/Ractive/issues/340',this.name),n=this);var o=new nu(function(t){var e,o,s,a,u,h,c;if(!n.duration)return r.setStyle(i),void t();for(e=Object.keys(i),o=[],s=jf(r.node),u={},h=e.length;h--;)c=e[h],a=s[uf(c)],"0px"===a&&(a=0),a!=i[c]&&(o.push(c),r.node.style[uf(c)]=a);return o.length?void lf(r,i,n,o,t):void t()});return o}):Ff=null;var Rf=function(t,e){return"number"==typeof t?t={duration:t}:"string"==typeof t?t="slow"===t?{duration:600}:"fast"===t?{duration:200}:{duration:400}:t||(t={}),r({},t,e)},Nf=Wr,Lf=function(t,e,n){this.init(t,e,n)};Lf.prototype={init:rf,start:Nf,getStyle:sf,setStyle:hf,animateStyle:Ff,processParams:Rf};var Vf,If,Df=zr;Vf=function(){var t=this.node,e=this.fragment.toString(!1);if(window&&window.appearsToBeIELessEqual8&&(t.type="text/css"),t.styleSheet)t.styleSheet.cssText=e;else{for(;t.hasChildNodes();)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(e))}},If=function(){this.node.type&&"text/javascript"!==this.node.type||m("Script tag was updated. This does not cause the code to be re-evaluated!",{ractive:this.root}),this.node.text=this.fragment.toString(!1)};var Mf=function(){var t,e;return this.template.y?"<!DOCTYPE"+this.template.dd+">":(t="<"+this.template.e,t+=this.attributes.map(Jr).join("")+this.conditionalAttributes.map(Jr).join(""),"option"===this.name&&$r(this)&&(t+=" selected"),"input"===this.name&&Yr(this)&&(t+=" checked"),t+=">","textarea"===this.name&&void 0!==this.getAttribute("value")?t+=_n(this.getAttribute("value")):void 0!==this.getAttribute("contenteditable")&&(t+=this.getAttribute("value")||""),this.fragment&&(e="script"!==this.name&&"style"!==this.name,t+=this.fragment.toString(e)),Oc.test(this.template.e)||(t+="</"+this.template.e+">"),t)
},Uf=Zr,Bf=Xr,qf=function(t){this.init(t)};qf.prototype={bubble:Il,detach:Dl,find:Ml,findAll:Ul,findAllComponents:Bl,findComponent:ql,findNextNode:Wl,firstNode:Ql,getAttribute:zl,init:ef,rebind:nf,render:Df,toString:Mf,unbind:Uf,unrender:Bf};var Wf=/^\s*$/,Qf=/^\s*/,zf=function(t){var e,n,i,r;return e=t.split("\n"),n=e[0],void 0!==n&&Wf.test(n)&&e.shift(),i=L(e),void 0!==i&&Wf.test(i)&&e.pop(),r=e.reduce(eo,null),r&&(t=e.map(function(t){return t.replace(r,"")}).join("\n")),t},Hf=function(t,e){var n;return e?n=t.split("\n").map(function(t,n){return n?e+t:t}).join("\n"):t},Kf='Could not find template for partial "%s"',Gf=function(t){var e,n;e=this.parentFragment=t.parentFragment,this.root=e.root,this.type=Zh,this.index=t.index,this.name=t.template.r,this.rendered=!1,this.fragment=this.fragmentToRender=this.fragmentToUnrender=null,tl.init(this,t),this.keypath||((n=no(this.root,this.name,e))?(Uc.call(this),this.isNamed=!0,this.setTemplate(n)):v(Kf,this.name))};Gf.prototype={bubble:function(){this.parentFragment.bubble()},detach:function(){return this.fragment.detach()},find:function(t){return this.fragment.find(t)},findAll:function(t,e){return this.fragment.findAll(t,e)},findComponent:function(t){return this.fragment.findComponent(t)},findAllComponents:function(t,e){return this.fragment.findAllComponents(t,e)},firstNode:function(){return this.fragment.firstNode()},findNextNode:function(){return this.parentFragment.findNextNode(this)},getPartialName:function(){return this.isNamed&&this.name?this.name:void 0===this.value?this.name:this.value},getValue:function(){return this.fragment.getValue()},rebind:function(t,e){this.isNamed||Xc.call(this,t,e),this.fragment&&this.fragment.rebind(t,e)},render:function(){return this.docFrag=document.createDocumentFragment(),this.update(),this.rendered=!0,this.docFrag},resolve:tl.resolve,setValue:function(t){var e;(void 0===t||t!==this.value)&&(void 0!==t&&(e=no(this.root,""+t,this.parentFragment)),!e&&this.name&&(e=no(this.root,this.name,this.parentFragment))&&(Uc.call(this),this.isNamed=!0),e||v(Kf,this.name,{ractive:this.root}),this.value=t,this.setTemplate(e||[]),this.bubble(),this.rendered&&su.addView(this))},setTemplate:function(t){this.fragment&&(this.fragment.unbind(),this.rendered&&(this.fragmentToUnrender=this.fragment)),this.fragment=new wm({template:t,root:this.root,owner:this,pElement:this.parentFragment.pElement}),this.fragmentToRender=this.fragment},toString:function(t){var e,n,i,r;return e=this.fragment.toString(t),n=this.parentFragment.items[this.index-1],n&&n.type===Kh?(i=n.text.split("\n").pop(),(r=/^\s+$/.exec(i))?Hf(e,r[0]):e):e},unbind:function(){this.isNamed||Uc.call(this),this.fragment&&this.fragment.unbind()},unrender:function(t){this.rendered&&(this.fragment&&this.fragment.unrender(t),this.rendered=!1)},update:function(){var t,e;this.fragmentToUnrender&&(this.fragmentToUnrender.unrender(!0),this.fragmentToUnrender=null),this.fragmentToRender&&(this.docFrag.appendChild(this.fragmentToRender.render()),this.fragmentToRender=null),this.rendered&&(t=this.parentFragment.getNode(),e=this.parentFragment.findNextNode(this),t.insertBefore(this.docFrag,e))}};var $f,Yf,Jf,Zf=uo,Xf=new F("detach"),tp=ho,ep=co,np=lo,ip=fo,rp=po,op=mo,sp=function(t,e,n,i){var r=t.root,o=t.keypath;i?r.viewmodel.smartUpdate(o,e,i):r.viewmodel.mark(o)},ap=[],up=["pop","push","reverse","shift","sort","splice","unshift"];up.forEach(function(t){var e=function(){for(var e=arguments.length,n=Array(e),i=0;e>i;i++)n[i]=arguments[i];var r,o,s,a;for(r=Te(this,t,n),o=Array.prototype[t].apply(this,arguments),su.start(),this._ractive.setting=!0,a=this._ractive.wrappers.length;a--;)s=this._ractive.wrappers[a],su.addRactive(s.root),sp(s,this,t,r);return su.end(),this._ractive.setting=!1,o};_a(ap,t,{value:e})}),$f={},$f.__proto__?(Yf=function(t){t.__proto__=ap},Jf=function(t){t.__proto__=Array.prototype}):(Yf=function(t){var e,n;for(e=up.length;e--;)n=up[e],_a(t,n,{value:ap[n],configurable:!0})},Jf=function(t){var e;for(e=up.length;e--;)delete t[up[e]]}),Yf.unpatch=Jf;var hp,cp,lp,dp=Yf;hp={filter:function(t){return o(t)&&(!t._ractive||!t._ractive.setting)},wrap:function(t,e,n){return new cp(t,e,n)}},cp=function(t,e,n){this.root=t,this.value=e,this.keypath=_(n),e._ractive||(_a(e,"_ractive",{value:{wrappers:[],instances:[],setting:!1},configurable:!0}),dp(e)),e._ractive.instances[t._guid]||(e._ractive.instances[t._guid]=0,e._ractive.instances.push(t)),e._ractive.instances[t._guid]+=1,e._ractive.wrappers.push(this)},cp.prototype={get:function(){return this.value},teardown:function(){var t,e,n,i,r;if(t=this.value,e=t._ractive,n=e.wrappers,i=e.instances,e.setting)return!1;if(r=n.indexOf(this),-1===r)throw new Error(lp);if(n.splice(r,1),n.length){if(i[this.root._guid]-=1,!i[this.root._guid]){if(r=i.indexOf(this.root),-1===r)throw new Error(lp);i.splice(r,1)}}else delete t._ractive,dp.unpatch(this.value)}},lp="Something went wrong in a rather interesting way";var fp,pp,mp=/^\s*[0-9]+\s*$/,vp=function(t){return mp.test(t)?[]:{}};try{Object.defineProperty({},"test",{value:0}),fp={filter:function(t,e,n){var i,r;return e?(e=_(e),(i=n.viewmodel.wrapped[e.parent.str])&&!i.magic?!1:(r=n.viewmodel.get(e.parent),o(r)&&/^[0-9]+$/.test(e.lastKey)?!1:r&&("object"==typeof r||"function"==typeof r))):!1},wrap:function(t,e,n){return new pp(t,e,n)}},pp=function(t,e,n){var i,r,o;return n=_(n),this.magic=!0,this.ractive=t,this.keypath=n,this.value=e,this.prop=n.lastKey,i=n.parent,this.obj=i.isRoot?t.viewmodel.data:t.viewmodel.get(i),r=this.originalDescriptor=Object.getOwnPropertyDescriptor(this.obj,this.prop),r&&r.set&&(o=r.set._ractiveWrappers)?void(-1===o.indexOf(this)&&o.push(this)):void vo(this,e,r)},pp.prototype={get:function(){return this.value},reset:function(t){return this.updating?void 0:(this.updating=!0,this.obj[this.prop]=t,su.addRactive(this.ractive),this.ractive.viewmodel.mark(this.keypath,{keepExistingWrapper:!0}),this.updating=!1,!0)},set:function(t,e){this.updating||(this.obj[this.prop]||(this.updating=!0,this.obj[this.prop]=vp(t),this.updating=!1),this.obj[this.prop][t]=e)},teardown:function(){var t,e,n,i,r;return this.updating?!1:(t=Object.getOwnPropertyDescriptor(this.obj,this.prop),e=t&&t.set,void(e&&(i=e._ractiveWrappers,r=i.indexOf(this),-1!==r&&i.splice(r,1),i.length||(n=this.obj[this.prop],Object.defineProperty(this.obj,this.prop,this.originalDescriptor||{writable:!0,enumerable:!0,configurable:!0}),this.obj[this.prop]=n))))}}}catch(Oa){fp=!1}var gp,yp;fp&&(gp={filter:function(t,e,n){return fp.filter(t,e,n)&&hp.filter(t)},wrap:function(t,e,n){return new yp(t,e,n)}},yp=function(t,e,n){this.value=e,this.magic=!0,this.magicWrapper=fp.wrap(t,e,n),this.arrayWrapper=hp.wrap(t,e,n)},yp.prototype={get:function(){return this.value},teardown:function(){this.arrayWrapper.teardown(),this.magicWrapper.teardown()},reset:function(t){return this.magicWrapper.reset(t)}});var bp=go,wp={},kp=_o,Ep=To,xp=Fo,_p=function(t,e){this.computation=t,this.viewmodel=t.viewmodel,this.ref=e,this.root=this.viewmodel.ractive,this.parentFragment=this.root.component&&this.root.component.parentFragment};_p.prototype={resolve:function(t){this.computation.softDeps.push(t),this.computation.unresolvedDeps[t.str]=null,this.viewmodel.register(t,this.computation,"computed")}};var Ap=function(t,e){this.key=t,this.getter=e.getter,this.setter=e.setter,this.hardDeps=e.deps||[],this.softDeps=[],this.unresolvedDeps={},this.depValues={},this._dirty=this._firstRun=!0};Ap.prototype={constructor:Ap,init:function(t){var e,n=this;this.viewmodel=t,this.bypass=!0,e=t.get(this.key),t.clearCache(this.key.str),this.bypass=!1,this.setter&&void 0!==e&&this.set(e),this.hardDeps&&this.hardDeps.forEach(function(e){return t.register(e,n,"computed")})},invalidate:function(){this._dirty=!0},get:function(){var t,e,n=this,i=!1;if(this.getting){var r="The "+this.key.str+" computation indirectly called itself. This probably indicates a bug in the computation. It is commonly caused by `array.sort(...)` - if that's the case, clone the array first with `array.slice().sort(...)`";return p(r),this.value}if(this.getting=!0,this._dirty){if(this._firstRun||!this.hardDeps.length&&!this.softDeps.length?i=!0:[this.hardDeps,this.softDeps].forEach(function(t){var e,r,o;if(!i)for(o=t.length;o--;)if(e=t[o],r=n.viewmodel.get(e),!a(r,n.depValues[e.str]))return n.depValues[e.str]=r,void(i=!0)}),i){this.viewmodel.capture();try{this.value=this.getter()}catch(o){m('Failed to compute "%s"',this.key.str),d(o.stack||o),this.value=void 0}t=this.viewmodel.release(),e=this.updateDependencies(t),e&&[this.hardDeps,this.softDeps].forEach(function(t){t.forEach(function(t){n.depValues[t.str]=n.viewmodel.get(t)})})}this._dirty=!1}return this.getting=this._firstRun=!1,this.value},set:function(t){if(this.setting)return void(this.value=t);if(!this.setter)throw new Error("Computed properties without setters are read-only. (This may change in a future version of Ractive!)");this.setter(t)},updateDependencies:function(t){var e,n,i,r,o;for(n=this.softDeps,e=n.length;e--;)i=n[e],-1===t.indexOf(i)&&(r=!0,this.viewmodel.unregister(i,this,"computed"));for(e=t.length;e--;)i=t[e],-1!==n.indexOf(i)||this.hardDeps&&-1!==this.hardDeps.indexOf(i)||(r=!0,jo(this.viewmodel,i)&&!this.unresolvedDeps[i.str]?(o=new _p(this,i.str),t.splice(e,1),this.unresolvedDeps[i.str]=o,su.addUnresolved(o)):this.viewmodel.register(i,this,"computed"));return r&&(this.softDeps=t.slice()),r}};var Cp=Po,Op={FAILED_LOOKUP:!0},Sp=Ro,Tp={},Fp=Lo,jp=Vo,Pp=function(t,e){this.localKey=t,this.keypath=e.keypath,this.origin=e.origin,this.deps=[],this.unresolved=[],this.resolved=!1};Pp.prototype={forceResolution:function(){this.keypath=this.localKey,this.setup()},get:function(t,e){return this.resolved?this.origin.get(this.map(t),e):void 0},getValue:function(){return this.keypath?this.origin.get(this.keypath):void 0},initViewmodel:function(t){this.local=t,this.setup()},map:function(t){return void 0===typeof this.keypath?this.localKey:t.replace(this.localKey,this.keypath)},register:function(t,e,n){this.deps.push({keypath:t,dep:e,group:n}),this.resolved&&this.origin.register(this.map(t),e,n)},resolve:function(t){void 0!==this.keypath&&this.unbind(!0),this.keypath=t,this.setup()},set:function(t,e){this.resolved||this.forceResolution(),this.origin.set(this.map(t),e)},setup:function(){var t=this;void 0!==this.keypath&&(this.resolved=!0,this.deps.length&&(this.deps.forEach(function(e){var n=t.map(e.keypath);if(t.origin.register(n,e.dep,e.group),e.dep.setValue)e.dep.setValue(t.origin.get(n));else{if(!e.dep.invalidate)throw new Error("An unexpected error occurred. Please raise an issue at https://github.com/ractivejs/ractive/issues - thanks!");e.dep.invalidate()}}),this.origin.mark(this.keypath)))},setValue:function(t){if(!this.keypath)throw new Error("Mapping does not have keypath, cannot set value. Please raise an issue at https://github.com/ractivejs/ractive/issues - thanks!");this.origin.set(this.keypath,t)},unbind:function(t){var e=this;t||delete this.local.mappings[this.localKey],this.resolved&&(this.deps.forEach(function(t){e.origin.unregister(e.map(t.keypath),t.dep,t.group)}),this.tracker&&this.origin.unregister(this.keypath,this.tracker))},unregister:function(t,e,n){var i,r;if(this.resolved){for(i=this.deps,r=i.length;r--;)if(i[r].dep===e){i.splice(r,1);break}this.origin.unregister(this.map(t),e,n)}}};var Rp=Io,Np=function(t,e){var n,i,r,o;return n={},i=0,r=t.map(function(t,r){var s,a,u;a=i,u=e.length;do{if(s=e.indexOf(t,a),-1===s)return o=!0,-1;a=s+1}while(n[s]&&u>a);return s===i&&(i+=1),s!==r&&(o=!0),n[s]=!0,s})},Lp=Do,Vp={},Ip=Bo,Dp=Wo,Mp=Qo,Up=zo,Bp=Ko,qp={implicit:!0},Wp={noCascade:!0},Qp=$o,zp=Yo,Hp=function(t){var e,n,i=t.adapt,r=t.data,o=t.ractive,s=t.computed,a=t.mappings;this.ractive=o,this.adaptors=i,this.onchange=t.onchange,this.cache={},this.cacheMap=xa(null),this.deps={computed:xa(null),"default":xa(null)},this.depsMap={computed:xa(null),"default":xa(null)},this.patternObservers=[],this.specials=xa(null),this.wrapped=xa(null),this.computations=xa(null),this.captureGroups=[],this.unresolvedImplicitDependencies=[],this.changes=[],this.implicitChanges={},this.noCascade={},this.data=r,this.mappings=xa(null);for(e in a)this.map(_(e),a[e]);if(r)for(e in r)(n=this.mappings[e])&&void 0===n.getValue()&&n.setValue(r[e]);for(e in s)a&&e in a&&l("Cannot map to a computed property ('%s')",e),this.compute(_(e),s[e]);this.ready=!0};Hp.prototype={adapt:bp,applyChanges:kp,capture:Ep,clearCache:xp,compute:Cp,get:Sp,init:Fp,map:jp,mark:Rp,merge:Lp,register:Ip,release:Dp,reset:Mp,set:Up,smartUpdate:Bp,teardown:Qp,unregister:zp},Zo.prototype={constructor:Zo,begin:function(t){this.inProcess[t._guid]=!0},end:function(t){var e=t.parent;e&&this.inProcess[e._guid]?Xo(this.queue,e).push(t):ts(this,t),delete this.inProcess[t._guid]}};var Kp=/\$\{([^\}]+)\}/g,Gp=new F("construct"),$p=new F("config"),Yp=new Zo("init"),Jp=0,Zp=["adaptors","components","decorators","easing","events","interpolators","partials","transitions"],Xp=os;cs.prototype={bubble:function(){this.dirty||(this.dirty=!0,su.addView(this))},update:function(){this.callback(this.fragment.getValue()),this.dirty=!1},rebind:function(t,e){this.fragment.rebind(t,e)},unbind:function(){this.fragment.unbind()}};var tm=function(t,e,n,r,s){var a,u,h,c,l,d,f={},p={},v={},g=[];for(u=t.parentFragment,h=t.root,s=s||{},i(f,s),s.content=r||[],f[""]=s.content,e.defaults.el&&m("The <%s/> component has a default `el` property; it has been disregarded",t.name),c=u;c;){if(c.owner.type===nc){l=c.owner.container;break}c=c.parent}return n&&Object.keys(n).forEach(function(e){var i,r,s=n[e];if("string"==typeof s)i=Nc(s),p[e]=i?i.value:s;else if(0===s)p[e]=!0;else{if(!o(s))throw new Error("erm wut");ds(s)?(v[e]={origin:t.root.viewmodel,keypath:void 0},r=ls(t,s[0],function(t){t.isSpecial?d?a.set(e,t.value):(p[e]=t.value,delete v[e]):d?a.viewmodel.mappings[e].resolve(t):v[e].keypath=t})):r=new cs(t,s,function(t){d?a.set(e,t):p[e]=t}),g.push(r)}}),a=xa(e.prototype),Xp(a,{el:null,append:!0,data:p,partials:s,magic:h.magic||e.defaults.magic,modifyArrays:h.modifyArrays,adapt:h.adapt},{parent:h,component:t,container:l,mappings:v,inlinePartials:f,cssIds:u.cssIds}),d=!0,t.resolvers=g,a},em=function(t){var e,n;for(e=t.root;e;)(n=e._liveComponentQueries["_"+t.name])&&n.push(t.instance),e=e.parent},nm=ms,im=vs,rm=gs,om=ys,sm=bs,am=new F("teardown"),um=ks,hm=function(t,e){this.init(t,e)};hm.prototype={detach:Zf,find:tp,findAll:ep,findAllComponents:np,findComponent:ip,findNextNode:rp,firstNode:op,init:nm,rebind:im,render:rm,toString:om,unbind:sm,unrender:um};var cm=hm,lm=function(t){this.type=Xh,this.value=t.template.c};lm.prototype={detach:Dc,firstNode:function(){return this.node},render:function(){return this.node||(this.node=document.createComment(this.value)),this.node},toString:function(){return"<!--"+this.value+"-->"},unrender:function(t){t&&this.node.parentNode.removeChild(this.node)}};var dm=function(t){var e,n;this.type=nc,this.container=e=t.parentFragment.root,this.component=n=e.component,this.container=e,this.containerFragment=t.parentFragment,this.parentFragment=n.parentFragment;var i=this.name=t.template.n||"",r=e._inlinePartials[i];r||(m('Could not find template for partial "'+i+'"',{ractive:t.root}),r=[]),this.fragment=new wm({owner:this,root:e.parent,template:r,pElement:this.containerFragment.pElement}),o(n.yielders[i])?n.yielders[i].push(this):n.yielders[i]=[this],su.scheduleTask(function(){if(n.yielders[i].length>1)throw new Error("A component template can only have one {{yield"+(i?" "+i:"")+"}} declaration at a time")})};dm.prototype={detach:function(){return this.fragment.detach()},find:function(t){return this.fragment.find(t)},findAll:function(t,e){return this.fragment.findAll(t,e)},findComponent:function(t){return this.fragment.findComponent(t)},findAllComponents:function(t,e){return this.fragment.findAllComponents(t,e)},findNextNode:function(){return this.containerFragment.findNextNode(this)},firstNode:function(){return this.fragment.firstNode()},getValue:function(t){return this.fragment.getValue(t)},render:function(){return this.fragment.render()},unbind:function(){this.fragment.unbind()},unrender:function(t){this.fragment.unrender(t),V(this.component.yielders[this.name],this)},rebind:function(t,e){this.fragment.rebind(t,e)},toString:function(){return this.fragment.toString()}};var fm=function(t){this.declaration=t.template.a};fm.prototype={init:Ea,render:Ea,unrender:Ea,teardown:Ea,toString:function(){return"<!DOCTYPE"+this.declaration+">"}};var pm=Es,mm=_s,vm=As,gm=Cs,ym=Ts,bm=js,wm=function(t){this.init(t)};wm.prototype={bubble:Lh,detach:Vh,find:Ih,findAll:Dh,findAllComponents:Mh,findComponent:Uh,findNextNode:Bh,firstNode:qh,getArgsList:Lc,getNode:Vc,getValue:Ic,init:pm,rebind:mm,registerIndexRef:function(t){var e=this.registeredIndexRefs;-1===e.indexOf(t)&&e.push(t)},render:vm,toString:gm,unbind:ym,unregisterIndexRef:function(t){var e=this.registeredIndexRefs;e.splice(e.indexOf(t),1)},unrender:bm};var km,Em,xm=Ps,_m=["template","partials","components","decorators","events"],Am=new F("reset"),Cm=function(t,e){function n(e,i,r){r&&r.partials[t]||e.forEach(function(e){e.type===Zh&&e.getPartialName()===t&&i.push(e),e.fragment&&n(e.fragment.items,i,r),o(e.fragments)?n(e.fragments,i,r):o(e.items)?n(e.items,i,r):e.type===ec&&e.instance&&n(e.instance.fragment.items,i,e.instance),e.type===Jh&&(o(e.attributes)&&n(e.attributes,i,r),o(e.conditionalAttributes)&&n(e.conditionalAttributes,i,r))})}var i,r=[];return n(this.fragment.items,r),this.partials[t]=e,i=su.start(this,!0),r.forEach(function(e){e.value=void 0,e.setValue(t)}),su.end(),i},Om=Rs,Sm=eh("reverse"),Tm=Ns,Fm=eh("shift"),jm=eh("sort"),Pm=eh("splice"),Rm=Vs,Nm=Is,Lm=new F("teardown"),Vm=Ms,Im=Us,Dm=Bs,Mm=new F("unrender"),Um=eh("unshift"),Bm=qs,qm=new F("update"),Wm=Ws,Qm={add:Ga,animate:fu,detach:mu,find:gu,findAll:Au,findAllComponents:Cu,findComponent:Ou,findContainer:Su,findParent:Tu,fire:ju,get:Pu,insert:Nu,merge:Vu,observe:Ku,observeOnce:Gu,off:Ju,on:Zu,once:Xu,pop:nh,push:ih,render:ch,reset:xm,resetPartial:Cm,resetTemplate:Om,reverse:Sm,set:Tm,shift:Fm,sort:jm,splice:Pm,subtract:Rm,teardown:Nm,toggle:Vm,toHTML:Im,toHtml:Im,unrender:Dm,unshift:Um,update:Bm,updateModel:Wm},zm=function(t,e,n){return n||zs(t,e)?function(){var n,i="_super"in this,r=this._super;return this._super=e,n=t.apply(this,arguments),i&&(this._super=r),n}:t},Hm=Hs,Km=Ys,Gm=function(t){var e,n,i={};return t&&(e=t._ractive)?(i.ractive=e.root,i.keypath=e.keypath.str,i.index={},(n=Sn(e.proxy.parentFragment))&&(i.index=Sn.resolve(n)),i):i};km=function(t){return this instanceof km?void Xp(this,t):new km(t)},Em={DEBUG:{writable:!0,value:!0},DEBUG_PROMISES:{writable:!0,value:!0},extend:{value:Km},getNodeInfo:{value:Gm},parse:{value:parse},Promise:{value:nu},svg:{value:ia},magic:{value:ea},VERSION:{value:"0.7.1"},adaptors:{writable:!0,value:{}},components:{writable:!0,value:{}},decorators:{writable:!0,value:{}},easing:{writable:!0,value:ua},events:{writable:!0,value:{}},interpolators:{writable:!0,value:Ma},partials:{writable:!0,value:{}},transitions:{writable:!0,value:{}}},Aa(km,Em),km.prototype=i(Qm,aa),km.prototype.constructor=km,km.defaults=km.prototype;var $m="function";if(typeof Date.now!==$m||typeof String.prototype.trim!==$m||typeof Object.keys!==$m||typeof Array.prototype.indexOf!==$m||typeof Array.prototype.forEach!==$m||typeof Array.prototype.map!==$m||typeof Array.prototype.filter!==$m||"undefined"!=typeof window&&typeof window.addEventListener!==$m)throw new Error("It looks like you're attempting to use Ractive.js in an older browser. You'll need to use one of the 'legacy builds' in order to continue - see http://docs.ractivejs.org/latest/legacy-builds for more information.");return km});
//# sourceMappingURL=ractive-legacy.runtime.min.js.map