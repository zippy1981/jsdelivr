{"version":3,"file":"ractive-route.min.js","sources":["ractive-route.js"],"names":["factory","module","exports","require","define","amd","window","Ractive","Route","pattern","Handler","observe","router","this","map","parsePattern","regExp","patternToRegExp","strictRegExp","patternToStrictRegExp","isComponent","extend","assign","qs","hash","state","allObserved","concat","view","match","name","substr","RegExp","patternToRegExpString","replace","Router","options","basePath","el","data","history","strictMode","linksWatcher","stateWatcher","route","routes","uri","shouldDispatch","oldUri","newUri","path","decodeURIComponent","length","object","i","c","arguments","x","hasOwnProperty","undefined","compact","collection","pick","value","isEmpty","Object","keys","joinPaths","Array","prototype","slice","call","join","parents","nodeName","toLowerCase","parentNode","parseHash","parsed","JSON","parse","e","parseJSON","string","parseUri","parts","protocol","host","parseQS","index","indexOf","pairs","split","pair","scrollTo","id","document","getElementById","scrollBy","getBoundingClientRect","top","stringify","stringifyHash","encodeURIComponent","stringifyQS","destroy","teardown","getState","get","init","_this","parsePath","updating","update","set","request","strict","test","addRoute","push","buildHash","mixIn","buildQS","apply","dispatch","redirect","reload","defaults","noHistory","getUri","location","pathname","search","unwatchLinks","body","removeEventListener","unwatchState","pathChange","pushState","replaceState","watchLinks","hostname","addEventListener","target","href","getAttribute","classList","contains","preventDefault","watchState"],"mappings":"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"}