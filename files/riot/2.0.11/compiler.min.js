(function(e){var r=("allowfullscreen,async,autofocus,autoplay,checked,compact,controls,declare,default,"+"defaultchecked,defaultmuted,defaultselected,defer,disabled,draggable,enabled,formnovalidate,hidden,"+"indeterminate,inert,ismap,itemscope,loop,multiple,muted,nohref,noresize,noshade,novalidate,nowrap,open,"+"pauseonexit,readonly,required,reversed,scoped,seamless,selected,sortable,spellcheck,translate,truespeed,"+"typemustmatch,visible").split(",");var t="area,base,br,col,command,embed,hr,img,input,keygen,link,meta,param,source,track,wbr".split(",");var n={jade:k};var i={coffeescript:h,none:w,cs:h,es6:b,typescript:y,livescript:x,ls:x};var c=/^<([\w\-]+)>(.*)<\/\1>/gim,a=/=({[^}]+})([\s\/\>])/g,o=/([\w\-]+)=(["'])([^\2]+?)\2/g,u=/{\s*([^}]+)\s*}/g,s=/^<([\w\-]+)>([^\x00]*[\w\/}]>$)?([^\x00]*?)^<\/\1>/gim,l=/<script(\s+type=['"]?([^>'"]+)['"]?)?>([^\x00]*?)<\/script>/gm,f=/<style(\s+type=['"]?([^>'"]+)['"]?)?>([^\x00]*?)<\/style>/gm,p=/<!--.*?-->/g,d=/<([\w\-]+)([^>]*)\/\s*>/g,m=/^\s*\/\/.*$/gm,g=/\/\*[^\x00]*?\*\//gm;function v(e,n,i){var c=riot.util.brackets;e=e.replace(/\s+/g," ");e=e.trim().replace(p,"");e=e.replace(c(a),'="$1"$2');e=e.replace(o,function(e,t,n,i){if(i.indexOf(c(0))>=0){t=t.toLowerCase();if(/style|src/.test(t))t="riot-"+t;else if(r.indexOf(t)>=0)t="__"+t}return t+'="'+i+'"'});if(n.expr){e=e.replace(c(u),function(e,r){var t=E(r,n,i).trim().replace(/\r?\n|\r/g,"").trim();if(t.slice(-1)==";")t=t.slice(0,-1);return c(0)+t+c(1)})}e=e.replace(d,function(e,r,n){var i="<"+r+(n?" "+n.trim():"")+">";if(t.indexOf(r.toLowerCase())==-1)i+="</"+r+">";return i});e=e.replace(/'/g,"\\'");e=e.replace(c(/\\{|\\}/g),"\\$&");if(n.compact)e=e.replace(/> </g,"><");return e}function h(e){return require("coffee-script").compile(e,{bare:true})}function b(e){return require("babel").transform(e,{blacklist:["useStrict"]}).code}function y(e){return require("typescript-simple")(e)}function x(e){return require("LiveScript").compile(e,{bare:true,header:false})}function w(e){return e}function k(e){return require("jade").render(e,{pretty:true})}function q(e){e=e.replace(m,"").replace(g,"");var r=e.split("\n"),t="";r.forEach(function(e,n){var i=e.trim();if(i[0]!="}"&&i.indexOf("(")>0&&i.indexOf("function")==-1){var c=/[{}]/.exec(i.slice(-1)),a=c&&/(\s+)([\w]+)\s*\(([\w,\s]*)\)\s*\{/.exec(e);if(a&&!/^(if|while|switch|for)$/.test(a[2])){r[n]=a[1]+"this."+a[2]+" = function("+a[3]+") {";if(c[0]=="}"){r[n]+=" "+i.slice(a[0].length-1,-1)+"}.bind(this)"}else{t=a[1]}}}if(e.slice(0,t.length+1)==t+"}"){r[n]=t+"}.bind(this);";t=""}});return r.join("\n")}function E(e,r,t){var n=r.parser||(t?i[t]:q);if(!n)throw new Error('Parser not found "'+t+'"');return n(e,r)}function O(e,r){var t=n[e];if(!t)throw new Error('Template parser not found "'+e+'"');return t(r)}function T(e,r){e=e.replace(/\s+/g," ");e=e.trim();e=e.replace(/'/g,"\\'");return e}function $(e,r,t,n){return"riot.tag('"+e+"', '"+r+"'"+(t?", '"+t+"'":"")+", function(opts) {"+n+"\n});"}function L(e,r){r=r||{};if(r.brackets)riot.settings.brackets=r.brackets;if(r.template)e=O(r.template,e);e=e.replace(c,function(e,t,n){return $(t,v(n,r),"","")});return e.replace(s,function(e,t,n,i){n=n||"";var c=r.type;if(!i.trim()){n=n.replace(l,function(e,r,t,n){if(t)c=t.replace("text/","");i=n;return""})}var a="";var o="css";n=n.replace(f,function(e,r,t,n){if(t)o=t.replace("text/","");a=n;return""});return $(t,v(n,r,c),T(a,o),E(i,r,c))})}if(e){this.riot=require(process.env.RIOT||"../riot");return module.exports={html:v,compile:L}}var C=document,S,j;function R(e,r){var t=new XMLHttpRequest;t.onreadystatechange=function(){if(t.readyState==4&&t.status==200)r(t.responseText)};t.open("GET",e,true);t.send("")}function A(e){var r=/[ \t]+/.exec(e);if(r)e=e.replace(new RegExp("^"+r[0],"gm"),"");return e}function H(e){var r=C.createElement("script"),t=C.documentElement;r.text=L(e);t.appendChild(r);t.removeChild(r)}function M(e){var r=C.querySelectorAll('script[type="riot/tag"]');[].map.call(r,function(t,n){var i=t.getAttribute("src");function c(t){H(t);if(n+1==r.length){S.trigger("ready");j=true;e&&e()}}return i?R(i,c):c(A(t.innerHTML))})}riot.compile=function(e,r){if(typeof e=="string"){if(e.trim()[0]=="<"){var t=A(L(e));if(!r)H(t);return t}else{return R(e,function(e){var t=A(L(e));H(t);r&&r(t,e)})}}if(typeof e!="function")e=undefined;if(j)return e&&e();if(S){e&&S.on("ready",e)}else{S=riot.observable();M(e)}};var _=riot.mount;riot.mount=function(e,r,t){var n;riot.compile(function(){n=_(e,r,t)});return n};riot.mountTo=riot.mount})(!this.top);